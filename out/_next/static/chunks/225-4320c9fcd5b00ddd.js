(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{2818:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var r=n(6422),i=n(74888),s=n(2825),o=n(52236),a=n(48934),u=n(6379),l=new WeakMap;e.Track=function(){function t(t,e){var n=this;if(this.name="",this.notes=[],this.controlChanges=(0,s.createControlChanges)(),this.pitchBends=[],l.set(this,e),t){var r=t.find(function(t){return"trackName"===t.type});this.name=r?r.text:""}if(this.instrument=new a.Instrument(t,this),this.channel=0,t){for(var i=t.filter(function(t){return"noteOn"===t.type}),o=t.filter(function(t){return"noteOff"===t.type}),u=this;i.length;)!function(){var t=i.shift();u.channel=t.channel;var e=o.findIndex(function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime});if(-1!==e){var n=o.splice(e,1)[0];u.addNote({durationTicks:n.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:n.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}}();t.filter(function(t){return"controller"===t.type}).forEach(function(t){n.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})}),t.filter(function(t){return"pitchBend"===t.type}).forEach(function(t){n.addPitchBend({ticks:t.absoluteTime,value:t.value/8192})});var c=t.find(function(t){return"endOfTrack"===t.type});this.endOfTrackTicks=void 0!==c?c.absoluteTime:void 0}}return t.prototype.addNote=function(t){var e=l.get(this),n=new u.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(n,t),(0,r.insert)(this.notes,n,"ticks"),this},t.prototype.addCC=function(t){var e=l.get(this),n=new i.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),(0,r.insert)(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(t){var e=l.get(this),n=new o.PitchBend({},e);return Object.assign(n,t),(0,r.insert)(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var n=this.notes[e].time+this.notes[e].duration;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var n=this.notes[e].ticks+this.notes[e].durationTicks;t<n&&(t=n)}return t},enumerable:!1,configurable:!0}),t.prototype.fromJSON=function(t){var e=this;for(var n in this.name=t.name,this.channel=t.channel,this.instrument=new a.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach(function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})});t.notes.forEach(function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})})},t.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map(function(t){return t.toJSON()}));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map(function(t){return t.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(t){return t.toJSON()})};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}()},2825:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createControlChanges=void 0;var r=n(74888);e.createControlChanges=function(){return new Proxy({},{get:function(t,e){return t[e]?t[e]:r.controlChangeIds.hasOwnProperty(e)?t[r.controlChangeIds[e]]:void 0},set:function(t,e,n){return r.controlChangeIds.hasOwnProperty(e)?t[r.controlChangeIds[e]]=n:t[e]=n,!0}})}},3675:t=>{"use strict";var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,n=[0,2,4,5,7,9,11];function r(t,r,s){if("string"!=typeof t)return null;var o=e.exec(t);if(!o||!r&&o[4])return null;var a={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return a.pc=a.letter+a.acc,a.step=(a.letter.charCodeAt(0)+3)%7,a.alt="b"===a.acc[0]?-a.acc.length:a.acc.length,a.chroma=n[a.step]+a.alt,o[3]&&(a.oct=+o[3],a.midi=a.chroma+12*(a.oct+1),a.freq=i(a.midi,s)),r&&(a.tonicOf=o[4]),a}function i(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var s={parse:r,regex:function(){return e},midiToFreq:i};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach(function(t){s[t]=function(e){var n=r(e);return n&&void 0!==n[t]?n[t]:null}}),t.exports=s},3717:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4338:t=>{t.exports=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},6185:(t,e,n)=>{"use strict";let r,i,s,o,a="15.1.22";var u,l,c,h=n(36897);let p=new WeakSet,d=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,T=new WeakMap,x={construct:()=>x},k=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,S=(t,e)=>{let n=[],r=t.replace(/^[\s]+/,""),i=r.match(k);for(;null!==i;){let t=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(s),i=(r=r.slice(i[0].length).replace(/^[\s]+/,"")).match(k)}return[n.join(";"),r]},A=t=>{if(void 0!==t&&!Array.isArray(t))throw TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},C=t=>{if(!(t=>{try{new new Proxy(t,x)}catch{return!1}return!0})(t))throw TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw TypeError("The given value for processorCtor should have a prototype.")},O=(t,e)=>{let n=t.get(e);if(void 0===n)throw Error("A value with the given key could not be found.");return n},E=(t,e)=>{let n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");let[r]=n;return t.delete(r),r},I=(t,e,n,r)=>{let i=O(t,e),s=E(i,t=>t[0]===n&&t[1]===r);return 0===i.size&&t.delete(e),s},M=t=>O(y,t),P=t=>{if(p.has(t))throw Error("The AudioNode is already stored.");p.add(t),M(t).forEach(t=>t(!0))},D=t=>{if(!p.has(t))throw Error("The AudioNode is not stored.");p.delete(t),M(t).forEach(t=>t(!1))},N=(t,e)=>{!("port"in t)&&e.every(t=>0===t.size)&&D(t)},R={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},j=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},V=()=>new DOMException("","IndexSizeError"),F=t=>{let e;e=t.getChannelData,t.getChannelData=n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw V();throw t}}},U={numberOfChannels:1},q=t=>p.has(t),L={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},B=t=>O(d,t),W=t=>O(m,t),z=(t,e)=>{let{activeInputs:n}=B(t);for(let r of(n.forEach(n=>n.forEach(([n])=>{e.includes(t)||z(n,[...e,t])})),"playbackRate"in t?[t.playbackRate]:"port"in t?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:"offset"in t?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t&&!("gain"in t))(t)?[t.detune,t.frequency]:"pan"in t?[t.pan]:[])){let t=W(r);void 0!==t&&t.activeInputs.forEach(([t])=>z(t,e))}q(t)&&D(t)},G=t=>{z(t.destination,[])},H=t=>"context"in t[0],X=(t,e,n,r)=>{for(let e of t)if(n(e)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Y=(t,e,[n,r],i)=>{X(t,[e,n,r],t=>t[0]===e&&t[1]===n,i)},$=(t,[e,n,r],i)=>{let s=t.get(e);void 0===s?t.set(e,new Set([[n,r]])):X(s,[n,r],t=>t[0]===n,i)},Z=(t,e,n,r)=>{if("inputs"in e){let i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},J=(t,e,n)=>{for(let r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},Q=(t,e)=>{if(!M(t).delete(e))throw Error("Missing the expected event listener.")},K=(t,e,n)=>{let r=O(t,e),i=E(r,t=>t[0]===n);return 0===r.size&&t.delete(e),i},tt=(t,e,n,r)=>{"inputs"in e?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},te=t=>O(f,t),tn=t=>O(v,t),tr=t=>b.has(t),ti=t=>!p.has(t),ts=(t,e)=>new Promise(n=>{if(null!==e)n(!0);else{let e=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),s=i.getChannelData(0);s[0]=1,s[1]=1;let o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(e).connect(t.destination),o.connect(r),o.disconnect(r),e.onaudioprocess=r=>{let i=r.inputBuffer.getChannelData(0);Array.prototype.some.call(i,t=>1===t)?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}}),to=(t,e)=>{let n=new Map;for(let e of t)for(let t of e){let e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach((t,n)=>e(n,t))},ta=t=>"context"in t,tu=(t,e,n,r,i)=>{let[s,o]=((t,e,n,r)=>{let{activeInputs:i,passiveInputs:s}=B(e),o=J(i[r],t,n);return null===o?[I(s,t,n,r)[2],!1]:[o[2],!0]})(t,n,r,i);if(null!==s&&(Q(t,s),!o||e||tr(t)||tt(te(t),te(n),r,i)),q(n)){let{activeInputs:t}=B(n);N(n,t)}},tl=(t,e,n,r)=>{let[i,s]=((t,e,n)=>{let{activeInputs:r,passiveInputs:i}=W(e),s=J(r,t,n);return null===s?[K(i,t,n)[1],!1]:[s[2],!0]})(t,n,r);null!==i&&(Q(t,i),!s||e||tr(t)||te(t).disconnect(tn(n),r))};class tc{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,r)=>t.call(e,n,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}let th={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function tp(t,e,n,r,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{let s=t.getChannelData(r);if(0===e[n].byteLength)e[n]=s.slice(i,i+128);else{let t=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}let td=(t,e,n,r,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],r,i):0!==e[n].byteLength&&t.getChannelData(r).set(e[n],i)},tf=(t,e)=>{let n=[];for(let r=0;r<t;r+=1){let t=[],i="number"==typeof e?e:e[r];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},tm=async(t,e,n,r,i,s,o)=>{let a=null===e?128*Math.ceil(t.context.length/128):e.length,u=r.channelCount*r.numberOfInputs,l=i.reduce((t,e)=>t+e,0),c=0===l?null:n.createBuffer(l,a,n.sampleRate);if(void 0===s)throw Error("Missing the processor constructor.");let h=B(t),p=await ((t,e)=>{let n=O(T,t);return O(n,te(e))})(n,t),d=tf(r.numberOfInputs,r.channelCount),f=tf(r.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let l=0;l<a;l+=128){if(r.numberOfInputs>0&&null!==e)for(let t=0;t<r.numberOfInputs;t+=1)for(let n=0;n<r.channelCount;n+=1)tp(e,d[t],n,n,l);void 0!==s.parameterDescriptors&&null!==e&&s.parameterDescriptors.forEach(({name:t},n)=>{tp(e,m,t,u+n,l)});for(let t=0;t<r.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{let t=d.map((t,e)=>0===h.activeInputs[e].size?[]:t),e=o(l/n.sampleRate,n.sampleRate,()=>p.process(t,f,m));if(null!==c)for(let t=0,e=0;t<r.numberOfOutputs;t+=1){for(let n=0;n<i[t];n+=1)td(c,f[t],n,e+n,l);e+=i[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return c},tv={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},ty={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},t_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},tb={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},tw=t=>{let{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{let i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},tT={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},tx=(t,e,n)=>{let r=e[n];if(void 0===r)throw t();return r},tk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},tS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},tA=()=>new DOMException("","InvalidStateError"),tC=()=>new DOMException("","InvalidAccessError"),tO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},tE=(t,e,n,r,i,s,o,a,u,l,c)=>{let h=l.length,p=a;for(let a=0;a<h;a+=1){let h=n[0]*l[a];for(let e=1;e<i;e+=1){let r=p-e&u-1;h+=n[e]*s[r],h-=t[e]*o[r]}for(let t=i;t<r;t+=1)h+=n[t]*s[p-t&u-1];for(let n=i;n<e;n+=1)h-=t[n]*o[p-n&u-1];s[p]=l[a],o[p]=h,p=p+1&u-1,c[a]=h}return p},tI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},tM=t=>{let e=new Uint32Array([0x46464952,40,0x45564157,0x20746d66,16,131073,44100,176400,1048580,0x61746164,4,0]);try{let n=t.decodeAudioData(e.buffer,()=>{});if(void 0===n)return!1;return n.catch(()=>{}),!0}catch{}return!1},tP=(t,e,n)=>{let r=e[n];void 0!==r&&r!==t[n]&&(t[n]=r)},tD=(t,e)=>{tP(t,e,"channelCount"),tP(t,e,"channelCountMode"),tP(t,e,"channelInterpretation")},tN=t=>"function"==typeof t.getFloatTimeDomainData,tR=(t,e,n)=>{let r=e[n];void 0!==r&&r!==t[n].value&&(t[n].value=r)},tj=t=>{let e;e=t.start,t.start=(n=0,r=0,i)=>{if("number"==typeof i&&i<0||r<0||n<0)throw RangeError("The parameters can't be negative.");e.call(t,n,r,i)}},tV=t=>{let e;e=t.stop,t.stop=(n=0)=>{if(n<0)throw RangeError("The parameter can't be negative.");e.call(t,n)}},tF=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),tU=async(t,e)=>new t(await new Promise((t,n)=>{let{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:e})=>{r.close(),i.close(),t(e)},r.onmessageerror=({data:t})=>{r.close(),i.close(),n(t)},i.postMessage(e)})),tq=(t,e)=>{let n=t.createBiquadFilter();return tD(n,e),tR(n,e,"Q"),tR(n,e,"detune"),tR(n,e,"frequency"),tR(n,e,"gain"),tP(n,e,"type"),n},tL=(t,e)=>{let n=t.createChannelSplitter(e.numberOfOutputs);return tD(n,e),(t=>{let e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw tA()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw tA()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw tA()}})})(n),n},tB=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),tW=(t,e)=>{let n=t.createDelay(e.maxDelayTime);return tD(n,e),tR(n,e,"delayTime"),n},tz=(t,e)=>{let n=t.createGain();return tD(n,e),tR(n,e,"gain"),n};function tG(t,e){let n=[0,0];for(let i=t.length-1;i>=0;i-=1){var r;n=[(r=n)[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]],n[0]+=t[i]}return n}let tH=(t,e,n,r)=>t.createScriptProcessor(e,n,r),tX=()=>new DOMException("","NotSupportedError"),tY={numberOfChannels:1},t$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},tZ={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},tJ={disableNormalization:!1},tQ={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},tK=()=>new DOMException("","UnknownError"),t0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},t1=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),t2=t=>{if(null===t)return!1;let e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},t8=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);let{get:s,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(s),set:r(o)})},t3=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(9!==r.code)throw r;t3(t,e,n+1e-7)}},t4=t=>{let e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},t6=t=>{let e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},t5=t=>{let e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},t7=(t,e)=>{let n,r=e.createGain();t.connect(r);let i=(n=t.disconnect,()=>{n.call(t,r),t.removeEventListener("ended",i)});t.addEventListener("ended",i),tB(t,r),t.stop=(e=>{let n=!1;return (i=0)=>{if(n)try{e.call(t,i)}catch{r.gain.setValueAtTime(0,i)}else e.call(t,i),n=!0}})(t.stop)},t9=(t,e)=>n=>{let r={value:t};return(Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof e)?e.call(t,n):e.handleEvent.call(t,n)},et=(t,e,[n,r,i],s)=>{X(t[r],[e,n,i],t=>t[0]===e&&t[1]===n,s)},ee=(t,e,[n,r,i],s)=>{let o=t.get(n);void 0===o?t.set(n,new Set([[r,e,i]])):X(o,[r,e,i],t=>t[0]===r&&t[1]===e,s)},en=(t,e,n,r)=>E(t[r],t=>t[0]===e&&t[1]===n),er=new WeakMap,ei=t=>{var e;return null!=(e=er.get(t))?e:0},es=((t,e)=>(n,r)=>{let i=e.get(n);if(void 0!==i)return i;let s=t.get(n);if(void 0!==s)return s;try{let i=r();if(i instanceof Promise)return t.set(n,i),i.catch(()=>!1).then(r=>(t.delete(n),e.set(n,r),r));return e.set(n,i),i}catch{return e.set(n,!1),!1}})(new Map,new WeakMap),eo="undefined"==typeof window?null:window,ea=(t,e)=>{let n=t.createAnalyser();if(tD(n,e),!(e.maxDecibels>e.minDecibels))throw V();return tP(n,e,"fftSize"),tP(n,e,"maxDecibels"),tP(n,e,"minDecibels"),tP(n,e,"smoothingTimeConstant"),es(tN,()=>tN(n))||(t=>{t.getFloatTimeDomainData=e=>{let n=new Uint8Array(e.length);t.getByteTimeDomainData(n);let r=Math.max(n.length,t.fftSize);for(let t=0;t<r;t+=1)e[t]=(n[t]-128)*.0078125;return e}})(n),n},eu=t=>{let e=B(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},el=((t,e,n)=>async(r,i,s)=>{let o=t(r);await Promise.all(o.activeInputs.map((t,o)=>Array.from(t).map(async([t,a])=>{let u=e(t),l=await u.render(t,i),c=r.context.destination;n(t)||r===c&&n(r)||l.connect(s,a,o)})).reduce((t,e)=>[...t,...e],[]))})(B,eu,tr),ec=()=>{let t=new WeakMap,e=async(e,n)=>{let r=te(e);return r.context!==n&&(r=ea(n,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,fftSize:r.fftSize,maxDecibels:r.maxDecibels,minDecibels:r.minDecibels,smoothingTimeConstant:r.smoothingTimeConstant})),t.set(n,r),await el(e,n,r),r};return{render(n,r){let i=t.get(r);return void 0!==i?Promise.resolve(i):e(n,r)}}},eh=t=>{let e=g.get(t);if(void 0===e)throw tA();return e},ep=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(eo),ed=(t=>e=>null!==t&&e instanceof t)(ep),ef=new WeakMap,em=class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){if(null!==e){let r=this._listeners.get(e);void 0===r&&(r=t9(this,e),"function"==typeof e&&this._listeners.set(e,r)),this._nativeEventTarget.addEventListener(t,r,n)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){let r=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===r?null:r,n)}},ev=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(eo),eg=(t=>e=>null!==t&&e instanceof t)(ev),ey=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(eo),e_=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(eo),eb=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(eo),ew=((t,e,n,r,i,s,o,a,u,l,c,h,p,d,m,v)=>class extends l{constructor(e,r,i,s){super(i),this._context=e,this._nativeAudioNode=i;let o=c(e);h(o)&&!0!==n(ts,()=>ts(o,v))&&(t=>{let e,n=new Map;t.connect=(t=>(e,r=0,i=0)=>{let s=ta(e)?t(e,r,i):t(e,r),o=n.get(e);return void 0===o?n.set(e,[{input:i,output:r}]):o.every(t=>t.input!==i||t.output!==r)&&o.push({input:i,output:r}),s})(t.connect.bind(t)),e=t.disconnect,t.disconnect=(r,i,s)=>{if(e.apply(t),void 0===r)n.clear();else if("number"==typeof r)for(let[t,e]of n){let i=e.filter(t=>t.output!==r);0===i.length?n.delete(t):n.set(t,i)}else if(n.has(r))if(void 0===i)n.delete(r);else{let t=n.get(r);if(void 0!==t){let e=t.filter(t=>t.output!==i&&(t.input!==s||void 0===s));0===e.length?n.delete(r):n.set(r,e)}}for(let[e,r]of n)r.forEach(n=>{ta(e)?t.connect(e,n.output,n.input):t.connect(e,n.output)})}})(i),f.set(this,i),y.set(this,new Set),"closed"!==e.state&&r&&P(this),t(this,s,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();let l=m(c(this._context));if(p(t)||d(t))throw s();if("context"in t){let i=te(t);try{let e=Z(this._nativeAudioNode,i,n,a),r=ti(this);(l||r)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!r&&ti(t)&&P(t)}catch(t){if(12===t.code)throw s();throw t}return e(this,t,n,a,l)&&to(u([this],t),r(l)),t}let h=tn(t);if("playbackRate"===h.name&&1024===h.maxValue)throw o();try{this._nativeAudioNode.connect(h,n),(l||ti(this))&&this._nativeAudioNode.disconnect(h,n)}catch(t){if(12===t.code)throw s();throw t}((t,e,n,r)=>{let{activeInputs:i,passiveInputs:s}=W(e),{outputs:o}=B(t),a=M(t),u=o=>{let a=te(t),u=tn(e);if(o){let e=K(s,t,n);Y(i,t,e,!1),r||tr(t)||a.connect(u,n)}else $(s,E(i,e=>e[0]===t&&e[1]===n),!1),r||tr(t)||a.disconnect(u,n)};return!!X(o,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(a.add(u),q(t)?Y(i,t,[n,u],!0):$(s,[t,n,u],!0),!0)})(this,t,n,l)&&to(u([this],t),r(l))}disconnect(t,e,n){let r,o=m(c(this._context));if(void 0===t)r=((t,e)=>{let n=B(t),r=[];for(let i of n.outputs)H(i)?tu(t,e,...i):tl(t,e,...i),r.push(i[0]);return n.outputs.clear(),r})(this,o);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();r=((t,e,n)=>{let r=B(t),i=[];for(let s of r.outputs)s[1]===n&&(H(s)?tu(t,e,...s):tl(t,e,...s),i.push(s[0]),r.outputs.delete(s));return i})(this,o,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs)||"context"in t&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(0===(r=((t,e,n,r,i)=>{let s=B(t);return Array.from(s.outputs).filter(t=>t[0]===n&&(void 0===r||t[1]===r)&&(void 0===i||t[2]===i)).map(n=>(H(n)?tu(t,e,...n):tl(t,e,...n),s.outputs.delete(n),n[0]))})(this,o,t,e,n)).length)throw s()}for(let t of r)to(u([this],t),a)}})((t,e,n)=>{let r=[];for(let t=0;t<n.numberOfInputs;t+=1)r.push(new Set);d.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},((t,e,n,r,i,s,o,a,u,l,c,h,p)=>{let d=new WeakMap;return(f,m,v,g,y)=>{let{activeInputs:b,passiveInputs:w}=s(m),{outputs:T}=s(f),x=a(f),k=s=>{let a=u(m),l=u(f);if(s){let e=I(w,f,v,g);t(b,f,e,!1),y||h(f)||n(l,a,v,g),p(m)&&P(m)}else{let t=r(b,f,v,g);e(w,g,t,!1),y||h(f)||i(l,a,v,g);let n=o(m);if(0===n)c(m)&&N(m,b);else{let t=d.get(m);void 0!==t&&clearTimeout(t),d.set(m,setTimeout(()=>{c(m)&&N(m,b)},1e3*n))}}};return!!l(T,[m,v,g],t=>t[0]===m&&t[1]===v&&t[2]===g,!0)&&(x.add(k),c(f)?t(b,f,[v,g,k],!0):e(w,g,[f,v,k],!0),!0)}})(et,ee,Z,en,tt,B,ei,M,te,X,q,tr,ti),es,((t,e,n,r,i,s)=>o=>(a,u)=>{let l=t.get(a);if(void 0===l){if(!o&&s(a)){let t=r(a),{outputs:s}=n(a);for(let n of s)if(H(n))e(t,r(n[0]),n[1],n[2]);else{let e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,u)}else t.set(a,l+u)})(b,tt,B,te,tn,q),V,tC,tX,((t,e,n,r,i,s,o,a)=>(u,l)=>{let c=e.get(u);if(void 0===c)throw Error("Missing the expected cycle count.");let h=a(s(u.context));if(c===l){if(e.delete(u),!h&&o(u)){let e=r(u),{outputs:s}=n(u);for(let n of s)if(H(n))t(e,r(n[0]),n[1],n[2]);else{let t=i(n[0]);e.connect(t,n[1])}}}else e.set(u,c-l)})(Z,b,B,te,tn,eh,q,ed),function t(e,n){let r="context"in n?n:O(ef,n);if("delayTime"in r)return[];if(e[0]===r)return[e];if(e.includes(r))return[];let{outputs:i}=B(r);return Array.from(i).map(n=>t([...e,r],n[0])).reduce((t,e)=>t.concat(e),[])},em,eh,eg,ey,e_,ed,eb),eT=((t,e,n,r,i,s)=>class extends t{constructor(t,n){let o=i(t),a=r(o,{...R,...n});super(t,!1,a,s(o)?e():null),this._nativeAnalyserNode=a}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){let e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){let e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(ew,ec,V,ea,eh,ed),ex=new WeakSet,ek=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(eo),eS=(t=>e=>(t[0]=e,t[0]))(new Uint32Array(1)),eA=((t,e)=>n=>{n.copyFromChannel=(r,i,s=0)=>{let o=t(s),a=t(i);if(a>=n.numberOfChannels)throw e();let u=n.length,l=n.getChannelData(a),c=r.length;for(let t=o<0?-o:0;t+o<u&&t<c;t+=1)r[t]=l[t+o]},n.copyToChannel=(r,i,s=0)=>{let o=t(s),a=t(i);if(a>=n.numberOfChannels)throw e();let u=n.length,l=n.getChannelData(a),c=r.length;for(let t=o<0?-o:0;t+o<u&&t<c;t+=1)l[t+o]=r[t]}})(eS,V),eC=(t=>e=>{let n,r;n=e.copyFromChannel,e.copyFromChannel=(r,i,s=0)=>{let o=t(s),a=t(i);if(o<e.length)return n.call(e,r,a,o)},r=e.copyToChannel,e.copyToChannel=(n,i,s=0)=>{let o=t(s),a=t(i);if(o<e.length)return r.call(e,n,a,o)}})(eS),eO=((t,e,n,r,i,s,o,a)=>{let u=null;return class l{constructor(l){if(null===i)throw Error("Missing the native OfflineAudioContext constructor.");let{length:c,numberOfChannels:h,sampleRate:p}={...U,...l};null===u&&(u=new i(1,1,44100));let d=null!==r&&e(s,s)?new r({length:c,numberOfChannels:h,sampleRate:p}):u.createBuffer(h,c,p);if(0===d.numberOfChannels)throw n();return"function"!=typeof d.copyFromChannel?(o(d),F(d)):e(j,()=>j(d))||a(d),t.add(d),d}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===l.prototype||t.has(e)}}})(ex,es,tX,ek,ep,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(ek),eA,eC),eE=(t,e)=>{let n=tz(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);let r=()=>{e.removeEventListener("ended",r),e.disconnect(n),n.disconnect()};e.addEventListener("ended",r)},eI=async(t,e,n)=>{let r=W(t);await Promise.all(Array.from(r.activeInputs).map(async([t,r])=>{let i=eu(t),s=await i.render(t,e);tr(t)||s.connect(n,r)}))},eM=(t,e,n)=>eI(e,t,n),eP=((t,e,n,r,i,s,o,a,u,l,c)=>(h,p)=>{let d=h.createBufferSource();return tD(d,p),tR(d,p,"playbackRate"),tP(d,p,"buffer"),tP(d,p,"loop"),tP(d,p,"loopEnd"),tP(d,p,"loopStart"),e(n,()=>n(h))||(t=>{t.start=(e=>{let n=!1;return(r=0,i=0,s)=>{if(n)throw tA();e.call(t,r,i,s),n=!0}})(t.start)})(d),e(r,()=>r(h))||u(d),e(i,()=>i(h))||l(d,h),e(s,()=>s(h))||tj(d),e(o,()=>o(h))||c(d,h),e(a,()=>a(h))||tV(d),t(h,d),d})(eE,es,t=>{let e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},t=>{let e=t.createBufferSource();e.buffer=t.createBuffer(1,1,44100);try{e.start(0,1)}catch{return!1}return!0},t=>{let e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},t4,t6,t5,t=>{t.start=(e=>(n=0,r=0,i)=>{let s=t.buffer,o=null===s?r:Math.min(s.duration,r);null!==s&&o>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})(t.start)},(t,e)=>{let n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),t8(t,"buffer",e=>()=>{let r=e.call(t);return r===n?null:r},e=>r=>e.call(t,null===r?n:r))},t7),eD=(r=t=>{let e=W(t);if(null===e.renderer)throw Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},(t,e,n)=>(r(e).replay(n),eI(e,t,n))),eN=()=>{let t=new WeakMap,e=null,n=null,r=async(r,i)=>{let s=te(r),o=s.context===i;return o||(s=eP(i,{buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,loop:s.loop,loopEnd:s.loopEnd,loopStart:s.loopStart,playbackRate:s.playbackRate.value}),null!==e&&s.start(...e),null!==n&&s.stop(n)),t.set(i,s),o?await eM(i,r.playbackRate,s.playbackRate):await eD(i,r.playbackRate,s.playbackRate),await el(r,i,s),s};return{set start(value){e=value},set stop(value){n=value},render(e,n){let i=t.get(n);return void 0!==i?Promise.resolve(i):r(e,n)}}},eR=((t,e,n,r,i,s,o,a,u,l,c,p,d)=>(f,m,v,g=null,y=null)=>{let b=v.value,w=new h.AutomationEventList(b),T=m?r(w):null,x={get defaultValue(){return b},get maxValue(){return null===g?v.maxValue:g},get minValue(){return null===y?v.minValue:y},get value(){return v.value},set value(value){v.value=value,x.setValueAtTime(value,f.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof v.cancelAndHoldAtTime)null===T&&w.flush(f.context.currentTime),w.add(i(t)),v.cancelAndHoldAtTime(t);else{let e=Array.from(w).pop();null===T&&w.flush(f.context.currentTime),w.add(i(t));let n=Array.from(w).pop();v.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?v.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?v.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?v.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&v.setValueCurveAtTime(n.values,n.startTime,n.duration))}return x},cancelScheduledValues:t=>(null===T&&w.flush(f.context.currentTime),w.add(s(t)),v.cancelScheduledValues(t),x),exponentialRampToValueAtTime(t,e){if(0===t||!Number.isFinite(e)||e<0)throw RangeError();let n=f.context.currentTime;return null===T&&w.flush(n),0===Array.from(w).length&&(w.add(l(b,n)),v.setValueAtTime(b,n)),w.add(o(t,e)),v.exponentialRampToValueAtTime(t,e),x},linearRampToValueAtTime(t,e){let n=f.context.currentTime;return null===T&&w.flush(n),0===Array.from(w).length&&(w.add(l(b,n)),v.setValueAtTime(b,n)),w.add(a(t,e)),v.linearRampToValueAtTime(t,e),x},setTargetAtTime:(t,e,n)=>(null===T&&w.flush(f.context.currentTime),w.add(u(t,e,n)),v.setTargetAtTime(t,e,n),x),setValueAtTime:(t,e)=>(null===T&&w.flush(f.context.currentTime),w.add(l(t,e)),v.setValueAtTime(t,e),x),setValueCurveAtTime(t,e,n){let r=t instanceof Float32Array?t:new Float32Array(t);if(null!==p&&"webkitAudioContext"===p.name){let t=e+n,i=f.context.sampleRate,s=Math.ceil(e*i),o=Math.floor(t*i),a=o-s,u=new Float32Array(a);for(let t=0;t<a;t+=1){let o=(r.length-1)/n*((s+t)/i-e),a=Math.floor(o),l=Math.ceil(o);u[t]=a===l?r[a]:(1-(o-a))*r[a]+(1-(l-o))*r[l]}null===T&&w.flush(f.context.currentTime),w.add(c(u,e,n)),v.setValueCurveAtTime(u,e,n);let l=o/i;l<t&&d(x,u[u.length-1],l),d(x,r[r.length-1],t)}else null===T&&w.flush(f.context.currentTime),w.add(c(r,e,n)),v.setValueCurveAtTime(r,e,n);return x}};return n.set(x,v),e.set(x,f),t(x,T),x})((t,e)=>{m.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},ef,v,t=>({replay(e){for(let n of t)if("exponentialRampToValue"===n.type){let{endTime:t,value:r}=n;e.exponentialRampToValueAtTime(r,t)}else if("linearRampToValue"===n.type){let{endTime:t,value:r}=n;e.linearRampToValueAtTime(r,t)}else if("setTarget"===n.type){let{startTime:t,target:r,timeConstant:i}=n;e.setTargetAtTime(r,t,i)}else if("setValue"===n.type){let{startTime:t,value:r}=n;e.setValueAtTime(r,t)}else if("setValueCurve"===n.type){let{duration:t,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,t)}else throw Error("Can't apply an unknown automation.")}}),h.createCancelAndHoldAutomationEvent,h.createCancelScheduledValuesAutomationEvent,h.createExponentialRampToValueAutomationEvent,h.createLinearRampToValueAutomationEvent,h.createSetTargetAutomationEvent,h.createSetValueAutomationEvent,h.createSetValueCurveAutomationEvent,ev,t3),ej=((t,e,n,r,i,s,o,a)=>class extends t{constructor(t,r){let a=s(t),u={...L,...r},l=i(a,u),c=o(a),h=c?e():null;super(t,!1,l,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==u.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,c,l.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){let e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;let n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){P(this);let t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),q(this)&&D(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(ew,eN,eR,tA,eP,eh,ed,t9),eV=((t,e,n,r,i,s,o,a)=>class extends t{constructor(t,n){let r=s(t),u=o(r),l=i(r,n,u);super(t,!1,l,u?e(a):null),this._isNodeOfNativeOfflineAudioContext=u,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(ew,t=>{let e=new WeakMap,n=async(n,r)=>{let i=r.destination;return e.set(r,i),await t(n,r,i),i};return{render(t,r){let i=e.get(r);return void 0!==i?Promise.resolve(i):n(t,r)}}},V,tA,((t,e)=>(n,r,i)=>{let s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&"explicit"!==s.channelCountMode&&(s.channelCountMode="explicit"),0===s.maxChannelCount&&Object.defineProperty(s,"maxChannelCount",{value:r});let o=t(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",t=>()=>t.call(o),t=>e=>{t.call(o,e);try{s.channelCount=e}catch(t){if(e>s.maxChannelCount)throw t}}),e(o,"channelCountMode",t=>()=>t.call(o),t=>e=>{t.call(o,e),s.channelCountMode=e}),e(o,"channelInterpretation",t=>()=>t.call(o),t=>e=>{t.call(o,e),s.channelInterpretation=e}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o})(tz,t8),eh,ed,el),eF=((t,e,n,r,i)=>()=>{let s=new WeakMap,o=async(o,a)=>{let u=n(o),l=u.context===a;return l||(u=e(a,{Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type})),s.set(a,u),l?(await t(a,o.Q,u.Q),await t(a,o.detune,u.detune),await t(a,o.frequency,u.frequency),await t(a,o.gain,u.gain)):(await r(a,o.Q,u.Q),await r(a,o.detune,u.detune),await r(a,o.frequency,u.frequency),await r(a,o.gain,u.gain)),await i(o,a,u),u};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(eM,tq,te,eD,el),eU=(t,e)=>er.set(t,e),eq=((t,e,n,r,i,s,o,a)=>class extends t{constructor(t,r){let u=s(t),l=i(u,{...tv,...r}),c=o(u);super(t,!1,l,c?n():null),this._Q=e(this,c,l.Q,34028234663852886e22,-34028234663852886e22),this._detune=e(this,c,l.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),this._frequency=e(this,c,l.frequency,t.sampleRate/2,0),this._gain=e(this,c,l.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=l,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw r();throw t}if(t.length!==e.length||e.length!==n.length)throw r()}})(ew,eR,eF,tC,tq,eh,ed,eU),eL=((t,e)=>(n,r,i)=>{let s=new Set;return n.connect=(i=>(o,a=0,u=0)=>{let l=0===s.size;if(e(o))return i.call(n,o,a,u),t(s,[o,a,u],t=>t[0]===o&&t[1]===a&&t[2]===u,!0),l&&r(),o;i.call(n,o,a),t(s,[o,a],t=>t[0]===o&&t[1]===a,!0),l&&r()})(n.connect),n.disconnect=(t=>(r,o,a)=>{let u=s.size>0;if(void 0===r)t.apply(n),s.clear();else if("number"==typeof r)for(let e of(t.call(n,r),s))e[1]===r&&s.delete(e);else for(let i of(e(r)?t.call(n,r,o,a):t.call(n,r,o),s))i[0]===r&&(void 0===o||i[1]===o)&&(void 0===a||i[2]===a)&&s.delete(i);let l=0===s.size;u&&l&&i()})(n.disconnect),n})(X,ey),eB=((t,e)=>(n,r)=>{let i=n.createChannelMerger(r.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),tD(i,r),i})(ev,((t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});let i=n.createBufferSource();e(r,()=>{let t=r.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(r,0,e)},()=>i.disconnect(r))})(tA,eL)),eW=((t,e,n,r,i)=>class extends t{constructor(t,s){let o=r(t);super(t,!1,n(o,{...tg,...s}),i(o)?e():null)}})(ew,()=>{let t=new WeakMap,e=async(e,n)=>{let r=te(e);return r.context!==n&&(r=eB(n,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,numberOfInputs:r.numberOfInputs})),t.set(n,r),await el(e,n,r),r};return{render(n,r){let i=t.get(r);return void 0!==i?Promise.resolve(i):e(n,r)}}},eB,eh,ed),ez=((t,e,n,r,i,s)=>class extends t{constructor(t,o){let a=r(t);super(t,!1,n(a,s({...ty,...o})),i(a)?e():null)}})(ew,()=>{let t=new WeakMap,e=async(e,n)=>{let r=te(e);return r.context!==n&&(r=tL(n,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,numberOfOutputs:r.numberOfOutputs})),t.set(n,r),await el(e,n,r),r};return{render(n,r){let i=t.get(r);return void 0!==i?Promise.resolve(i):e(n,r)}}},tL,eh,ed,t=>({...t,channelCount:t.numberOfOutputs})),eG=(t,{offset:e,...n})=>{let r=t.createBuffer(1,2,44100),i=eP(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=tz(t,{...n,gain:e}),o=r.getChannelData(0);return o[0]=1,o[1]=1,i.buffer=r,i.loop=!0,eE(t,i),eL(tB({get bufferSize(){return},get channelCount(){return s.channelCount},set channelCount(value){s.channelCount=value},get channelCountMode(){return s.channelCountMode},set channelCountMode(value){s.channelCountMode=value},get channelInterpretation(){return s.channelInterpretation},set channelInterpretation(value){s.channelInterpretation=value},get context(){return s.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return s.numberOfOutputs},get offset(){return s.gain},get onended(){return i.onended},set onended(value){i.onended=value},addEventListener:(...t)=>i.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>i.dispatchEvent(t[0]),removeEventListener:(...t)=>i.removeEventListener(t[0],t[1],t[2]),start(t=0){i.start.call(i,t)},stop(t=0){i.stop.call(i,t)}},s),()=>i.connect(s),()=>i.disconnect(s))},eH=((t,e,n,r,i)=>(s,o)=>{if(void 0===s.createConstantSource)return n(s,o);let a=s.createConstantSource();return tD(a,o),tR(a,o,"offset"),e(r,()=>r(s))||tj(a),e(i,()=>i(s))||tV(a),t(s,a),a})(eE,es,eG,t4,t5),eX=((t,e,n,r,i,s,o)=>class extends t{constructor(t,o){let a=i(t),u=r(a,{...t_,...o}),l=s(a),c=l?n():null;super(t,!1,u,c),this._constantSourceNodeRenderer=c,this._nativeConstantSourceNode=u,this._offset=e(this,l,u.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;let n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){P(this);let t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),q(this)&&D(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(ew,eR,()=>{let t=new WeakMap,e=null,n=null,r=async(r,i)=>{let s=te(r),o=s.context===i;return o||(s=eH(i,{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,offset:s.offset.value}),null!==e&&s.start(e),null!==n&&s.stop(n)),t.set(i,s),o?await eM(i,r.offset,s.offset):await eD(i,r.offset,s.offset),await el(r,i,s),s};return{set start(value){e=value},set stop(value){n=value},render(e,n){let i=t.get(n);return void 0!==i?Promise.resolve(i):r(e,n)}}},eH,eh,ed,t9),eY=((t,e)=>(n,r)=>{let i=n.createConvolver();if(tD(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),tP(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",t=>()=>t.call(i),e=>n=>{if(n>2)throw t();return e.call(i,n)}),"max"===r.channelCountMode))throw t();return e(i,"channelCountMode",t=>()=>t.call(i),e=>n=>{if("max"===n)throw t();return e.call(i,n)}),i})(tX,t8),e$=((t,e,n,r,i,s)=>class extends t{constructor(t,o){let a=r(t),u={...tb,...o},l=n(a,u);super(t,!1,l,i(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=l,null!==u.buffer&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){let t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(ew,((t,e,n)=>()=>{let r=new WeakMap,i=async(i,s)=>{let o=e(i);return o.context!==s&&(o=t(s,{buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize})),r.set(s,o),"inputs"in o?await n(i,s,o.inputs[0]):await n(i,s,o),o};return{render(t,e){let n=r.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}})(eY,te,el),eY,eh,ed,eU),eZ=((t,e,n,r,i,s,o)=>class extends t{constructor(t,a){let u=i(t),l={...tT,...a},c=r(u,l),h=s(u);super(t,!1,c,h?n(l.maxDelayTime):null),this._delayTime=e(this,h,c.delayTime),o(this,l.maxDelayTime)}get delayTime(){return this._delayTime}})(ew,eR,t=>{let e=new WeakMap,n=async(n,r)=>{let i=te(n),s=i.context===r;return s||(i=tW(r,{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,delayTime:i.delayTime.value,maxDelayTime:t})),e.set(r,i),s?await eM(r,n.delayTime,i.delayTime):await eD(r,n.delayTime,i.delayTime),await el(n,r,i),i};return{render(t,r){let i=e.get(r);return void 0!==i?Promise.resolve(i):n(t,r)}}},tW,eh,ed,eU),eJ=(o=tX,(t,e)=>{let n=t.createDynamicsCompressor();if(tD(n,e),e.channelCount>2||"max"===e.channelCountMode)throw o();return tR(n,e,"attack"),tR(n,e,"knee"),tR(n,e,"ratio"),tR(n,e,"release"),tR(n,e,"threshold"),n}),eQ=((t,e,n,r,i,s,o,a)=>class extends t{constructor(t,i){let u=s(t),l=r(u,{...tk,...i}),c=o(u);super(t,!1,l,c?n():null),this._attack=e(this,c,l.attack),this._knee=e(this,c,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=e(this,c,l.ratio),this._release=e(this,c,l.release),this._threshold=e(this,c,l.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){let e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){let e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(ew,eR,((t,e,n,r,i)=>()=>{let s=new WeakMap,o=async(o,a)=>{let u=n(o),l=u.context===a;return l||(u=e(a,{attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value})),s.set(a,u),l?(await t(a,o.attack,u.attack),await t(a,o.knee,u.knee),await t(a,o.ratio,u.ratio),await t(a,o.release,u.release),await t(a,o.threshold,u.threshold)):(await r(a,o.attack,u.attack),await r(a,o.knee,u.knee),await r(a,o.ratio,u.ratio),await r(a,o.release,u.release),await r(a,o.threshold,u.threshold)),await i(o,a,u),u};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(eM,eJ,te,eD,el),eJ,tX,eh,ed,eU),eK=((t,e,n,r,i,s)=>class extends t{constructor(t,o){let a=i(t),u=r(a,{...tS,...o}),l=s(a);super(t,!1,u,l?n():null),this._gain=e(this,l,u.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}})(ew,eR,()=>{let t=new WeakMap,e=async(e,n)=>{let r=te(e),i=r.context===n;return i||(r=tz(n,{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:r.gain.value})),t.set(n,r),i?await eM(n,e.gain,r.gain):await eD(n,e.gain,r.gain),await el(e,n,r),r};return{render(n,r){let i=t.get(r);return void 0!==i?Promise.resolve(i):e(n,r)}}},tz,eh,ed),e0=((t,e,n,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:u,feedback:l,feedforward:c})=>{let h=tF(s,i.sampleRate),p=l instanceof Float64Array?l:new Float64Array(l),d=c instanceof Float64Array?c:new Float64Array(c),f=p.length,m=d.length,v=Math.min(f,m);if(0===f||f>20)throw r();if(0===p[0])throw e();if(0===m||m>20)throw r();if(0===d[0])throw e();if(1!==p[0]){for(let t=0;t<m;t+=1)d[t]/=p[0];for(let t=1;t<f;t+=1)p[t]/=p[0]}let g=n(i,h,o,o);g.channelCount=o,g.channelCountMode=a,g.channelInterpretation=u;let y=[],b=[],w=[];for(let t=0;t<o;t+=1){y.push(0);let t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),b.push(t),w.push(e)}g.onaudioprocess=t=>{let e=t.inputBuffer,n=t.outputBuffer,r=e.numberOfChannels;for(let t=0;t<r;t+=1){let r=e.getChannelData(t),i=n.getChannelData(t);y[t]=tE(p,f,d,m,v,b[t],w[t],y[t],32,r,i)}};let T=i.sampleRate/2;return tB({get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(value){g.channelCount=value},get channelCountMode(){return g.channelCountMode},set channelCountMode(value){g.channelCountMode=value},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(value){g.channelInterpretation=value},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...t)=>g.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>g.dispatchEvent(t[0]),getFrequencyResponse(e,n,r){if(e.length!==n.length||n.length!==r.length)throw t();let i=e.length;for(let t=0;t<i;t+=1){let i=-Math.PI*(e[t]/T),s=[Math.cos(i),Math.sin(i)],o=function(t,e){let n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(tG(d,s),tG(p,s));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),r[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>g.removeEventListener(t[0],t[1],t[2])},g)})(tC,tA,tH,tX),e1=((t,e,n,r)=>i=>t(tM,()=>tM(i))?Promise.resolve(t(r,r)).then(t=>{if(!t){let t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()}):new Promise(t=>{let n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()}))(es,tz,tH,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);let n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{r.disconnect(),t(0!==n.currentTime)},n.startRendering()})})(tz,ep)),e2=((t,e,n,r,i,s)=>class extends t{constructor(t,o){let a=r(t),u=i(a),l={...tO,...o},c=e(a,u?null:t.baseLatency,l);super(t,!1,c,u?n(l.feedback,l.feedforward):null),(t=>{let e;e=t.getFrequencyResponse,t.getFrequencyResponse=(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw tC();return e.call(t,n,r,i)}})(c),this._nativeIIRFilterNode=c,s(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(ew,(t,e,n)=>{if(void 0===t.createIIRFilter)return e0(t,e,n);let r=t.createIIRFilter(n.feedforward,n.feedback);return tD(r,n),r},((t,e,n,r,i)=>(s,o)=>{let a=new WeakMap,u=null,l=async(l,c)=>{let h=null,p=e(l),d=p.context===c;if(void 0===c.createIIRFilter?h=t(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=c.createIIRFilter(o,s)),a.set(c,null===h?p:h),null!==h){if(null===u){if(null===n)throw Error("Missing the native OfflineAudioContext constructor.");let t=new n(l.context.destination.channelCount,l.context.length,c.sampleRate);u=(async()=>(await r(l,t,t.destination),((t,e,n,r)=>{let i=n instanceof Float64Array?n:new Float64Array(n),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,u=Math.min(o,a);if(1!==i[0]){for(let t=0;t<o;t+=1)s[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}let l=new Float32Array(32),c=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let e=0;e<p;e+=1){let n=t.getChannelData(e),r=h.getChannelData(e);l.fill(0),c.fill(0),tE(i,o,s,a,u,l,c,0,32,n,r)}return h})(await i(t),c,s,o)))()}let t=await u;return h.buffer=t,h.start(0),h}return await r(l,c,p),p};return{render(t,e){let n=a.get(e);return void 0!==n?Promise.resolve(n):l(t,e)}}})(eP,te,ep,el,e1),eh,ed,eU),e8=((t,e,n,r,i,s,o,a)=>(u,l)=>{let c=l.listener,{forwardX:h,forwardY:p,forwardZ:d,positionX:f,positionY:m,positionZ:v,upX:g,upY:y,upZ:b}=void 0===c.forwardX?(()=>{let h=new Float32Array(1),p=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),d=o(l),f=!1,m=[0,0,-1,0,1,0],v=[0,0,0],g=()=>{if(f)return;f=!0;let t=r(l,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{let e=[s(t,h,0),s(t,h,1),s(t,h,2),s(t,h,3),s(t,h,4),s(t,h,5)];e.some((t,e)=>t!==m[e])&&(c.setOrientation(...e),m=e);let n=[s(t,h,6),s(t,h,7),s(t,h,8)];n.some((t,e)=>t!==v[e])&&(c.setPosition(...n),v=n)},p.connect(t)},y=t=>e=>{e!==m[t]&&(m[t]=e,c.setOrientation(...m))},b=t=>e=>{e!==v[t]&&(v[t]=e,c.setPosition(...v))},w=(e,r,s)=>{var o,c,h,f,m,v,y;let b=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});b.connect(p,0,e),b.start(),Object.defineProperty(b.offset,"defaultValue",{get:()=>r});let w=t({context:u},d,b.offset,34028234663852886e22,-34028234663852886e22);return a(w,"value",t=>()=>t.call(w),t=>e=>{try{t.call(w,e)}catch(t){if(9!==t.code)throw t}g(),d&&s(e)}),o=w.cancelAndHoldAtTime,w.cancelAndHoldAtTime=d?()=>{throw i()}:(...t)=>{let e=o.apply(w,t);return g(),e},c=w.cancelScheduledValues,w.cancelScheduledValues=d?()=>{throw i()}:(...t)=>{let e=c.apply(w,t);return g(),e},h=w.exponentialRampToValueAtTime,w.exponentialRampToValueAtTime=d?()=>{throw i()}:(...t)=>{let e=h.apply(w,t);return g(),e},f=w.linearRampToValueAtTime,w.linearRampToValueAtTime=d?()=>{throw i()}:(...t)=>{let e=f.apply(w,t);return g(),e},m=w.setTargetAtTime,w.setTargetAtTime=d?()=>{throw i()}:(...t)=>{let e=m.apply(w,t);return g(),e},v=w.setValueAtTime,w.setValueAtTime=d?()=>{throw i()}:(...t)=>{let e=v.apply(w,t);return g(),e},y=w.setValueCurveAtTime,w.setValueCurveAtTime=d?()=>{throw i()}:(...t)=>{let e=y.apply(w,t);return g(),e},w};return{forwardX:w(0,0,y(0)),forwardY:w(1,0,y(1)),forwardZ:w(2,-1,y(2)),positionX:w(6,0,b(0)),positionY:w(7,0,b(1)),positionZ:w(8,0,b(2)),upX:w(3,0,y(3)),upY:w(4,1,y(4)),upZ:w(5,0,y(5))}})():c;return{get forwardX(){return h},get forwardY(){return p},get forwardZ(){return d},get positionX(){return f},get positionY(){return m},get positionZ(){return v},get upX(){return g},get upY(){return y},get upZ(){return b}}})(eR,eB,eH,tH,tX,t1,ed,t8),e3=new WeakMap,e4=((t,e,n,r,i,s)=>class extends n{constructor(n,s){super(n),this._nativeContext=n,g.set(this,n),r(n)&&i.set(n,new Set),this._destination=new t(this,s),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){let e="function"==typeof t?s(this,t):null;this._nativeContext.onstatechange=e;let n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(eV,e8,em,ed,e3,t9),e6=((t,e,n,r,i,s)=>(o,a)=>{let u=o.createOscillator();return tD(u,a),tR(u,a,"detune"),tR(u,a,"frequency"),void 0!==a.periodicWave?u.setPeriodicWave(a.periodicWave):tP(u,a,"type"),e(n,()=>n(o))||tj(u),e(r,()=>r(o))||s(u,o),e(i,()=>i(o))||tV(u),t(o,u),u})(eE,es,t4,t6,t5,t7),e5=((t,e,n,r,i)=>()=>{let s=new WeakMap,o=null,a=null,u=null,l=async(l,c)=>{let h=n(l),p=h.context===c;return p||(h=e(c,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type}),null!==a&&h.start(a),null!==u&&h.stop(u)),s.set(c,h),p?(await t(c,l.detune,h.detune),await t(c,l.frequency,h.frequency)):(await r(c,l.detune,h.detune),await r(c,l.frequency,h.frequency)),await i(l,c,h),h};return{set periodicWave(value){o=value},set start(value){a=value},set stop(value){u=value},render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):l(t,e)}}})(eM,e6,te,eD,el),e7=((t,e,n,r,i,s,o)=>class extends t{constructor(t,o){let a=i(t),u={...t$,...o},l=n(a,u),c=s(a),h=c?r():null,p=t.sampleRate/2;super(t,!1,l,h),this._detune=e(this,c,l.detune,153600,-153600),this._frequency=e(this,c,l.frequency,p,-p),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==u.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){let e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;let n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){P(this);let t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),q(this)&&D(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(ew,eR,e6,e5,eh,ed,t9),e9=(t,e)=>{let n=eP(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1});return n.buffer=t.createBuffer(1,2,44100),n.loop=!0,n.connect(e),n.start(),()=>{n.stop(),n.disconnect(e)}},nt=((t,e,n,r,i)=>(s,{curve:o,oversample:a,...u})=>{let l=s.createWaveShaper(),c=s.createWaveShaper();tD(l,u),tD(c,u);let h=n(s,{...u,gain:1}),p=n(s,{...u,gain:-1}),d=n(s,{...u,gain:1}),f=n(s,{...u,gain:-1}),m=null,v=!1,g=null,y={get bufferSize(){return},get channelCount(){return l.channelCount},set channelCount(value){h.channelCount=value,p.channelCount=value,l.channelCount=value,d.channelCount=value,c.channelCount=value,f.channelCount=value},get channelCountMode(){return l.channelCountMode},set channelCountMode(value){h.channelCountMode=value,p.channelCountMode=value,l.channelCountMode=value,d.channelCountMode=value,c.channelCountMode=value,f.channelCountMode=value},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(value){h.channelInterpretation=value,p.channelInterpretation=value,l.channelInterpretation=value,d.channelInterpretation=value,c.channelInterpretation=value,f.channelInterpretation=value},get context(){return l.context},get curve(){return g},set curve(value){if(null!==value&&value.length<2)throw e();if(null===value)l.curve=value,c.curve=value;else{let t=value.length,e=new Float32Array(t+2-t%2),n=new Float32Array(t+2-t%2);e[0]=value[0],n[0]=-value[t-1];let r=Math.ceil((t+1)/2),i=(t+1)/2-1;for(let s=1;s<r;s+=1){let o=s/r*i,a=Math.floor(o),u=Math.ceil(o);e[s]=a===u?value[a]:(1-(o-a))*value[a]+(1-(u-o))*value[u],n[s]=a===u?-value[t-1-a]:-((1-(o-a))*value[t-1-a])-(1-(u-o))*value[t-1-u]}e[r]=t%2==1?value[r-1]:(value[r-2]+value[r-1])/2,l.curve=e,c.curve=n}g=value,v&&(r(g)&&null===m?m=t(s,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(value){l.oversample=value,c.oversample=value},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==o&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==y.oversample&&(y.oversample=a),i(tB(y,d),()=>{h.connect(l).connect(d),h.connect(p).connect(c).connect(f).connect(d),v=!0,r(g)&&(m=t(s,h))},()=>{h.disconnect(l),l.disconnect(d),h.disconnect(p),p.disconnect(c),c.disconnect(f),f.disconnect(d),v=!1,null!==m&&(m(),m=null)})})(e9,tA,tz,t2,eL),ne=((t,e,n,r,i,s,o)=>(a,u)=>{let l=a.createWaveShaper();if(null!==s&&"webkitAudioContext"===s.name&&void 0===a.createGain().gain.automationRate)return n(a,u);tD(l,u);let c=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==c&&c.length<2)throw e();tP(l,{curve:c},"curve"),tP(l,u,"oversample");let h=null,p=!1;return o(l,"curve",t=>()=>t.call(l),e=>n=>(e.call(l,n),p&&(r(n)&&null===h?h=t(a,l):r(n)||null===h||(h(),h=null)),n)),i(l,()=>{p=!0,r(l.curve)&&(h=t(a,l))},()=>{p=!1,null!==h&&(h(),h=null)})})(e9,tA,nt,t2,eL,ev,t8),nn=(i=((t,e,n,r,i,s,o,a,u,l)=>(c,{coneInnerAngle:h,coneOuterAngle:p,coneOuterGain:d,distanceModel:f,maxDistance:m,orientationX:v,orientationY:g,orientationZ:y,panningModel:b,positionX:w,positionY:T,positionZ:x,refDistance:k,rolloffFactor:S,...A})=>{let C=c.createPanner();if(A.channelCount>2||"max"===A.channelCountMode)throw o();tD(C,A);let O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=n(c,{...O,channelInterpretation:"speakers",numberOfInputs:6}),I=r(c,{...A,gain:1}),M=r(c,{...O,gain:1}),P=r(c,{...O,gain:0}),D=r(c,{...O,gain:0}),N=r(c,{...O,gain:0}),R=r(c,{...O,gain:0}),j=r(c,{...O,gain:0}),V=i(c,256,6,1),F=s(c,{...O,curve:new Float32Array([1,1]),oversample:"none"}),U=[v,g,y],q=[w,T,x],L=new Float32Array(1);V.onaudioprocess=({inputBuffer:t})=>{let e=[u(t,L,0),u(t,L,1),u(t,L,2)];e.some((t,e)=>t!==U[e])&&(C.setOrientation(...e),U=e);let n=[u(t,L,3),u(t,L,4),u(t,L,5)];n.some((t,e)=>t!==q[e])&&(C.setPosition(...n),q=n)},Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0});let B={get bufferSize(){return},get channelCount(){return C.channelCount},set channelCount(value){if(value>2)throw o();I.channelCount=value,C.channelCount=value},get channelCountMode(){return C.channelCountMode},set channelCountMode(value){if("max"===value)throw o();I.channelCountMode=value,C.channelCountMode=value},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(value){I.channelInterpretation=value,C.channelInterpretation=value},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(value){C.coneInnerAngle=value},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(value){C.coneOuterAngle=value},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(value){if(value<0||value>1)throw e();C.coneOuterGain=value},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(value){C.distanceModel=value},get inputs(){return[I]},get maxDistance(){return C.maxDistance},set maxDistance(value){if(value<0)throw RangeError();C.maxDistance=value},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return P.gain},get orientationZ(){return D.gain},get panningModel(){return C.panningModel},set panningModel(value){C.panningModel=value},get positionX(){return N.gain},get positionY(){return R.gain},get positionZ(){return j.gain},get refDistance(){return C.refDistance},set refDistance(value){if(value<0)throw RangeError();C.refDistance=value},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(value){if(value<0)throw RangeError();C.rolloffFactor=value},addEventListener:(...t)=>I.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>I.dispatchEvent(t[0]),removeEventListener:(...t)=>I.removeEventListener(t[0],t[1],t[2])};return h!==B.coneInnerAngle&&(B.coneInnerAngle=h),p!==B.coneOuterAngle&&(B.coneOuterAngle=p),d!==B.coneOuterGain&&(B.coneOuterGain=d),f!==B.distanceModel&&(B.distanceModel=f),m!==B.maxDistance&&(B.maxDistance=m),v!==B.orientationX.value&&(B.orientationX.value=v),g!==B.orientationY.value&&(B.orientationY.value=g),y!==B.orientationZ.value&&(B.orientationZ.value=y),b!==B.panningModel&&(B.panningModel=b),w!==B.positionX.value&&(B.positionX.value=w),T!==B.positionY.value&&(B.positionY.value=T),x!==B.positionZ.value&&(B.positionZ.value=x),k!==B.refDistance&&(B.refDistance=k),S!==B.rolloffFactor&&(B.rolloffFactor=S),(1!==U[0]||0!==U[1]||0!==U[2])&&C.setOrientation(...U),(0!==q[0]||0!==q[1]||0!==q[2])&&C.setPosition(...q),l(tB(B,C),()=>{I.connect(C),t(I,F,0,0),F.connect(M).connect(E,0,0),F.connect(P).connect(E,0,1),F.connect(D).connect(E,0,2),F.connect(N).connect(E,0,3),F.connect(R).connect(E,0,4),F.connect(j).connect(E,0,5),E.connect(V).connect(c.destination)},()=>{I.disconnect(C),a(I,F,0,0),F.disconnect(M),M.disconnect(E),F.disconnect(P),P.disconnect(E),F.disconnect(D),D.disconnect(E),F.disconnect(N),N.disconnect(E),F.disconnect(R),R.disconnect(E),F.disconnect(j),j.disconnect(E),E.disconnect(V),V.disconnect(c.destination)})})(Z,tA,eB,tz,tH,ne,tX,tt,t1,eL),(t,e)=>{let n=t.createPanner();return void 0===n.orientationX?i(t,e):(tD(n,e),tR(n,e,"orientationX"),tR(n,e,"orientationY"),tR(n,e,"orientationZ"),tR(n,e,"positionX"),tR(n,e,"positionY"),tR(n,e,"positionZ"),tP(n,e,"coneInnerAngle"),tP(n,e,"coneOuterAngle"),tP(n,e,"coneOuterGain"),tP(n,e,"distanceModel"),tP(n,e,"maxDistance"),tP(n,e,"panningModel"),tP(n,e,"refDistance"),tP(n,e,"rolloffFactor"),n)}),nr=((t,e,n,r,i,s,o,a,u,l)=>()=>{let c=new WeakMap,h=null,p=async(p,d)=>{let f=null,m=s(p),v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},g={...v,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},y=m.context===d;if("bufferSize"in m?f=r(d,{...v,gain:1}):y||(m=i(d,{...g,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value})),c.set(d,null===f?m:f),null!==f){if(null===h){if(null===o)throw Error("Missing the native OfflineAudioContext constructor.");let t=new o(6,p.context.length,d.sampleRate),r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(t.destination),h=(async()=>{let e=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(e,r)=>{let i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:+(0===r)});return await a(t,e,i.offset),i}));for(let t=0;t<6;t+=1)e[t].connect(r,0,t),e[t].start(0);return l(t)})()}let t=await h,s=r(d,{...v,gain:1});await u(p,d,s);let c=[];for(let e=0;e<t.numberOfChannels;e+=1)c.push(t.getChannelData(e));let m=[c[0][0],c[1][0],c[2][0]],y=[c[3][0],c[4][0],c[5][0]],b=r(d,{...v,gain:1}),w=i(d,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]});s.connect(b).connect(w.inputs[0]),w.connect(f);for(let e=128;e<t.length;e+=128){let t=[c[0][e],c[1][e],c[2][e]],n=[c[3][e],c[4][e],c[5][e]];if(t.some((t,e)=>t!==m[e])||n.some((t,e)=>t!==y[e])){m=t,y=n;let o=e/d.sampleRate;b.gain.setValueAtTime(0,o),b=r(d,{...v,gain:0}),w=i(d,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),b.gain.setValueAtTime(1,o),s.connect(b).connect(w.inputs[0]),w.connect(f)}}return f}return y?(await t(d,p.orientationX,m.orientationX),await t(d,p.orientationY,m.orientationY),await t(d,p.orientationZ,m.orientationZ),await t(d,p.positionX,m.positionX),await t(d,p.positionY,m.positionY),await t(d,p.positionZ,m.positionZ)):(await a(d,p.orientationX,m.orientationX),await a(d,p.orientationY,m.orientationY),await a(d,p.orientationZ,m.orientationZ),await a(d,p.positionX,m.positionX),await a(d,p.positionY,m.positionY),await a(d,p.positionZ,m.positionZ)),"inputs"in m?await u(p,d,m.inputs[0]):await u(p,d,m),m};return{render(t,e){let n=c.get(e);return void 0!==n?Promise.resolve(n):p(t,e)}}})(eM,eB,eH,tz,nn,te,ep,eD,el,e1),ni=((t,e,n,r,i,s,o)=>class extends t{constructor(t,a){let u=i(t),l=n(u,{...tZ,...a}),c=s(u);super(t,!1,l,c?r():null),this._nativePannerNode=l,this._orientationX=e(this,c,l.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=e(this,c,l.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=e(this,c,l.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=e(this,c,l.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=e(this,c,l.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=e(this,c,l.positionZ,34028234663852886e22,-34028234663852886e22),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(ew,eR,nn,nr,eh,ed,eU),ns=((t,e,n,r)=>class i{constructor(i,s){let o=t(e(i),r({...tJ,...s}));return n.add(o),o}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}})((t,{disableNormalization:e,imag:n,real:r})=>{let i=n instanceof Float32Array?n:new Float32Array(n),s=r instanceof Float32Array?r:new Float32Array(r),o=t.createPeriodicWave(s,i,{disableNormalization:e});if(Array.from(n).length<2)throw V();return o},eh,new WeakSet,t=>{let{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}}),no=((t,e)=>(n,r)=>{let i=r.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,r);let s=n.createStereoPanner();return tD(s,r),tR(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),s})(((t,e,n,r,i,s)=>{let o=new Float32Array([1,1]),a=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},c=(t,s,c,h,p)=>{if(1===s)return((t,e,i,s)=>{let c=new Float32Array(16385),h=new Float32Array(16385);for(let t=0;t<16385;t+=1){let e=t/16384*a;c[t]=Math.cos(e),h[t]=Math.sin(e)}let p=n(t,{...u,gain:0}),d=r(t,{...l,curve:c}),f=r(t,{...l,curve:o}),m=n(t,{...u,gain:0}),v=r(t,{...l,curve:h});return{connectGraph(){e.connect(p),e.connect(void 0===f.inputs?f:f.inputs[0]),e.connect(m),f.connect(i),i.connect(void 0===d.inputs?d:d.inputs[0]),i.connect(void 0===v.inputs?v:v.inputs[0]),d.connect(p.gain),v.connect(m.gain),p.connect(s,0,0),m.connect(s,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===f.inputs?f:f.inputs[0]),e.disconnect(m),f.disconnect(i),i.disconnect(void 0===d.inputs?d:d.inputs[0]),i.disconnect(void 0===v.inputs?v:v.inputs[0]),d.disconnect(p.gain),v.disconnect(m.gain),p.disconnect(s,0,0),m.disconnect(s,0,1)}}})(t,c,h,p);if(2===s)return((t,i,s,c)=>{let h=new Float32Array(16385),p=new Float32Array(16385),d=new Float32Array(16385),f=new Float32Array(16385),m=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>m){let e=(t-m)/(16384-m)*a;h[t]=Math.cos(e),p[t]=Math.sin(e),d[t]=0,f[t]=1}else{let e=t/(16384-m)*a;h[t]=1,p[t]=0,d[t]=Math.cos(e),f[t]=Math.sin(e)}let v=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),g=n(t,{...u,gain:0}),y=r(t,{...l,curve:h}),b=n(t,{...u,gain:0}),w=r(t,{...l,curve:p}),T=r(t,{...l,curve:o}),x=n(t,{...u,gain:0}),k=r(t,{...l,curve:d}),S=n(t,{...u,gain:0}),A=r(t,{...l,curve:f});return{connectGraph(){i.connect(v),i.connect(void 0===T.inputs?T:T.inputs[0]),v.connect(g,0),v.connect(b,0),v.connect(x,1),v.connect(S,1),T.connect(s),s.connect(void 0===y.inputs?y:y.inputs[0]),s.connect(void 0===w.inputs?w:w.inputs[0]),s.connect(void 0===k.inputs?k:k.inputs[0]),s.connect(void 0===A.inputs?A:A.inputs[0]),y.connect(g.gain),w.connect(b.gain),k.connect(x.gain),A.connect(S.gain),g.connect(c,0,0),x.connect(c,0,0),b.connect(c,0,1),S.connect(c,0,1)},disconnectGraph(){i.disconnect(v),i.disconnect(void 0===T.inputs?T:T.inputs[0]),v.disconnect(g,0),v.disconnect(b,0),v.disconnect(x,1),v.disconnect(S,1),T.disconnect(s),s.disconnect(void 0===y.inputs?y:y.inputs[0]),s.disconnect(void 0===w.inputs?w:w.inputs[0]),s.disconnect(void 0===k.inputs?k:k.inputs[0]),s.disconnect(void 0===A.inputs?A:A.inputs[0]),y.disconnect(g.gain),w.disconnect(b.gain),k.disconnect(x.gain),A.disconnect(S.gain),g.disconnect(c,0,0),x.disconnect(c,0,0),b.disconnect(c,0,1),S.disconnect(c,0,1)}}})(t,c,h,p);throw i()};return(e,{channelCount:r,channelCountMode:o,pan:a,...u})=>{if("max"===o)throw i();let l=t(e,{...u,channelCount:1,channelCountMode:o,numberOfInputs:2}),h=n(e,{...u,channelCount:r,channelCountMode:o,gain:1}),p=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a}),{connectGraph:d,disconnectGraph:f}=c(e,r,h,p,l);Object.defineProperty(p.gain,"defaultValue",{get:()=>0}),Object.defineProperty(p.gain,"maxValue",{get:()=>1}),Object.defineProperty(p.gain,"minValue",{get:()=>-1});let m=!1;return s(tB({get bufferSize(){return},get channelCount(){return h.channelCount},set channelCount(value){h.channelCount!==value&&(m&&f(),{connectGraph:d,disconnectGraph:f}=c(e,value,h,p,l),m&&d()),h.channelCount=value},get channelCountMode(){return h.channelCountMode},set channelCountMode(value){if("clamped-max"===value||"max"===value)throw i();h.channelCountMode=value},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(value){h.channelInterpretation=value},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get pan(){return p.gain},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])},l),()=>{d(),m=!0},()=>{f(),m=!1})}})(eB,tL,tz,ne,tX,eL),tX),na=((t,e,n,r,i)=>()=>{let s=new WeakMap,o=async(o,a)=>{let u=n(o),l=u.context===a;return l||(u=e(a,{channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value})),s.set(a,u),l?await t(a,o.pan,u.pan):await r(a,o.pan,u.pan),"inputs"in u?await i(o,a,u.inputs[0]):await i(o,a,u),u};return{render(t,e){let n=s.get(e);return void 0!==n?Promise.resolve(n):o(t,e)}}})(eM,no,te,eD,el),nu=((t,e,n,r,i,s)=>class extends t{constructor(t,o){let a=i(t),u=n(a,{...tQ,...o}),l=s(a);super(t,!1,u,l?r():null),this._pan=e(this,l,u.pan)}get pan(){return this._pan}})(ew,eR,no,na,eh,ed),nl=((t,e,n)=>()=>{let r=new WeakMap,i=async(i,s)=>{let o=e(i);return o.context!==s&&(o=t(s,{channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample})),r.set(s,o),"inputs"in o?await n(i,s,o.inputs[0]):await n(i,s,o),o};return{render(t,e){let n=r.get(e);return void 0!==n?Promise.resolve(n):i(t,e)}}})(ne,te,el),nc=((t,e,n,r,i,s,o)=>class extends t{constructor(t,e){let a=i(t),u=n(a,{...t0,...e});super(t,!0,u,s(a)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(ew,tA,ne,nl,eh,ed,eU),nh=(t=>null!==t&&t.isSecureContext)(eo),np=(t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return r()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(eo),nd=new WeakMap,nf=((t,e)=>n=>{let r=t.get(n);if(void 0!==r)return r;if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r})(nd,ep),nm=nh?((t,e,n,r,i,s,o,a,u,l,c,h,p)=>{let d=0;return(f,m,v={credentials:"omit"})=>{let g=c.get(f);if(void 0!==g&&g.has(m))return Promise.resolve();let y=l.get(f);if(void 0!==y){let t=y.get(m);if(void 0!==t)return t}let b=s(f),T=void 0===b.audioWorklet?i(m).then(([t,e])=>{let[r,i]=S(t,e);return n(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}
})})(window,'_AWGS')`)}).then(()=>{let t=p._AWGS.pop();if(void 0===t)throw SyntaxError();r(b.currentTime,b.sampleRate,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();let r=w.get(b);if(void 0!==r){if(r.has(t))throw e();C(n),A(n.parameterDescriptors),r.set(t,n)}else C(n),A(n.parameterDescriptors),w.set(b,new Map([[t,n]]))},b.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(t(h,h))]).then(([[t,e],n])=>{let r=d+1;d=r;let[i,s]=S(t,e),l=new Blob([`${i};((AudioWorkletProcessor,registerProcessor)=>{${s}
})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${r}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(l);return b.audioWorklet.addModule(c,v).then(()=>{if(a(b))return b;let t=o(b);return t.audioWorklet.addModule(c,v).then(()=>t)}).then(t=>{if(null===u)throw SyntaxError();try{new u(t,`__sac${r}`)}catch{throw SyntaxError()}}).finally(()=>URL.revokeObjectURL(c))});return void 0===y?l.set(f,new Map([[m,T]])):y.set(m,T),T.then(()=>{let t=c.get(f);void 0===t?c.set(f,new Set([m])):t.add(m)}).finally(()=>{let t=l.get(f);void 0!==t&&t.delete(m)}),T}})(es,tX,(t=>e=>new Promise((n,r)=>{if(null===t)return void r(SyntaxError());let i=t.document.head;if(null===i)r(SyntaxError());else{let s=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),u=t.onerror,l=()=>{t.onerror=u,URL.revokeObjectURL(a)};t.onerror=(e,n,i,s,o)=>n===a||n===t.location.href&&1===i&&1===s?(l(),r(o),!1):null!==u?u(e,n,i,s,o):void 0,s.onerror=()=>{l(),r(SyntaxError())},s.onload=()=>{l(),n()},s.src=a,s.type="module",i.appendChild(s)}}))(eo),np,(s=()=>new DOMException("","AbortError"),async t=>{try{let e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw s()}),eh,nf,ed,eb,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;let n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n),s=!1,o=!1;try{await r.audioWorklet.addModule(i);let e=new t(r,"a",{numberOfOutputs:0}),n=r.createOscillator();e.port.onmessage=()=>s=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await r.startRendering(),await new Promise(t=>setTimeout(t))}catch{}finally{URL.revokeObjectURL(i)}return s&&!o})(eb,ep),eo):void 0,nv=t=>eg(t)||ed(t),ng=((t,e,n,r,i,s,o,a,u,l,c,h,p,d,f,m,v,g,y,b)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,r){return new n({length:e,numberOfChannels:t,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(t=6){return new s(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new u(this)}createDelay(t=1){return new c(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new p(this)}createIIRFilter(t,e){return new d(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new v(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new g(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new b(this)}decodeAudioData(t,e,n){return l(this._nativeContext,t).then(t=>("function"==typeof e&&e(t),t),t=>{throw"function"==typeof n&&n(t),t})}})(nm,eT,eO,ej,eq,eW,ez,eX,e$,((t,e,n,r,i,s,o,a,u,l,c)=>(h,p)=>{let d=o(h)?h:s(h);if(i.has(p))return Promise.reject(n());try{i.add(p)}catch{}return e(u,()=>u(d))?d.decodeAudioData(p).then(n=>(tw(p).catch(()=>{}),e(a,()=>a(n))||c(n),t.add(n),n)):new Promise((e,n)=>{let i=async()=>{try{await tw(p)}catch{}},s=t=>{n(t),i()};try{d.decodeAudioData(p,n=>{"function"!=typeof n.copyFromChannel&&(l(n),F(n)),t.add(n),i().then(()=>e(n))},t=>{null===t?s(r()):s(t)})}catch(t){s(t)}})})(ex,es,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,eh,nv,j,tM,eA,eC),eZ,eQ,eK,e2,e4,e7,ni,ns,nu,nc),ny=((t,e,n,r)=>class extends t{constructor(t,i){let s=n(t),o=e(s,i);if(r(s))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(ew,(t,e)=>t.createMediaElementSource(e.mediaElement),eh,ed),n_=((t,e,n,r)=>class extends t{constructor(t,i){let s=n(t);if(r(s))throw TypeError();let o=e(s,{...tI,...i});super(t,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(ew,(t,e)=>{let n=t.createMediaStreamDestination();return tD(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},eh,ed),nb=((t,e,n,r)=>class extends t{constructor(t,i){let s=n(t),o=e(s,i);if(r(s))throw TypeError();super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(ew,(t,{mediaStream:e})=>{let n=e.getAudioTracks();n.sort((t,e)=>t.id<e.id?-1:+(t.id>e.id));let r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},eh,ed),nw=((t,e,n)=>class extends t{constructor(t,r){super(t,!0,e(n(t),r),null)}})(ew,(t,{mediaStreamTrack:e})=>{if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(e);let n=new MediaStream([e]),r=t.createMediaStreamSource(n);if("audio"!==e.kind)throw tA();if(ed(t))throw TypeError();return r},eh),nT=((t,e,n,r,i,s,o,a,u)=>class extends t{constructor(t={}){let e;if(null===u)throw Error("Missing the native AudioContext constructor.");try{e=new u(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw r();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);let{latencyHint:i}=t,{sampleRate:s}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/s:"interactive"===i||void 0===i?256/s:"playback"===i?1024/s:128*Math.max(2,Math.min(128,Math.round(i*s/128)))/s,this._nativeAudioContext=e,"webkitAudioContext"===u.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";let t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),G(this)}))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{let n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}})(ng,tA,tX,tK,ny,n_,nb,nw,ev),nx=t=>{let e=e3.get(t);if(void 0===e)throw Error("The context has no set of AudioWorkletNodes.");return e},nk=(t,e)=>{nx(t).add(e)},nS=(t,e,n=0,r=0)=>{let i=t[n];if(void 0===i)throw V();return ta(e)?i.connect(e,0,r):i.connect(e,0)},nA=(t,e)=>{nx(t).delete(e)},nC=(t=>(e,n,r,i=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"==typeof n?tx(t,e,n).disconnect():ta(n)?void 0===r?e.forEach(t=>t.disconnect(n)):void 0===i?tx(t,e,r).disconnect(n,0):tx(t,e,r).disconnect(n,0,i):void 0===r?e.forEach(t=>t.disconnect(n)):tx(t,e,r).disconnect(n,0))(V),nO=new WeakMap,nE=((t,e,n,r,i,s,o,a,u,l,c,h,p)=>(d,f,m,v)=>{let g,y;if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw u();let b=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(b.some(t=>t<1))throw u();if(b.length!==v.numberOfOutputs)throw e();if("explicit"!==v.channelCountMode)throw u();let w=v.channelCount*v.numberOfInputs,x=b.reduce((t,e)=>t+e,0),k=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(w+k>6||x>6)throw u();let S=new MessageChannel,A=[],C=[];for(let t=0;t<v.numberOfInputs;t+=1)A.push(o(d,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),C.push(i(d,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let O=[];if(void 0!==m.parameterDescriptors)for(let{defaultValue:t,maxValue:e,minValue:n,name:r}of m.parameterDescriptors){let i=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[r]?v.parameterData[r]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?34028234663852886e22:e},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),O.push(i)}let E=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+k)}),I=tF(f,d.sampleRate),M=a(d,I,w+k,Math.max(1,x)),P=i(d,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),D=[];for(let t=0;t<v.numberOfOutputs;t+=1)D.push(r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[t]}));for(let t=0;t<v.numberOfInputs;t+=1){A[t].connect(C[t]);for(let e=0;e<v.channelCount;e+=1)C[t].connect(E,e,t*v.channelCount+e)}let N=new tc(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map(({name:t},e)=>{let n=O[e];return n.connect(E,0,w+e),n.start(0),[t,n.offset]}));E.connect(M);let R=v.channelInterpretation,j=null,V=0===v.numberOfOutputs?[M]:D,F={get bufferSize(){return I},get channelCount(){return v.channelCount},set channelCount(_){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(_){throw n()},get channelInterpretation(){return R},set channelInterpretation(value){for(let t of A)t.channelInterpretation=value;R=value},get context(){return M.context},get inputs(){return A},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return j},set onprocessorerror(value){"function"==typeof j&&F.removeEventListener("processorerror",j),"function"==typeof(j="function"==typeof value?value:null)&&F.addEventListener("processorerror",j)},get parameters(){return N},get port(){return S.port2},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,V),disconnect:l.bind(null,V),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])},U=new Map;S.port1.addEventListener=(g=S.port1.addEventListener,(...t)=>{if("message"===t[0]){let e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){let n=U.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{c(d.currentTime,d.sampleRate,()=>e(t))},U.set(e,t[1]))}}return g.call(S.port1,t[0],t[1],t[2])}),S.port1.removeEventListener=(y=S.port1.removeEventListener,(...t)=>{if("message"===t[0]){let e=U.get(t[1]);void 0!==e&&(U.delete(t[1]),t[1]=e)}return y.call(S.port1,t[0],t[1],t[2])});let q=null;Object.defineProperty(S.port1,"onmessage",{get:()=>q,set:t=>{"function"==typeof q&&S.port1.removeEventListener("message",q),"function"==typeof(q="function"==typeof t?t:null)&&(S.port1.addEventListener("message",q),S.port1.start())}}),m.prototype.port=S.port1;let L=null;((t,e,n,r)=>{let i=T.get(t);void 0===i&&(i=new WeakMap,T.set(t,i));let s=tU(n,r);return i.set(e,s),s})(d,F,m,v).then(t=>L=t);let B=tf(v.numberOfInputs,v.channelCount),W=tf(v.numberOfOutputs,b),z=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{}),G=!0,H=()=>{v.numberOfOutputs>0&&M.disconnect(P);for(let t=0,e=0;t<v.numberOfOutputs;t+=1){let n=D[t];for(let r=0;r<b[t];r+=1)P.disconnect(n,e+r,r);e+=b[t]}},X=new Map;M.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==L){let n=h(F);for(let r=0;r<I;r+=128){for(let e=0;e<v.numberOfInputs;e+=1)for(let n=0;n<v.channelCount;n+=1)tp(t,B[e],n,n,r);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach(({name:e},n)=>{tp(t,z,e,w+n,r)});for(let t=0;t<v.numberOfInputs;t+=1)for(let e=0;e<b[t];e+=1)0===W[t][e].byteLength&&(W[t][e]=new Float32Array(128));try{let t=B.map((t,e)=>{if(n[e].size>0)return X.set(e,I/128),t;let r=X.get(e);return void 0===r?[]:(t.every(t=>t.every(t=>0===t))&&(1===r?X.delete(e):X.set(e,r-1)),t)});G=c(d.currentTime+r/d.sampleRate,d.sampleRate,()=>L.process(t,W,z));for(let t=0,n=0;t<v.numberOfOutputs;t+=1){for(let i=0;i<b[t];i+=1)td(e,W[t],i,n+i,r);n+=b[t]}}catch(t){G=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!G){for(let t=0;t<v.numberOfInputs;t+=1){A[t].disconnect(C[t]);for(let e=0;e<v.channelCount;e+=1)C[r].disconnect(E,e,t*v.channelCount+e)}if(void 0!==m.parameterDescriptors){let t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){let t=O[e];t.disconnect(E,0,w+e),t.stop()}}E.disconnect(M),M.onaudioprocess=null,Y?H():J();break}}}};let Y=!1,$=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Z=()=>M.connect($).connect(d.destination),J=()=>{M.disconnect($),$.disconnect()};return Z(),p(F,()=>{if(G){J(),v.numberOfOutputs>0&&M.connect(P);for(let t=0,e=0;t<v.numberOfOutputs;t+=1){let n=D[t];for(let r=0;r<b[t];r+=1)P.connect(n,e+r,r);e+=b[t]}}Y=!0},()=>{G&&(Z(),H()),Y=!1})})(nS,V,tA,eB,tL,eH,tz,tH,tX,nC,np,t=>O(nO,t),eL),nI=((t,e,n,r,i)=>(s,o,a,u,l,c)=>{if(null!==a)try{let e=new a(s,u,c),r=new Map,o=null;if(Object.defineProperties(e,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t="function"==typeof n[1]?n[1]:"object"==typeof n[1]&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){let e=r.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],{...e}))},r.set(t,n[1]))}}return t.call(e,"error",n[1],n[2]),t.call(e,...n)})(e.addEventListener),e.removeEventListener=(t=>(...n)=>{if("processorerror"===n[0]){let t=r.get(n[1]);void 0!==t&&(r.delete(n[1]),n[1]=t)}return t.call(e,"error",n[1],n[2]),t.call(e,n[0],n[1],n[2])})(e.removeEventListener),0!==c.numberOfOutputs){let t=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(s.destination),i(e,()=>t.disconnect(),()=>t.connect(s.destination))}return e}catch(t){if(11===t.code)throw r();throw t}if(void 0===l)throw r();return(t=>{let{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(c),e(s,o,l,c)})(tA,nE,tz,tX,eL),nM=((t,e,n,r,i,s,o,a,u,l,c,h,p,d,f,m)=>(v,g,y)=>{let b=new WeakMap,w=null,T=async(a,T)=>{let x=c(a),k=null,S=x.context===T,A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===h){let t=A.reduce((t,e)=>t+e,0),n=i(T,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),s=[];for(let t=0;t<a.numberOfOutputs;t+=1)s.push(r(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[t]}));let l=o(T,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});l.connect=e.bind(null,s),l.disconnect=u.bind(null,s),k=[n,s,l]}else S||(x=new h(T,v));if(b.set(T,null===k?x:k[2]),null!==k){if(null===w){if(void 0===y)throw Error("Missing the processor constructor.");if(null===p)throw Error("Missing the native OfflineAudioContext constructor.");let t=a.channelCount*a.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,u=async()=>{let u=new p(n,128*Math.ceil(a.context.length/128),T.sampleRate),l=[],c=[];for(let t=0;t<g.numberOfInputs;t+=1)l.push(o(u,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),c.push(i(u,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let h=await Promise.all(Array.from(a.parameters.values()).map(async t=>{let e=s(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await d(u,t,e.offset),e})),v=r(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<g.numberOfInputs;t+=1){l[t].connect(c[t]);for(let e=0;e<g.channelCount;e+=1)c[t].connect(v,e,t*g.channelCount+e)}for(let[e,n]of h.entries())n.connect(v,0,t+e),n.start(0);return v.connect(u.destination),await Promise.all(l.map(t=>f(a,u,t))),m(u)};w=tm(a,0===n?null:await u(),T,g,A,y,l)}let t=await w,e=n(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[u,c,h]=k;null!==t&&(e.buffer=t,e.start(0)),e.connect(u);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){let n=c[t];for(let r=0;r<A[t];r+=1)u.connect(n,e+r,r);e+=A[t]}return h}if(S)for(let[e,n]of a.parameters.entries())await t(T,n,x.parameters.get(e));else for(let[t,e]of a.parameters.entries())await d(T,e,x.parameters.get(t));return await f(a,T,x),x};return{render(t,e){a(e,t);let n=b.get(e);return void 0!==n?Promise.resolve(n):T(t,e)}}})(eM,nS,eP,eB,tL,eH,tz,nA,nC,np,te,eb,ep,eD,el,e1),nP=t=>nd.get(t),nD=(t,e)=>{nO.set(t,e)},nN=nh?((t,e,n,r,i,s,o,a,u,l,c,h,p,d)=>class extends e{constructor(e,d,f){var m;let v=a(e),g=u(v),y=c({...th,...f});p(y);let b=w.get(v),T=null==b?void 0:b.get(d),x=i(g||"closed"!==v.state?v:null!=(m=o(v))?m:v,g?null:e.baseLatency,l,d,T,y);super(e,!0,x,g?r(d,y,T):null);let k=[];x.parameters.forEach((t,e)=>{let r=n(this,g,t);k.push([e,r])}),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new tc(k),g&&t(v,this);let{activeInputs:S}=s(this);h(x,S)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){let e="function"==typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;let n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(nk,ew,eR,nM,nI,B,nP,eh,ed,eb,t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),nD,t=>{let{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},t9):void 0,nR=((t,e)=>(n,r,i)=>{if(null===e)throw Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(tX,ep),nj=((t,e,n,r,i,s,o,a)=>(u,l)=>n(u).render(u,l).then(()=>Promise.all(Array.from(r(l)).map(t=>n(t).render(t,l)))).then(()=>i(l)).then(n=>("function"!=typeof n.copyFromChannel?(o(n),F(n)):e(s,()=>s(n))||a(n),t.add(n),n)))(ex,es,eu,nx,e1,j,eA,eC),nV=((t,e,n,r,i)=>class extends t{constructor(t,n,i){let s;if("number"==typeof t&&void 0!==n&&void 0!==i)s={length:n,numberOfChannels:t,sampleRate:i};else if("object"==typeof t)s=t;else throw Error("The given parameters are not valid.");let{length:o,numberOfChannels:a,sampleRate:u}={...tY,...s},l=r(a,o,u);e(tM,()=>tM(l))||l.addEventListener("statechange",(()=>{let t=0,e=n=>{"running"===this._state&&(t>0?(l.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(l,a),this._length=o,this._nativeOfflineAudioContext=l,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,G(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}})(ng,es,tA,nR,nj),nF=((t,e)=>n=>e(t.get(n))||e(n))(g,eg),nU=t=>f.has(t)||ey(t),nq=t=>v.has(t)||e_(t),nL=((t,e)=>n=>e(t.get(n))||e(n))(g,ed);function nB(t){return void 0===t}function nW(t){return void 0!==t}function nz(t){return"number"==typeof t}function nG(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function nH(t){return Array.isArray(t)}function nX(t){return"string"==typeof t}function nY(t){return nX(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function n$(t,e){if(!t)throw Error(e)}function nZ(t,e,n=1/0){if(!(e<=t&&t<=n))throw RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function nJ(t){t.isOffline||"running"===t.state||n1('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let nQ=!1,nK=!1,n0=console;function n1(...t){n0.warn(...t)}let n2="object"==typeof self?self:null,n8=n2&&(n2.hasOwnProperty("AudioContext")||n2.hasOwnProperty("webkitAudioContext"));function n3(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function n4(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;class n6{constructor(t,e,n,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){let t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=new Worker(URL.createObjectURL(t));e.onmessage=this._callback.bind(this),this._worker=e}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null==(e=this._worker)||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function n5(t,...e){if(!e.length)return t;let n=e.shift();if(nG(t)&&nG(n))for(let e in n){var r,i;(r=e,i=n[e],"value"===r||nq(i)||nU(i)||i instanceof eO)?t[e]=n[e]:nG(n[e])?(t[e]||Object.assign(t,{[e]:{}}),n5(t[e],n[e])):Object.assign(t,{[e]:n[e]})}return n5(t,...e)}function n7(t,e,n=[],r){let i={},s=Array.from(e);if(nG(s[0])&&r&&!Reflect.has(s[0],r)&&(Object.keys(s[0]).some(e=>Reflect.has(t,e))||(n5(i,{[r]:s[0]}),n.splice(n.indexOf(r),1),s.shift())),1===s.length&&nG(s[0]))n5(i,s[0]);else for(let t=0;t<n.length;t++)nW(s[t])&&(i[n[t]]=s[t]);return n5(t,i)}function n9(t,e){return e.forEach(e=>{Reflect.has(t,e)&&delete t[e]}),t}class rt{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||n2&&this.toString()===n2.TONE_DEBUG_CLASS)&&function(...t){n0.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}function re(t,e){return t>e+1e-6}function rn(t,e){return re(t,e)||ri(t,e)}function rr(t,e){return t+1e-6<e}function ri(t,e){return 1e-6>Math.abs(t-e)}rt.version=a;class rs extends rt{constructor(){super(),this.name="Timeline",this._timeline=[];let t=n7(rs.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(n$(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){let e=this._timeline[this.length-1];n$(rn(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{let e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){let e=this._timeline.indexOf(t);return -1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){let n=this._search(t,e);return -1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){let n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){let e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];let n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(ri(this._timeline[e].time,t)){for(let n=e;n>=0;n--)if(ri(this._timeline[n].time,t))e=n;else break;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&rn(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){let e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){let e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return -1;let n=0,r=this._timeline.length,i=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;n<i;){let r=Math.floor(n+(i-n)/2),s=this._timeline[r],o=this._timeline[r+1];if(ri(s[e],t)){for(let n=r;n<this._timeline.length;n++)if(ri(this._timeline[n][e],t))r=n;else break;return r}if(rr(s[e],t)&&re(o[e],t))return r;re(s[e],t)?i=r:n=r+1}return -1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){let n=this._search(t);return -1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){let n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let r=this._search(t),i=this._search(e);return -1!==r&&-1!==i?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,r,i)):-1===r&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){let n=this._search(t);if(-1!==n&&ri(this._timeline[n].time,t)){let r=n;for(let e=n;e>=0;e--)if(ri(this._timeline[e].time,t))r=e;else break;this._iterate(t=>{e(t)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let ro=[];function ra(t){ro.push(t)}let ru=[];function rl(t){ru.push(t)}class rc extends rt{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(t=>{nB(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)}),this}once(t,e){let n=(...r)=>{e(...r),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach(t=>{if(nB(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(nB(e))this._events[t]=[];else{let n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){let n=this._events[t].slice(0);for(let t=0,r=n.length;t<r;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{let n=Object.getOwnPropertyDescriptor(rc.prototype,e);Object.defineProperty(t.prototype,e,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class rh extends rc{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class rp extends rh{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new rs,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let n=n7(rp.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null==(t=arguments[0])?void 0:t.latencyHint)||""):(this._context=new nT({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new n6(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null==(e=arguments[0])?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){if(!this._initialized){var t;t=this,ro.forEach(e=>e(t)),this._initialized=!0}return this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return n$(nF(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return n$(nF(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return n$(nF(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){n$(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){n$(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){n$(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){n$(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){var n;return n=this.rawContext,n$(nW(nN),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(null==n2?void 0:n2.BaseAudioContext)?null==n2?void 0:n2.AudioWorkletNode:nN)(n,t,e)}addAudioWorkletModule(t){return n4(this,void 0,void 0,function*(){n$(nW(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return n4(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return nF(this._context)?this._context.resume():Promise.resolve()}close(){return n4(this,void 0,void 0,function*(){var t;nF(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(t=this,ru.forEach(e=>e(t)))})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;let r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){let t=this.now();this._timeouts.forEachBefore(t,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(t,e){this._timeoutIds++;let n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){let n=++this._timeoutIds,r=()=>{let i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:n,time:i+e})};return r(),n}}class rd extends rh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return n4(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function rf(t,e){nH(e)?e.forEach(e=>rf(t,e)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}let rm=()=>{};class rv extends rt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=rm;let t=n7(rv.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,nX(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:rm,onload:rm,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:rb().sampleRate}set(t){return t instanceof rv?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return n4(this,void 0,void 0,function*(){let e=rv.load(t).then(t=>{this.set(t),this.onload(this)});rv.downloads.push(e);try{yield e}finally{let t=rv.downloads.indexOf(e);rv.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let e=nH(t)&&t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,i=rb(),s=i.createBuffer(n,r,i.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)s.copyToChannel(o[t],t);return this._buffer=s,this}toMono(t){if(nz(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length),e=this.numberOfChannels;for(let n=0;n<e;n++){let e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map(t=>t/e),this.fromArray(t)}return this}toArray(t){if(nz(t))return this.getChannelData(t);{if(1===this.numberOfChannels)return this.toArray(0);let t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){n$(this.loaded,"Buffer is not loaded");let n=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);n$(n<r,"The start time must be less than the end time");let i=rb().createBuffer(this.numberOfChannels,r-n,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)i.copyToChannel(this.getChannelData(t).subarray(n,r),t);return new rv(i)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new rv().fromArray(t)}static fromUrl(t){return n4(this,void 0,void 0,function*(){let e=new rv;return yield e.load(t)})}static load(t){return n4(this,void 0,void 0,function*(){let e=""===rv.baseUrl||rv.baseUrl.endsWith("/")?rv.baseUrl:rv.baseUrl+"/",n=yield fetch(e+t);if(!n.ok)throw Error(`could not load url: ${t}`);let r=yield n.arrayBuffer();return yield rb().decodeAudioData(r)})}static supportsType(t){let e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return n4(this,void 0,void 0,function*(){for(yield Promise.resolve();rv.downloads.length;)yield rv.downloads[0]})}}rv.baseUrl="",rv.downloads=[];class rg extends rp{constructor(){var t,e,n,r,i,s;super({clockSource:"offline",context:(t=arguments[0],nL(t))?arguments[0]:(e=arguments[0],n=arguments[1]*arguments[2],r=arguments[2],new nV(e,n,r)),lookAhead:0,updateInterval:(i=arguments[0],nL(i))?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,s=arguments[0],this._duration=nL(s)?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return n4(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;let n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise(t=>setTimeout(t,1)))}})}render(){return n4(this,arguments,void 0,function*(t=!0){return yield this.workletsAreReady(),yield this._renderClock(t),new rv((yield this._context.startRendering()))})}close(){return Promise.resolve()}}let ry=new rd,r_=ry;function rb(){return r_===ry&&n8&&function(t,e=!1){e&&r_.dispose(),r_=nF(t)?new rp(t):nL(t)?new rg(t):t}(new rp),r_}if(n2&&!n2.TONE_SILENCE_LOGGING){let t=` * Tone.js v${a} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function rw(t){return Math.pow(2,t/12)}let rT=440;function rx(t){return Math.round(rk(t))}function rk(t){return 69+12*Math.log2(t/rT)}class rS extends rt{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{let n=parseInt(t,10),r="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{let e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let r=0;return t&&"0"!==t&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof rS&&this.fromType(this._val),nB(this._val))return this._noArg();if(nX(this._val)&&nB(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(nG(this._val)){let t=0;for(let e in this._val)if(nW(this._val[e])){let n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(nW(this._units)){let t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return nX(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class rA extends rS{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{let e=new rA(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){let n=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),i=Math.round(r/n);return r+(i*n-r)*e}toNotation(){let t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){let n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],r=new rA(this.context,e[0]).toSeconds();return e.forEach(e=>{let i=new rA(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(r-t)&&(n=e,r=i)}),n}toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),e=this.valueOf()/t,n=Math.floor((e=parseFloat(e.toFixed(4)))/this._getTimeSignature()),r=e%1*4;e=Math.floor(e)%this._getTimeSignature();let i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,e,r].join(":")}toTicks(){let t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return rx(this.toFrequency())}_now(){return this.context.now()}}class rC extends rA{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return rT}static set A4(t){rT=t}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:rC.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){let n=rO[t.toLowerCase()]+(parseInt(e,10)+1)*12;return"midi"===this.defaultUnits?n:rC.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(t){return new rC(this.context,this.valueOf()*rw(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return rx(this.valueOf())}toNote(){let t=Math.round(12*Math.log2(this.toFrequency()/rC.A4))+57,e=Math.floor(t/12);return e<0&&(t+=-12*e),rE[t%12]+e.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let t=this._beatsToUnits(1);return Math.floor(this.valueOf()/t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return rT*Math.pow(2,(t-69)/12)}static ftom(t){return rx(t)}}let rO={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},rE=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class rI extends rA{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class rM extends rt{constructor(){super();let t=n7(rM.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:rb()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return nB(t)&&nQ&&!nK&&(nK=!0,n1("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing")),new rA(this.context,t).toSeconds()}toFrequency(t){return new rC(this.context,t).toFrequency()}toTicks(t){return new rI(this.context,t).toTicks()}_getPartialProperties(t){let e=this.get();return Object.keys(e).forEach(n=>{nB(t[n])&&delete e[n]}),e}get(){let t=this.constructor.getDefaults();return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){let n=this[e];nW(n)&&nW(n.value)&&nW(n.setValueAtTime)?t[e]=n.value:n instanceof rM?t[e]=n._getPartialProperties(t[e]):nH(n)||nz(n)||nX(n)||"boolean"==typeof n?t[e]=n:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&nW(this[e])&&(this[e]&&nW(this[e].value)&&nW(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof rM?this[e].set(t[e]):this[e]=t[e])}),this}}class rP extends rs{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){let e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return nZ(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){let n=this._search(e);for(let e=n;e>=0;e--){let n=this._timeline[e];if(n.state===t)return n}}getNextState(t,e){let n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){let n=this._timeline[e];if(n.state===t)return n}}}class rD extends rM{constructor(){let t=n7(rD.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,n$(nW(t.param)&&(nq(t.param)||t.param instanceof rD),"param must be an AudioParam");!nq(t.param);)t.param=t.param._param;this._swappable=!!nW(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new rs(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,nW(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rM.getDefaults(),{convert:!0,units:"number"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return nW(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return nW(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return nW(this.maxValue)&&nW(this.minValue)&&nZ(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){if(this.convert&&!this.overridden)if(this._is(t,"time"))return this.toSeconds(t);else if(this._is(t,"decibels"))return Math.pow(10,t/20);else if(this._is(t,"frequency"))return this.toFrequency(t);else return t;return this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Math.log(t)/Math.LN10*20:t}setValueAtTime(t,e){let n=this.toSeconds(e),r=this._fromType(t);return n$(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(t){let e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),r=this._events.get(e),i=this._initialValue;if(null===r)i=this._initialValue;else if("setTargetAtTime"===r.type&&(null===n||"setValueAtTime"===n.type)){let t,n=this._events.getBefore(r.time);t=null===n?this._initialValue:n.value,"setTargetAtTime"===r.type&&(i=this._exponentialApproach(r.time,t,r.value,r.constant,e))}else if(null===n)i=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=r.value;if("setTargetAtTime"===r.type){let e=this._events.getBefore(r.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,t,n.time,n.value,e):this._exponentialInterpolate(r.time,t,n.time,n.value,e)}else i=r.value;return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){let n=this._fromType(t),r=this.toSeconds(e);return n$(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=ri(n,0)?this._minOutput:n,this._assertRange(n);let r=this.toSeconds(e);return n$(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e);let r=Math.log((n=this.toSeconds(n))+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){let r=this._fromType(t);n$(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");let i=this.toSeconds(e);return this._assertRange(r),n$(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(t,e,n,r=1){n=this.toSeconds(n),e=this.toSeconds(e);let i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),e);let s=n/(t.length-1);for(let n=1;n<t.length;n++){let i=this._fromType(t[n])*r;this.linearRampToValueAtTime(this._toType(i),e+n*s)}return this}cancelScheduledValues(t){let e=this.toSeconds(t);return n$(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){let e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));n$(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);let r=this._events.get(e),i=this._events.getAfter(e);return r&&ri(r.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){let e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);let n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){let r=this._events.getAfter(n.time),i=r?r.time:e+2,s=(i-e)/10;for(let n=e;n<i;n+=s)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){n$(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,r,i){return n+(e-n)*Math.exp(-(i-t)/r)}_linearInterpolate(t,e,n,r,i){return e+(i-t)/(n-t)*(r-e)}_exponentialInterpolate(t,e,n,r,i){return e*Math.pow(r/e,(i-t)/(n-t))}}class rN extends rM{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return nW(this.input)?nq(this.input)||this.input instanceof rD?1:this.input.numberOfInputs:0}get numberOfOutputs(){return nW(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return nW(t)&&(t instanceof rN||nU(t))}_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){let t=this._getInternalNodes();n$(t.length>0,"ToneAudioNode does not have any internal nodes");let e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return rj(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return n1("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return function(t,e,n=0,r=0){if(nW(e))for(;e instanceof rN;)e=e.input;for(;!nU(t);)nW(t.output)&&(t=t.output);nq(e)?t.disconnect(e,n):nU(e)?t.disconnect(e,n,r):t.disconnect()}(this,t,e,n),this}chain(...t){return rR(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),nW(this.input)&&(this.input instanceof rN?this.input.dispose():nU(this.input)&&this.input.disconnect()),nW(this.output)&&(this.output instanceof rN?this.output.dispose():nU(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function rR(...t){let e=t.shift();t.reduce((t,e)=>(t instanceof rN?t.connect(e):nU(t)&&rj(t,e),e),e)}function rj(t,e,n=0,r=0){for(n$(nW(t),"Cannot connect from undefined node"),n$(nW(e),"Cannot connect to undefined node"),(e instanceof rN||nU(e))&&n$(e.numberOfInputs>0,"Cannot connect to node with no inputs"),n$(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof rN||e instanceof rD;)nW(e.input)&&(e=e.input);for(;t instanceof rN;)nW(t.output)&&(t=t.output);nq(e)?t.connect(e,n):t.connect(e,n,r)}class rV extends rN{constructor(){let t=n7(rV.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new rD({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),rf(this,"gain")}static getDefaults(){return Object.assign(rN.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class rF extends rN{constructor(t){super(t),this.onended=rm,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new rV({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let e=this.toSeconds(t);return -1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(rN.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:rm})}_startGain(t,e=1){n$(-1===this._startTime,"Source cannot be started more than once");let n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){n$(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();let e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==rm&&(this.onended(this),this.onended=rm,!this.context.isOffline)){let t=()=>this.dispose();"undefined"!=typeof requestIdleCallback?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),n$(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=rm,this}}class rU extends rF{constructor(){let t=n7(rU.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),rj(this._source,this._gainNode),this.offset=new rD({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(rF.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class rq extends rN{constructor(){let t=n7(rq.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new rU({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(rN.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return rL(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,r){return this._param.setValueCurveAtTime(t,e,n,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function rL(t,e,n,r){(e instanceof rD||nq(e)||e instanceof rq&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof rq&&(e.overridden=!0)),rj(t,e,n,r)}class rB extends rD{constructor(){let t=n7(rB.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new rs(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rD.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);let r=this._fromType(t),i=this._events.get(e),s=Math.round(Math.max(1/n,1));for(let t=0;t<=s;t++){let s=n*t+e,o=this._exponentialApproach(i.time,i.value,r,n,s);this.linearRampToValueAtTime(this._toType(o),s)}return this}setValueAtTime(t,e){let n=this.toSeconds(e);super.setValueAtTime(t,e);let r=this._events.get(n),i=this._events.previousEvent(r);return r.ticks=Math.max(this._getTicksUntilEvent(i,n),0),this}linearRampToValueAtTime(t,e){let n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);let r=this._events.get(n),i=this._events.previousEvent(r);return r.ticks=Math.max(this._getTicksUntilEvent(i,n),0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);let n=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max((e-r.time)*10,1)),s=(e-r.time)/i;for(let t=0;t<=i;t++){let i=s*t+r.time,o=this._exponentialInterpolate(r.time,r.value,e,n,i);this.linearRampToValueAtTime(this._toType(o),i)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(nB(t.ticks)){let e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}let n=this._fromType(this.getValueAtTime(t.time)),r=this._fromType(this.getValueAtTime(e)),i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+r)+t.ticks}getTicksAtTime(t){let e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){let n=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-n}getTimeOfTick(t){let e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){let r=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-e.time),s=Math.sqrt(Math.pow(r,2)-2*i*(e.ticks-t)),o=(-r+s)/i;return(o>0?o:(-r-s)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){let n=this.toSeconds(e),r=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){let e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class rW extends rq{constructor(){let t=n7(rW.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new rB({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(rq.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class rz extends rM{constructor(){let t=n7(rz.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new rP,this._tickOffset=new rs,this._ticksAtTime=new rs,this._secondsAtTime=new rs,this.frequency=new rW({context:this.context,units:t.units,value:t.frequency}),rf(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},rM.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){let n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),nW(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){let e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){let t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){let e=this.toSeconds(t),n=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),i={state:"paused",time:e};this._state.add(i);let s=r||n,o=r?r.ticks:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,t=>{let e=s.time,n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(o=n.ticks,e=n.time),"started"===s.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==i.time&&(a={state:t.state,time:t.time,ticks:o})),s=t}),this._state.remove(i),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);let e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let r=this._secondsAtTime.get(t),i=r||e,s=r?r.seconds:0,o=null;return this._state.forEachBetween(i.time,t+this.sampleTime,t=>{let e=i.time,r=this._tickOffset.get(t.time);r&&r.time>=i.time&&(s=r.seconds,e=r.time),"started"===i.state&&"started"!==t.state&&(s+=t.time-e,t.time!==n.time&&(o={state:t.state,time:t.time,seconds:s})),i=t}),this._state.remove(n),o&&this._secondsAtTime.add(o),s}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){let n=this._tickOffset.get(e),r=this._state.get(e),i=Math.max(n.time,r.time),s=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(t,e,n){let r=this._state.get(t);this._state.forEachBetween(t,e,e=>{r&&"started"===r.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(r.time,t),e.time-this.sampleTime,n),r=e});let i=null;if(r&&"started"===r.state){let s=Math.max(r.time,t),o=this.frequency.getTicksAtTime(s),a=o-this.frequency.getTicksAtTime(r.time),u=Math.ceil(a)-a;u=ri(u,1)?0:u;let l=this.frequency.getTimeOfTick(o+u);for(;l<e;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(t){i=t;break}l+=this.frequency.getDurationOfTicks(1,l)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class rG extends rM{constructor(){let t=n7(rG.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=rm,this._lastUpdate=0,this._state=new rP("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new rz({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,rf(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(rM.getDefaults(),{callback:rm,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){nJ(this.context);let n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){let e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){let e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){let n=this.toSeconds(e),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+t,n)}_loop(){let t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":let e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){let e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}rc.mixin(rG);class rH extends rN{constructor(){let t=n7(rH.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new rV({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,rf(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(rN.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class rX extends rN{constructor(){let t=n7(rX.getDefaults(),arguments);super(t),this.name="Destination",this.input=new rH({context:this.context}),this.output=new rV({context:this.context}),this.volume=this.input.volume,rR(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(rN.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),rR(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ra(t=>{t.destination=new rX({context:t})}),rl(t=>{t.destination.dispose()});class rY extends rN{constructor(){super(...arguments),this.name="Listener",this.positionX=new rD({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new rD({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new rD({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new rD({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new rD({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new rD({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new rD({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new rD({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new rD({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(rN.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ra(t=>{t.listener=new rY({context:t})}),rl(t=>{t.listener.dispose()});class r$ extends rt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let t=n7(r$.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;let n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:rm,onload:rm,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return n$(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,n=rm,r=rm){return nX(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new rv(this.baseUrl+e,n,r))):this._buffers.set(t.toString(),new rv(e,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class rZ extends rI{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class rJ extends rM{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new rs,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){let t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ra(t=>{t.draw=new rJ({context:t})}),rl(t=>{t.draw.dispose()});class rQ extends rt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){n$(nW(t.time),"Events must have a time property"),n$(nW(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new rK(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){let e=[];for(let n of(this._root.search(t.time,e),e))if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=t.getBalance(),r=null;if(n>0)if(null===t.left.right)(e=t.left).right=t.right,r=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,r=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,r=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,r=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){let e=t.parent,n=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){let e=t.parent,n=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){let e=t.getBalance();e>1&&t.left?0>t.left.getBalance()?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){let e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){let e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){let n=[];this._root.search(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){let n=[];this._root.searchAfter(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class rK{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){!(t>this.max)&&(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class r0 extends rt{constructor(t){super(),this.name="TimelineValue",this._timeline=new rs({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){let e=this._timeline.get(t);return e?e.value:this._initialValue}}class r1 extends rN{constructor(){super(n7(r1.getDefaults(),arguments,["context"]))}connect(t,e=0,n=0){return rL(this,t,e,n),this}}class r2 extends r1{constructor(){let t=n7(r2.getDefaults(),arguments,["mapping","length"]);(super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,nH(t.mapping)||t.mapping instanceof Float32Array)?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(rq.getDefaults(),{length:1024})}setMap(t,e=1024){let n=new Float32Array(e);for(let r=0;r<e;r++){let i=r/(e-1)*2-1;n[r]=t(i,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){n$(["none","2x","4x"].some(e=>e.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class r8 extends r1{constructor(){let t=n7(r8.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new r2({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(r1.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class r3{constructor(t,e){this.id=r3._eventId++,this._remainderTime=0;let n=Object.assign(r3.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:rm,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){let e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}r3._eventId=0;class r4 extends r3{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let n=Object.assign(r4.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},r3.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return rr(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new rZ(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){rr(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new rZ(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let e=this.transport.getTicksAtTime(t);re(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class r6 extends rM{constructor(){let t=n7(r6.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new r0(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new rs,this._repeatedEvents=new rQ,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new rG({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),rf(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(rM.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){let n=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new rZ(this.context,2*this._swingTicks/3).toSeconds()*n}nQ=!0,this._timeline.forEachAtTime(e,e=>e.invoke(t)),nQ=!1}schedule(t,e){let n=new r3(this,{callback:t,time:new rI(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,r=1/0){let i=new r4(this,{callback:t,duration:new rA(this.context,r).toTicks(),interval:new rA(this.context,e).toTicks(),time:new rI(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){let n=new r3(this,{callback:t,once:!0,time:new rI(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){let e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new rZ(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),nW(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){nH(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new rA(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new rA(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new rZ(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){let t=this.now(),e=this._clock.getTicksAtTime(t);return new rZ(this.context,e).toBarsBeatsSixteenths()}set position(t){let e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){let e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(!this.loop)return 0;{let t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let e=this.now();if("started"===this.state){let n=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e),i=e+r;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{let e=this.now(),n=this.getTicksAtTime(e),r=t-n%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){let n=this.now(),r=this.bpm,i=1/(60/r.getValueAtTime(n)/this.PPQ),s=[];if("time"===t.units){let t=1/64/i,e=new rV(t),n=new r8(-1),o=new rV(t);r.chain(e,n,o),r=o,i=1/i,s=[e,n,o]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/i:0);let o=new rV(e);return r.connect(o),o.connect(t._param),s.push(o),this._syncedSignals.push({initial:t.value,nodes:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){let n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach(t=>t.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),!function t(e,n){nH(n)?n.forEach(n=>t(e,n)):Object.defineProperty(e,n,{writable:!0})}(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}rc.mixin(r6),ra(t=>{t.transport=new r6({context:t})}),rl(t=>{t.transport.dispose()});class r5 extends rN{constructor(t){super(t),this.input=void 0,this._state=new rP("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=rm,this._syncedStop=rm,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new rH({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,rf(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(rN.getDefaults(),{mute:!1,onstop:rm,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let r=nB(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){var i;let t=this._state.get(r);t&&(t.offset=this.toSeconds(nB(i=e)?0:i),t.duration=n?this.toSeconds(n):void 0);let s=this.context.transport.schedule(t=>{this._start(t,e,n)},r);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else nJ(this.context),this._start(r,e,n);else n$(re(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,n);return this}stop(t){let e=nB(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||nW(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){let t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(re(e,0)){let n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){let r,i=e-this.toSeconds(n.time);n.duration&&(r=this.toSeconds(n.duration)-i),this._start(t,this.toSeconds(n.offset)+i,r)}}},this._syncedStop=t=>{let e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=rm,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class r7 extends rF{constructor(){let t=n7(r7.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,rj(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new rD({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new rv(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(rF.getDefaults(),{url:new rv,loop:!1,loopEnd:0,loopStart:0,onload:rm,onerror:rm,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,r=1){var i,s,o;n$(this.buffer.loaded,"buffer is either not set or not loaded");let a=this.toSeconds(t);this._startGain(a,r),e=this.loop?(i=e,s=this.loopStart,nB(i)?s:i):nB(o=e)?0:o;let u=Math.max(this.toSeconds(e),0);if(this.loop){let t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;rn(u,t)&&(u=(u-e)%n+e),ri(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,rr(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,u)),nW(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(a+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function r9(t,e){return n4(this,void 0,void 0,function*(){let n=e/t.context.sampleRate,r=new rg(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class it extends rF{constructor(){let t=n7(it.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],rj(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new rD({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new rD({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),rf(this,["frequency","detune"])}static getDefaults(){return Object.assign(rF.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){let e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ie extends r5{constructor(){let t=n7(ie.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new rq({context:this.context,units:"frequency",value:t.frequency}),rf(this,"frequency"),this.detune=new rq({context:this.context,units:"cents",value:t.detune}),rf(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(r5.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let e=this.toSeconds(t),n=new it({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){let e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){let e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return ie._periodicWaveCache.find(t=>{var e,n;return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every((t,e)=>n[e]===t))});{let t=ie._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{let e=this._getCachedPeriodicWave();if(nW(e)){let{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{let[e,n]=this._getRealImaginary(t,this._phase),r=this.context.createPeriodicWave(e,n);this._wave=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),ie._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),ie._periodicWaveCache.length>100&&ie._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){nZ(t,0);let e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)0===t?this.type=e:this.type=e+t.toString();else{let e=new Float32Array(t);this._partials.forEach((t,n)=>e[n]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048,r=new Float32Array(2048),i=new Float32Array(n),s=1;if("custom"===t){if(s=this._partials.length+1,this._partialCount=this._partials.length,n=s,0===this._partials.length)return[r,i]}else{let e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(s=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],n=s=Math.max(s,2)):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){let n,a=2/(o*Math.PI);switch(t){case"sine":n=+(o<=s),this._partials[o-1]=n;break;case"square":n=1&o?2*a:0,this._partials[o-1]=n;break;case"sawtooth":n=a*(1&o?1:-1),this._partials[o-1]=n;break;case"triangle":n=1&o?a*a*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=n;break;case"custom":n=this._partials[o-1];break;default:throw TypeError("Oscillator: invalid type: "+t)}0!==n?(r[o]=-n*Math.sin(e*o),i[o]=n*Math.cos(e*o)):(r[o]=0,i[o]=0)}return[r,i]}_inverseFFT(t,e,n){let r=0,i=t.length;for(let s=0;s<i;s++)r+=t[s]*Math.cos(s*n)+e[s]*Math.sin(s*n);return r}getInitialValue(){let[t,e]=this._getRealImaginary(this._type,0),n=0,r=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*r),n);return Math.max(Math.min(-this._inverseFFT(t,e,this._phase)/n,1),-1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ie._periodicWaveCache=[];class ir extends r1{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new r2({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ii extends rq{constructor(){let t=n7(ii.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new rV({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(rq.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class is extends r5{constructor(){let t=n7(is.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new ir({context:this.context}),this._modulationNode=new rV({context:this.context}),this._carrier=new ie({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ie({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),rf(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ie.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class io extends r5{constructor(){let t=n7(io.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new rV({context:this.context,gain:0}),this._carrier=new ie({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new rq({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new ie({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new ii({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),rf(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ie.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ia extends r5{constructor(){let t=n7(ia.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new rV({context:this.context,gain:0}),this._thresh=new r2({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new rq({context:this.context,units:"audioRange",value:t.width}),this._triangle=new ie({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),rf(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(r5.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class iu extends r5{constructor(){let t=n7(iu.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new rq({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rq({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,rf(this,["frequency","detune"])}static getDefaults(){return Object.assign(ie.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){let e=-t/2,n=t/(this._oscillators.length-1);this._forEach((t,r)=>t.detune.value=e+n*r)}}get count(){return this._oscillators.length}set count(t){if(nZ(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let e=0;e<t;e++){let n=new ie({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):rm});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,e)=>t.phase=this._phase+e/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class il extends r5{constructor(){let t=n7(il.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ii({context:this.context,value:2}),this._pulse=new ia({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ie({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),rf(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(r5.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let ic={am:is,fat:iu,fm:io,oscillator:ie,pulse:ia,pwm:il};class ih extends r5{constructor(){let t=n7(ih.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new rq({context:this.context,units:"frequency",value:t.frequency}),this.detune=new rq({context:this.context,units:"cents",value:t.detune}),rf(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(ie.getDefaults(),io.getDefaults(),is.getDefaults(),iu.getDefaults(),ia.getDefaults(),il.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let e=ic[t],n=this.now();if(this._oscillator){let t=this._oscillator;t.stop(n),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof ic[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&nz(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&nz(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&nX(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return n4(this,arguments,void 0,function*(t=1024){return r9(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function ip(t,e=1/0){let n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){nZ(r,t,e),n.set(this,r)}})}}function id(t,e=1/0){let n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){nZ(this.toSeconds(r),t,e),n.set(this,r)}})}}class im extends r5{constructor(){let t=n7(im.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new rv({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(r5.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:rm,onerror:rm,playbackRate:1,reverse:!1})}load(t){return n4(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=rm){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){var r,i,s,o,a;e=this._loop?(r=e,i=this._loopStart,nB(r)?i:r):nB(s=e)?0:s;let u=this.toSeconds(e),l=n;o=n,a=Math.max(this._buffer.duration-u,0),n=nB(o)?a:o;let c=this.toSeconds(n);c/=this._playbackRate,t=this.toSeconds(t);let h=new r7({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+c),this._state.setStateAtTime("stopped",t+c,{implicitEnd:!0})),this._activeSources.add(h),this._loop&&nB(l)?h.start(t,u):h.start(t,u,c-this.toSeconds(this.fadeOut))}_stop(t){let e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var r;null==(r=[...this._activeSources].pop())||r.stop(t),this._start(t,e,n)}seek(t,e){let n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){let e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&nZ(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&nZ(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}n3([id(0)],im.prototype,"fadeIn",void 0),n3([id(0)],im.prototype,"fadeOut",void 0);class iv extends rN{constructor(){let t=n7(iv.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new rq({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(rN.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(nX(t))return t;{let n;for(n in ig)if(ig[n][e]===t)return n;return t}}_setCurve(t,e,n){if(nX(n)&&Reflect.has(ig,n)){let r=ig[n];nG(r)?"_decayCurve"!==t&&(this[t]=r[e]):this[t]=r}else if(nH(n)&&"_decayCurve"!==t)this[t]=n;else throw Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack),r=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let r=this._attackCurve;for(let t=1;t<r.length;t++)if(r[t-1]<=i&&i<=r[t]){(r=this._attackCurve.slice(t))[0]=i;break}this._sig.setValueCurveAtTime(r,t,n,e)}if(r&&this.sustain<1){let i=e*this.sustain,s=t+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,r+s):this._sig.exponentialApproachValueAtTime(i,s,r)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);let e=this.getValueAtTime(t);if(e>0){let n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(n$(nH(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return rL(this,t,e,n),this}asArray(){return n4(this,arguments,void 0,function*(t=1024){let e=t/this.context.sampleRate,n=new rg(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),s=.1*i,o=i+s,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(r+s)/o,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}n3([id(0)],iv.prototype,"attack",void 0),n3([id(0)],iv.prototype,"decay",void 0),n3([ip(0,1)],iv.prototype,"sustain",void 0),n3([id(0)],iv.prototype,"release",void 0);let ig=(()=>{let t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));let r=[];for(t=0;t<127;t++){let n=Math.sin(2*Math.PI*(e=t/127)*6.4-Math.PI/2)+1;r[t]=n/10+.83*e}r[127]=1;let i=[];for(t=0;t<128;t++)i[t]=Math.ceil(t/127*5)/5;let s=[];for(t=0;t<128;t++)e=t/127,s[t]=.5*(1-Math.cos(Math.PI*e));let o=[];for(t=0;t<128;t++){let n=Math.cos((4*Math.pow(e=t/127,3)+.2)*Math.PI*2*e);o[t]=Math.abs(n*(1-e))}function a(t){let e=Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:a(o),Out:o},cosine:{In:n,Out:n.slice(0).reverse()},exponential:"exponential",linear:"linear",ripple:{In:r,Out:a(r)},sine:{In:s,Out:a(s)},step:{In:i,Out:a(i)}}})();class iy extends rN{constructor(){let t=n7(iy.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new rH({context:this.context,volume:t.volume}),this.volume=this._volume.volume,rf(this,"volume")}static getDefaults(){return Object.assign(rN.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){let n=this["_original_"+t]=this[t];this[t]=(...t)=>{let r=t[e],i=this.context.transport.schedule(r=>{t[e]=r,n.apply(this,t)},r);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,r){let i=this.toSeconds(n),s=this.toSeconds(e);return this.triggerAttack(t,i,r),this.triggerRelease(i+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class i_ extends iy{constructor(){let t=n7(i_.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(iy.getDefaults(),{detune:0,onsilence:rm,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);let r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,n),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);let e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){let n=this.toSeconds(e),r=t instanceof rC?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){let t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,t,n)}else this.frequency.setValueAtTime(r,n);return this}}n3([id(0)],i_.prototype,"portamento",void 0);class ib extends iv{constructor(){super(n7(ib.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new rV({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class iw extends i_{constructor(){let t=n7(iw.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new ih(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ib(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),rf(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(i_.getDefaults(),{envelope:Object.assign(n9(iv.getDefaults(),Object.keys(rN.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(n9(ih.getDefaults(),[...Object.keys(r5.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){let e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class iT extends iw{constructor(){let t=n7(iT.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,rf(this,["oscillator","envelope"])}static getDefaults(){return n5(i_.getDefaults(),iw.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){let n=this.toSeconds(e),r=this.toFrequency(t instanceof rC?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}n3([ip(0)],iT.prototype,"octaves",void 0),n3([id(0)],iT.prototype,"pitchDecay",void 0);let ix=new Set;function ik(t,e){let n=`registerProcessor("${t}", ${e})`;ix.add(n)}u=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`,ix.add(u),l=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`,ix.add(l),c=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`,ix.add(c),ik("feedback-comb-filter",`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class iS extends iy{constructor(){let t=n7(iS.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;let e={};Object.keys(t.urls).forEach(n=>{let r=parseInt(n,10);n$(nY(n)||nz(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),nY(n)?e[new rC(this.context,n).toMidi()]=t.urls[n]:nz(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new r$({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(iy.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:rm,onerror:rm,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(t=>{let r=rk(new rC(this.context,t).toFrequency()),i=Math.round(r),s=r-i,o=this._findClosest(i),a=i-o,u=this._buffers.get(a),l=rw(o+s),c=new r7({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:l}).connect(this.output);c.start(e,0,u.duration/l,n),nH(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){let t=this._activeSources.get(i),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(t=>{let n=new rC(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){let t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach(t=>{t.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){let e=this.toSeconds(t);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,r=1){let i=this.toSeconds(n);return this.triggerAttack(t,i,r),nH(e)?(n$(nH(t),"notes must be an array when duration is array"),t.forEach((t,n)=>{let r=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(r))})):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(n$(nY(t)||isFinite(t),`note must be a pitch or midi: ${t}`),nY(t)){let r=new rC(this.context,t).toMidi();this._buffers.add(r,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}n3([id(0)],iS.prototype,"attack",void 0),n3([id(0)],iS.prototype,"release",void 0);class iA extends rN{constructor(){let t=n7(iA.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new rD({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",rf(this,"pan")}static getDefaults(){return Object.assign(rN.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}ik("bit-crusher",`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class iC extends rN{constructor(){let t=n7(iC.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new rV({context:this.context}),iC._allSolos.has(this.context)||iC._allSolos.set(this.context,new Set),iC._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(rN.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),iC._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){iC._soloed.has(this.context)||iC._soloed.set(this.context,new Set),iC._soloed.get(this.context).add(this)}_removeSolo(){iC._soloed.has(this.context)&&iC._soloed.get(this.context).delete(this)}_isSoloed(){return iC._soloed.has(this.context)&&iC._soloed.get(this.context).has(this)}_noSolos(){return!iC._soloed.has(this.context)||iC._soloed.has(this.context)&&0===iC._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),iC._allSolos.get(this.context).delete(this),this._removeSolo(),this}}iC._allSolos=new Map,iC._soloed=new Map;class iO extends rN{constructor(){let t=n7(iO.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new iA({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new rH({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,rf(this,["pan","volume"])}static getDefaults(){return Object.assign(rN.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class iE extends rN{constructor(){let t=n7(iE.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new iC({solo:t.solo,context:this.context}),this._panVol=this.output=new iO({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),rf(this,["pan","volume"])}static getDefaults(){return Object.assign(rN.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return iE.buses.has(t)||iE.buses.set(t,new rV({context:this.context})),iE.buses.get(t)}send(t,e=0){let n=this._getBus(t),r=new rV({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(n),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}iE.buses=new Map,rb().transport,rb().destination,rb().destination,rb().listener,rb().draw,rb()},6379:(t,e)=>{"use strict";function n(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0;var r=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var r=t.exec(n),i=r[1],s=r[2];return e[i.toLowerCase()]+(parseInt(s,10)+1)*12}}(),i=new WeakMap;e.Note=function(){function t(t,e,n){i.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){var t,e;return e=Math.floor((t=this.midi)/12)-1,n(t)+e.toString()},set:function(t){this.midi=r(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return n(this.midi)},set:function(t){this.midi=12*(this.octave+1)+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=i.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=i.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return i.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=i.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){return i.get(this).ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}()},6403:(t,e,n)=>{"use strict";var r=n(7516),i=n(38312),s=n(82586),o=n(83914),a=n(72740);function u(t,e,n){return a(o(s(i(r(t,e,n)))))}t.exports&&(t.exports=u),"undefined"!=typeof window&&(window.SamplePlayer=u)},6422:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n="ticks");var r=0,i=t.length,s=i;if(i>0&&t[i-1][n]<=e)return i-1;for(;r<s;){var o=Math.floor(r+(s-r)/2),a=t[o],u=t[o+1];if(a[n]===e){for(var l=o;l<t.length;l++)t[l][n]===e&&(o=l);return o}if(a[n]<e&&u[n]>e)return o;a[n]>e?s=o:a[n]<e&&(r=o+1)}return -1}Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.search=void 0,e.search=n,e.insert=function(t,e,r){if(void 0===r&&(r="ticks"),t.length){var i=n(t,e[r],r);t.splice(i+1,0,e)}else t.push(e)}},7162:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},7516:(t,e,n)=>{"use strict";var r=n(79603),i={},s={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function o(t){return"number"==typeof t}var a=["attack","decay","sustain","release"];t.exports=function(t,e,n){var u=!1,l=0,c={},h=t.createGain();h.gain.value=1;var p=Object.assign({},s,n),d={context:t,out:h,opts:p};return e instanceof AudioBuffer?d.buffer=e:d.buffers=e,d.start=function(e,n,s){if(d.buffer&&null!==e)return d.start(null,e,n);var f,m,v,g,y,b,w,T,x,k,S,A,C=e?d.buffers[e]:d.buffer;if(!C)return void console.warn("Buffer "+e+" not found.");if(!u)return void console.warn("SamplePlayer not connected to any node.");var O=s||i;n=Math.max(t.currentTime,n||0),d.emit("start",n,e,O);var E=(f=e,m=C,v=O,(g=t.createGain()).gain.value=0,g.connect(h),y=t,b=v,w=p,T=r(y),x=b.adsr||w.adsr,a.forEach(function(t,e){x?T[t]=x[e]:T[t]=b[t]||w[t]}),T.value.value=o(b.gain)?b.gain:o(w.gain)?w.gain:1,g.env=T,g.env.connect(g.gain),g.source=t.createBufferSource(),g.source.buffer=m,g.source.connect(g),g.source.loop=v.loop||p.loop,g.source.playbackRate.value=(k=v.cents||p.cents)?Math.pow(2,k/1200):1,g.source.loopStart=v.loopStart||p.loopStart,g.source.loopEnd=v.loopEnd||p.loopEnd,g.stop=function(e){var n=e||t.currentTime;d.emit("stop",n,f);var r=g.env.stop(n);g.source.stop(r)},g);return S=0,(A=E).id=l++,c[A.id]=A,A.source.onended=function(){var e=t.currentTime;A.source.disconnect(),A.env.disconnect(),A.disconnect(),d.emit("ended",e,A.id,A)},E.id=A.id,E.env.start(n),E.source.start(n),d.emit("started",n,E.id,E),O.duration&&E.stop(n+O.duration),E},d.play=function(t,e,n){return d.start(t,e,n)},d.stop=function(t,e){var n;return(e=e||Object.keys(c)).map(function(e){return(n=c[e])?(n.stop(t),n.id):null})},d.connect=function(t){return u=!0,h.connect(t),d},d.emit=function(t,e,n,r){d.onevent&&d.onevent(t,e,n,r);var i=d["on"+t];i&&i(e,n,r)},d}},12883:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},17203:(t,e,n)=>{"use strict";var r=n(29563);e.A=void 0;var i=r(n(59628)),s=n(37876);e.A=(0,i.default)((0,s.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown")},18758:(t,e,n)=>{var r=n(31365);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},19120:(t,e,n)=>{"use strict";var r=n(29563);e.A=void 0;var i=r(n(59628)),s=n(37876);e.A=(0,i.default)((0,s.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-1 9H9V9h10zm-4 4H9v-2h6zm4-8H9V5h10z"}),"LibraryBooks")},22591:(t,e,n)=>{"use strict";function r(t,e){return Array(e+1).join(t)}function i(t){return"number"==typeof t}function s(t,e){return Math.pow(2,(t-69)/12)*(e||440)}n.r(e),n.d(e,{acc:()=>d,alt:()=>v,build:()=>function t(e,n,s){return null==e?null:e.step?t(e.step,e.alt,e.oct):e<0||e>6?null:"CDEFGAB".charAt(e)+(i(n)?n<0?r("b",-n):r("#",n):"")+(i(s)?""+s:"")},chroma:()=>g,freq:()=>h,letter:()=>p,midi:()=>c,oct:()=>y,parse:()=>l,pc:()=>f,regex:()=>a,step:()=>m});var o=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function a(){return o}var u=[0,2,4,5,7,9,11];function l(t,e,n){if("string"!=typeof t)return null;var r=o.exec(t);if(!r||!e&&r[4])return null;var i={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length;var a=u[i.step]+i.alt;return i.chroma=a<0?12+a:a%12,r[3]&&(i.oct=+r[3],i.midi=a+12*(i.oct+1),i.freq=s(i.midi,n)),e&&(i.tonicOf=r[4]),i}function c(t){if((i(t)||"string"==typeof t)&&t>=0&&t<128)return+t;var e=l(t);return e&&void 0!==e.midi?e.midi:null}function h(t,e){var n=c(t);return null===n?null:s(n,e)}function p(t){return(l(t)||{}).letter}function d(t){return(l(t)||{}).acc}function f(t){return(l(t)||{}).pc}function m(t){return(l(t)||{}).step}function v(t){return(l(t)||{}).alt}function g(t){return(l(t)||{}).chroma}function y(t){return(l(t)||{}).oct}},22642:t=>{function e(){this.buffer=[]}e.prototype.writeUInt8=function(t){this.buffer.push(255&t)},e.prototype.writeInt8=e.prototype.writeUInt8,e.prototype.writeUInt16=function(t){this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt16=e.prototype.writeUInt16,e.prototype.writeUInt24=function(t){this.writeUInt8(t>>16&255),this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt24=e.prototype.writeUInt24,e.prototype.writeUInt32=function(t){this.writeUInt8(t>>24&255),this.writeUInt8(t>>16&255),this.writeUInt8(t>>8&255),this.writeUInt8(255&t)},e.prototype.writeInt32=e.prototype.writeUInt32,e.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},e.prototype.writeString=function(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r.push(t.codePointAt(e));this.writeBytes(r)},e.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(127&e),e>>=7;e;){var r=127&e|128;n.push(r),e>>=7}this.writeBytes(n.reverse())}},e.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},t.exports=function(t,n){if("object"!=typeof t)throw"Invalid MIDI data";n=n||{};var r,i,s,o,a,u,l,c=t.header||{},h=t.tracks||[],p=h.length,d=new e;for(r=d,i=c,s=p,o=null==i.format?1:i.format,a=128,i.timeDivision?a=i.timeDivision:i.ticksPerFrame&&i.framesPerSecond?a=-(255&i.framesPerSecond)<<8|255&i.ticksPerFrame:i.ticksPerBeat&&(a=32767&i.ticksPerBeat),(u=new e).writeUInt16(o),u.writeUInt16(s),u.writeUInt16(a),r.writeChunk("MThd",u.buffer),l=0;l<p;l++)!function(t,n,r){var i,s=new e,o=n.length,a=null;for(i=0;i<o;i++)!1!==r.running&&(r.running||n[i].running)||(a=null),a=function(t,e,n,r){var i=e.type,s=e.deltaTime,o=e.text||"",a=e.data||[],u=null;switch(t.writeVarInt(s),i){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(o.length),t.writeString(o);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(o.length),t.writeString(o);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(o.length),t.writeString(o);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(o.length),t.writeString(o);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(o.length),t.writeString(o);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(o.length),t.writeString(o);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(o.length),t.writeString(o);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var l=31&e.hour|({24:0,25:32,29:64,30:96})[e.frameRate];t.writeUInt8(l),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var c=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(c),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(a.length),t.writeBytes(a);break;case"unknownMeta":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(a.length),t.writeBytes(a));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(a.length),t.writeBytes(a);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(a.length),t.writeBytes(a);break;case"noteOff":(u=(!1!==r&&e.byte9||r&&0==e.velocity?144:128)|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":(u=144|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":(u=160|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":(u=176|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":(u=192|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.programNumber);break;case"channelAftertouch":(u=208|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.amount);break;case"pitchBend":(u=224|e.channel)!==n&&t.writeUInt8(u);var h=8192+e.value;t.writeUInt8(127&h),t.writeUInt8(h>>7&127);break;default:throw"Unrecognized event type: "+i}return u}(s,n[i],a,r.useByte9ForNoteOff);t.writeChunk("MTrk",s.buffer)}(d,h[l],n);return d.buffer}},24287:function(t,e,n){(function(t){let e;function r(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o={exports:{}},a=function(t){return t&&t.Math===Math&&t},u=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof i&&i)||function(){return this}()||i||Function("return this")(),l=function(t){try{return!!t()}catch(t){return!0}},c=!l(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),h=Function.prototype,p=h.apply,d=h.call,f="object"==typeof Reflect&&Reflect.apply||(c?d.bind(p):function(){return d.apply(p,arguments)}),m=Function.prototype,v=m.call,g=c&&m.bind.bind(v,v),y=c?g:function(t){return function(){return v.apply(t,arguments)}},b=y({}.toString),w=y("".slice),T=function(t){return w(b(t),8,-1)},x=function(t){if("Function"===T(t))return y(t)},k="object"==typeof document&&document.all,S={all:k,IS_HTMLDDA:void 0===k&&void 0!==k},A=S.all,C=S.IS_HTMLDDA?function(t){return"function"==typeof t||t===A}:function(t){return"function"==typeof t},O={},E=!l(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}),I=Function.prototype.call,M=c?I.bind(I):function(){return I.apply(I,arguments)},P={},D={}.propertyIsEnumerable,N=Object.getOwnPropertyDescriptor;P.f=N&&!D.call({1:2},1)?function(t){var e=N(this,t);return!!e&&e.enumerable}:D;var R,j,V=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},F=Object,U=y("".split),q=l(function(){return!F("z").propertyIsEnumerable(0)})?function(t){return"String"===T(t)?U(t,""):F(t)}:F,L=function(t){return null==t},B=TypeError,W=function(t){if(L(t))throw new B("Can't call method on "+t);return t},z=function(t){return q(W(t))},G=S.all,H=S.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:C(t)||t===G}:function(t){return"object"==typeof t?null!==t:C(t)},X={},Y=function(t){return C(t)?t:void 0},$=function(t,e){return arguments.length<2?Y(X[t])||Y(u[t]):X[t]&&X[t][e]||u[t]&&u[t][e]},Z=y({}.isPrototypeOf),J="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Q=u.process,K=u.Deno,tt=Q&&Q.versions||K&&K.version,te=tt&&tt.v8;te&&(j=(R=te.split("."))[0]>0&&R[0]<4?1:+(R[0]+R[1])),!j&&J&&(!(R=J.match(/Edge\/(\d+)/))||R[1]>=74)&&(R=J.match(/Chrome\/(\d+)/))&&(j=+R[1]);var tn=j,tr=u.String,ti=!!Object.getOwnPropertySymbols&&!l(function(){var t=Symbol("symbol detection");return!tr(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&tn&&tn<41}),ts=ti&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,to=Object,ta=ts?function(t){return"symbol"==typeof t}:function(t){var e=$("Symbol");return C(e)&&Z(e.prototype,to(t))},tu=String,tl=function(t){try{return tu(t)}catch(t){return"Object"}},tc=TypeError,th=function(t){if(C(t))return t;throw new tc(tl(t)+" is not a function")},tp=function(t,e){var n=t[e];return L(n)?void 0:th(n)},td=TypeError,tf={exports:{}},tm=Object.defineProperty,tv="__core-js_shared__",tg=u[tv]||function(t,e){try{tm(u,t,{value:e,configurable:!0,writable:!0})}catch(n){u[t]=e}return e}(tv,{});(tf.exports=function(t,e){return tg[t]||(tg[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.2",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var ty=tf.exports,t_=Object,tb=function(t){return t_(W(t))},tw=y({}.hasOwnProperty),tT=Object.hasOwn||function(t,e){return tw(tb(t),e)},tx=0,tk=Math.random(),tS=y(1..toString),tA=function(t){return"Symbol("+(void 0===t?"":t)+")_"+tS(++tx+tk,36)},tC=u.Symbol,tO=ty("wks"),tE=ts?tC.for||tC:tC&&tC.withoutSetter||tA,tI=function(t){return tT(tO,t)||(tO[t]=ti&&tT(tC,t)?tC[t]:tE("Symbol."+t)),tO[t]},tM=function(t,e){var n,r;if("string"===e&&C(n=t.toString)&&!H(r=M(n,t))||C(n=t.valueOf)&&!H(r=M(n,t))||"string"!==e&&C(n=t.toString)&&!H(r=M(n,t)))return r;throw new td("Can't convert object to primitive value")},tP=TypeError,tD=tI("toPrimitive"),tN=function(t,e){if(!H(t)||ta(t))return t;var n,r=tp(t,tD);if(r){if(void 0===e&&(e="default"),!H(n=M(r,t,e))||ta(n))return n;throw new tP("Can't convert object to primitive value")}return void 0===e&&(e="number"),tM(t,e)},tR=function(t){var e=tN(t,"string");return ta(e)?e:e+""},tj=u.document,tV=H(tj)&&H(tj.createElement),tF=function(t){return tV?tj.createElement(t):{}},tU=!E&&!l(function(){return 7!==Object.defineProperty(tF("div"),"a",{get:function(){return 7}}).a}),tq=Object.getOwnPropertyDescriptor;O.f=E?tq:function(t,e){if(t=z(t),e=tR(e),tU)try{return tq(t,e)}catch(t){}if(tT(t,e))return V(!M(P.f,t,e),t[e])};var tL=/#|\.prototype\./,tB=function(t,e){var n=tz[tW(t)];return n===tH||n!==tG&&(C(e)?l(e):!!e)},tW=tB.normalize=function(t){return String(t).replace(tL,".").toLowerCase()},tz=tB.data={},tG=tB.NATIVE="N",tH=tB.POLYFILL="P",tX=x(x.bind),tY=function(t,e){return th(t),void 0===e?t:c?tX(t,e):function(){return t.apply(e,arguments)}},t$={},tZ=E&&l(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),tJ=String,tQ=TypeError,tK=function(t){if(H(t))return t;throw new tQ(tJ(t)+" is not an object")},t0=TypeError,t1=Object.defineProperty,t2=Object.getOwnPropertyDescriptor,t8="enumerable",t3="configurable",t4="writable";t$.f=E?tZ?function(t,e,n){if(tK(t),e=tR(e),tK(n),"function"==typeof t&&"prototype"===e&&"value"in n&&t4 in n&&!n[t4]){var r=t2(t,e);r&&r[t4]&&(t[e]=n.value,n={configurable:t3 in n?n[t3]:r[t3],enumerable:t8 in n?n[t8]:r[t8],writable:!1})}return t1(t,e,n)}:t1:function(t,e,n){if(tK(t),e=tR(e),tK(n),tU)try{return t1(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new t0("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var t6=E?function(t,e,n){return t$.f(t,e,V(1,n))}:function(t,e,n){return t[e]=n,t},t5=O.f,t7=function(t){var e=function(n,r,i){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,i)}return f(t,this,arguments)};return e.prototype=t.prototype,e},t9=function(t,e){var n,r,i,s,o,a,l,c,h,p=t.target,d=t.global,f=t.stat,m=t.proto,v=d?u:f?u[p]:(u[p]||{}).prototype,g=d?X:X[p]||t6(X,p,{})[p],y=g.prototype;for(s in e)r=!(n=tB(d?s:p+(f?".":"#")+s,t.forced))&&v&&tT(v,s),a=g[s],r&&(l=t.dontCallGetSet?(h=t5(v,s))&&h.value:v[s]),o=r&&l?l:e[s],r&&typeof a==typeof o||(c=t.bind&&r?tY(o,u):t.wrap&&r?t7(o):m&&C(o)?x(o):o,(t.sham||o&&o.sham||a&&a.sham)&&t6(c,"sham",!0),t6(g,s,c),m&&(tT(X,i=p+"Prototype")||t6(X,i,{}),t6(X[i],s,o),t.real&&y&&(n||!y[s])&&t6(y,s,o)))},et=t$.f;t9({target:"Object",stat:!0,forced:Object.defineProperty!==et,sham:!E},{defineProperty:et});var ee=X.Object,en=o.exports=function(t,e,n){return ee.defineProperty(t,e,n)};ee.defineProperty.sham&&(en.sham=!0);var er=o.exports,ei=s(er),es=Array.isArray||function(t){return"Array"===T(t)},eo=Math.ceil,ea=Math.floor,eu=Math.trunc||function(t){var e=+t;return(e>0?ea:eo)(e)},el=function(t){var e=+t;return e!=e||0===e?0:eu(e)},ec=Math.min,eh=function(t){var e;return(e=t.length)>0?ec(el(e),0x1fffffffffffff):0},ep=TypeError,ed=function(t){if(t>0x1fffffffffffff)throw ep("Maximum allowed index exceeded");return t},ef=function(t,e,n){var r=tR(e);r in t?t$.f(t,r,V(0,n)):t[r]=n},em={};em[tI("toStringTag")]="z";var ev="[object z]"===String(em),eg=tI("toStringTag"),ey=Object,e_="Arguments"===T(function(){return arguments}()),eb=ev?T:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=ey(t),eg))?n:e_?T(e):"Object"===(r=T(e))&&C(e.callee)?"Arguments":r},ew=y(Function.toString);C(tg.inspectSource)||(tg.inspectSource=function(t){return ew(t)});var eT=tg.inspectSource,ex=function(){},ek=[],eS=$("Reflect","construct"),eA=/^\s*(?:class|function)\b/,eC=y(eA.exec),eO=!eA.test(ex),eE=function(t){if(!C(t))return!1;try{return eS(ex,ek,t),!0}catch(t){return!1}},eI=function(t){if(!C(t))return!1;switch(eb(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return eO||!!eC(eA,eT(t))}catch(t){return!0}};eI.sham=!0;var eM=!eS||l(function(){var t;return eE(eE.call)||!eE(Object)||!eE(function(){t=!0})||t})?eI:eE,eP=tI("species"),eD=Array,eN=function(t){var e;return es(t)&&(eM(e=t.constructor)&&(e===eD||es(e.prototype))||H(e)&&null===(e=e[eP]))&&(e=void 0),void 0===e?eD:e},eR=function(t,e){return new(eN(t))(0===e?0:e)},ej=tI("species"),eV=function(t){return tn>=51||!l(function(){var e=[];return(e.constructor={})[ej]=function(){return{foo:1}},1!==e[t](Boolean).foo})},eF=tI("isConcatSpreadable"),eU=tn>=51||!l(function(){var t=[];return t[eF]=!1,t.concat()[0]!==t}),eq=function(t){if(!H(t))return!1;var e=t[eF];return void 0!==e?!!e:es(t)};t9({target:"Array",proto:!0,arity:1,forced:!eU||!eV("concat")},{concat:function(t){var e,n,r,i,s,o=tb(this),a=eR(o,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(eq(s=-1===e?o:arguments[e]))for(ed(u+(i=eh(s))),n=0;n<i;n++,u++)n in s&&ef(a,u,s[n]);else ed(u+1),ef(a,u++,s);return a.length=u,a}});var eL=String,eB=function(t){if("Symbol"===eb(t))throw TypeError("Cannot convert a Symbol value to a string");return eL(t)},eW={},ez=Math.max,eG=Math.min,eH=function(t,e){var n=el(t);return n<0?ez(n+e,0):eG(n,e)},eX=function(t){return function(e,n,r){var i,s=z(e),o=eh(s),a=eH(r,o);if(t&&n!=n){for(;o>a;)if((i=s[a++])!=i)return!0}else for(;o>a;a++)if((t||a in s)&&s[a]===n)return t||a||0;return!t&&-1}},eY={includes:eX(!0),indexOf:eX(!1)},e$={},eZ=eY.indexOf,eJ=y([].push),eQ=function(t,e){var n,r=z(t),i=0,s=[];for(n in r)!tT(e$,n)&&tT(r,n)&&eJ(s,n);for(;e.length>i;)tT(r,n=e[i++])&&(~eZ(s,n)||eJ(s,n));return s},eK=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],e0=Object.keys||function(t){return eQ(t,eK)};eW.f=E&&!tZ?Object.defineProperties:function(t,e){tK(t);for(var n,r=z(e),i=e0(e),s=i.length,o=0;s>o;)t$.f(t,n=i[o++],r[n]);return t};var e1,e2=$("document","documentElement"),e8=ty("keys"),e3=function(t){return e8[t]||(e8[t]=tA(t))},e4="prototype",e6="script",e5=e3("IE_PROTO"),e7=function(){},e9=function(t){return"<"+e6+">"+t+"</"+e6+">"},nt=function(t){t.write(e9("")),t.close();var e=t.parentWindow.Object;return t=null,e},ne=function(){try{e1=new ActiveXObject("htmlfile")}catch(t){}ne="undefined"!=typeof document?document.domain&&e1?nt(e1):(e=tF("iframe"),n="java"+e6+":",e.style.display="none",e2.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(e9("document.F=Object")),t.close(),t.F):nt(e1);for(var t,e,n,r=eK.length;r--;)delete ne[e4][eK[r]];return ne()};e$[e5]=!0;var nn=Object.create||function(t,e){var n;return null!==t?(e7[e4]=tK(t),n=new e7,e7[e4]=null,n[e5]=t):n=ne(),void 0===e?n:eW.f(n,e)},nr={},ni=eK.concat("length","prototype");nr.f=Object.getOwnPropertyNames||function(t){return eQ(t,ni)};var ns={},no=Array,na=Math.max,nu=function(t,e,n){for(var r=eh(t),i=eH(e,r),s=eH(void 0===n?r:n,r),o=no(na(s-i,0)),a=0;i<s;i++,a++)ef(o,a,t[i]);return o.length=a,o},nl=nr.f,nc="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ns.f=function(t){return nc&&"Window"===T(t)?function(t){try{return nl(t)}catch(t){return nu(nc)}}(t):nl(z(t))};var nh={};nh.f=Object.getOwnPropertySymbols;var np=function(t,e,n,r){return r&&r.enumerable?t[e]=n:t6(t,e,n),t},nd=function(t,e,n){return t$.f(t,e,n)},nf={};nf.f=tI;var nm,nv,ng,ny=t$.f,n_=function(t){var e=X.Symbol||(X.Symbol={});tT(e,t)||ny(e,t,{value:nf.f(t)})},nb=function(){var t=$("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,r=tI("toPrimitive");e&&!e[r]&&np(e,r,function(t){return M(n,this)},{arity:1})},nw=t$.f,nT=ev?({}).toString:function(){return"[object "+eb(this)+"]"},nx=tI("toStringTag"),nk=function(t,e,n,r){if(t){var i=n?t:t.prototype;tT(i,nx)||nw(i,nx,{configurable:!0,value:e}),r&&!ev&&t6(i,"toString",nT)}},nS=u.WeakMap,nA=C(nS)&&/native code/.test(String(nS)),nC="Object already initialized",nO=u.TypeError,nE=u.WeakMap;if(nA||tg.state){var nI=tg.state||(tg.state=new nE);nI.get=nI.get,nI.has=nI.has,nI.set=nI.set,nm=function(t,e){if(nI.has(t))throw new nO(nC);return e.facade=t,nI.set(t,e),e},nv=function(t){return nI.get(t)||{}},ng=function(t){return nI.has(t)}}else{var nM=e3("state");e$[nM]=!0,nm=function(t,e){if(tT(t,nM))throw new nO(nC);return e.facade=t,t6(t,nM,e),e},nv=function(t){return tT(t,nM)?t[nM]:{}},ng=function(t){return tT(t,nM)}}var nP=nm,nD=function(t){return function(e){var n;if(!H(e)||(n=nv(e)).type!==t)throw new nO("Incompatible receiver, "+t+" required");return n}},nN=y([].push),nR=function(t){var e=1===t,n=2===t,r=3===t,i=4===t,s=6===t,o=7===t,a=5===t||s;return function(u,l,c,h){for(var p,d,f=tb(u),m=q(f),v=tY(l,c),g=eh(m),y=0,b=h||eR,w=e?b(u,g):n||o?b(u,0):void 0;g>y;y++)if((a||y in m)&&(d=v(p=m[y],y,f),t))if(e)w[y]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return y;case 2:nN(w,p)}else switch(t){case 4:return!1;case 7:nN(w,p)}return s?-1:r||i?i:w}},nj={forEach:nR(0),map:nR(1),filter:nR(2),some:nR(3),every:nR(4),find:nR(5),findIndex:nR(6),filterReject:nR(7)},nV=nj.forEach,nF=e3("hidden"),nU="Symbol",nq="prototype",nL=nD(nU),nB=Object[nq],nW=u.Symbol,nz=nW&&nW[nq],nG=u.RangeError,nH=u.TypeError,nX=u.QObject,nY=O.f,n$=t$.f,nZ=ns.f,nJ=P.f,nQ=y([].push),nK=ty("symbols"),n0=ty("op-symbols"),n1=ty("wks"),n2=!nX||!nX[nq]||!nX[nq].findChild,n8=function(t,e,n){var r=nY(nB,e);r&&delete nB[e],n$(t,e,n),r&&t!==nB&&n$(nB,e,r)},n3=E&&l(function(){return 7!==nn(n$({},"a",{get:function(){return n$(this,"a",{value:7}).a}})).a})?n8:n$,n4=function(t,e){var n=nK[t]=nn(nz);return nP(n,{type:nU,tag:t,description:e}),E||(n.description=e),n},n6=function(t,e,n){t===nB&&n6(n0,e,n),tK(t);var r=tR(e);return tK(n),tT(nK,r)?(n.enumerable?(tT(t,nF)&&t[nF][r]&&(t[nF][r]=!1),n=nn(n,{enumerable:V(0,!1)})):(tT(t,nF)||n$(t,nF,V(1,{})),t[nF][r]=!0),n3(t,r,n)):n$(t,r,n)},n5=function(t,e){tK(t);var n=z(e);return nV(e0(n).concat(re(n)),function(e){E&&!M(n7,n,e)||n6(t,e,n[e])}),t},n7=function(t){var e=tR(t),n=M(nJ,this,e);return!(this===nB&&tT(nK,e)&&!tT(n0,e))&&(!(n||!tT(this,e)||!tT(nK,e)||tT(this,nF)&&this[nF][e])||n)},n9=function(t,e){var n=z(t),r=tR(e);if(n!==nB||!tT(nK,r)||tT(n0,r)){var i=nY(n,r);return!i||!tT(nK,r)||tT(n,nF)&&n[nF][r]||(i.enumerable=!0),i}},rt=function(t){var e=nZ(z(t)),n=[];return nV(e,function(t){tT(nK,t)||tT(e$,t)||nQ(n,t)}),n},re=function(t){var e=t===nB,n=nZ(e?n0:z(t)),r=[];return nV(n,function(t){tT(nK,t)&&(!e||tT(nB,t))&&nQ(r,nK[t])}),r};ti||(np(nz=(nW=function(){if(Z(nz,this))throw new nH("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?eB(arguments[0]):void 0,e=tA(t),n=function(t){var r=void 0===this?u:this;r===nB&&M(n,n0,t),tT(r,nF)&&tT(r[nF],e)&&(r[nF][e]=!1);var i=V(1,t);try{n3(r,e,i)}catch(t){if(!(t instanceof nG))throw t;n8(r,e,i)}};return E&&n2&&n3(nB,e,{configurable:!0,set:n}),n4(e,t)})[nq],"toString",function(){return nL(this).tag}),np(nW,"withoutSetter",function(t){return n4(tA(t),t)}),P.f=n7,t$.f=n6,eW.f=n5,O.f=n9,nr.f=ns.f=rt,nh.f=re,nf.f=function(t){return n4(tI(t),t)},E&&nd(nz,"description",{configurable:!0,get:function(){return nL(this).description}})),t9({global:!0,constructor:!0,wrap:!0,forced:!ti,sham:!ti},{Symbol:nW}),nV(e0(n1),function(t){n_(t)}),t9({target:nU,stat:!0,forced:!ti},{useSetter:function(){n2=!0},useSimple:function(){n2=!1}}),t9({target:"Object",stat:!0,forced:!ti,sham:!E},{create:function(t,e){return void 0===e?nn(t):n5(nn(t),e)},defineProperty:n6,defineProperties:n5,getOwnPropertyDescriptor:n9}),t9({target:"Object",stat:!0,forced:!ti},{getOwnPropertyNames:rt}),nb(),nk(nW,nU),e$[nF]=!0;var rn=ti&&!!Symbol.for&&!!Symbol.keyFor,rr=ty("string-to-symbol-registry"),ri=ty("symbol-to-string-registry");t9({target:"Symbol",stat:!0,forced:!rn},{for:function(t){var e=eB(t);if(tT(rr,e))return rr[e];var n=$("Symbol")(e);return rr[e]=n,ri[n]=e,n}});var rs=ty("symbol-to-string-registry");t9({target:"Symbol",stat:!0,forced:!rn},{keyFor:function(t){if(!ta(t))throw TypeError(tl(t)+" is not a symbol");if(tT(rs,t))return rs[t]}});var ro=y([].slice),ra=y([].push),ru=function(t){if(C(t))return t;if(es(t)){for(var e=t.length,n=[],r=0;r<e;r++){var i=t[r];"string"==typeof i?ra(n,i):"number"!=typeof i&&"Number"!==T(i)&&"String"!==T(i)||ra(n,eB(i))}var s=n.length,o=!0;return function(t,e){if(o)return o=!1,e;if(es(this))return e;for(var r=0;r<s;r++)if(n[r]===t)return e}}},rl=String,rc=$("JSON","stringify"),rh=y(/./.exec),rp=y("".charAt),rd=y("".charCodeAt),rf=y("".replace),rm=y(1..toString),rv=/[\uD800-\uDFFF]/g,rg=/^[\uD800-\uDBFF]$/,ry=/^[\uDC00-\uDFFF]$/,r_=!ti||l(function(){var t=$("Symbol")("stringify detection");return"[null]"!==rc([t])||"{}"!==rc({a:t})||"{}"!==rc(Object(t))}),rb=l(function(){return'"\udf06\ud834"'!==rc("\udf06\ud834")||'"\udead"'!==rc("\udead")}),rw=function(t,e){var n=ro(arguments),r=ru(e);if(C(r)||void 0!==t&&!ta(t))return n[1]=function(t,e){if(C(r)&&(e=M(r,this,rl(t),e)),!ta(e))return e},f(rc,null,n)},rT=function(t,e,n){var r=rp(n,e-1),i=rp(n,e+1);return rh(rg,t)&&!rh(ry,i)||rh(ry,t)&&!rh(rg,r)?"\\u"+rm(rd(t,0),16):t};rc&&t9({target:"JSON",stat:!0,arity:3,forced:r_||rb},{stringify:function(t,e,n){var r=ro(arguments),i=f(r_?rw:rc,null,r);return rb&&"string"==typeof i?rf(i,rv,rT):i}}),t9({target:"Object",stat:!0,forced:!ti||l(function(){nh.f(1)})},{getOwnPropertySymbols:function(t){var e=nh.f;return e?e(tb(t)):[]}}),n_("asyncIterator"),n_("hasInstance"),n_("isConcatSpreadable"),n_("iterator"),n_("match"),n_("matchAll"),n_("replace"),n_("search"),n_("species"),n_("split"),n_("toPrimitive"),nb(),n_("toStringTag"),nk($("Symbol"),"Symbol"),n_("unscopables"),nk(u.JSON,"JSON",!0);var rx,rk,rS,rA=X.Symbol,rC={},rO=Function.prototype,rE=E&&Object.getOwnPropertyDescriptor,rI=tT(rO,"name"),rM={EXISTS:rI,PROPER:rI&&"something"===(function(){}).name,CONFIGURABLE:rI&&(!E||E&&rE(rO,"name").configurable)},rP=!l(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),rD=e3("IE_PROTO"),rN=Object,rR=rN.prototype,rj=rP?rN.getPrototypeOf:function(t){var e=tb(t);if(tT(e,rD))return e[rD];var n=e.constructor;return C(n)&&e instanceof n?n.prototype:e instanceof rN?rR:null},rV=tI("iterator"),rF=!1;[].keys&&("next"in(rS=[].keys())?(rk=rj(rj(rS)))!==Object.prototype&&(rx=rk):rF=!0),C((rx=!H(rx)||l(function(){var t={};return rx[rV].call(t)!==t})?{}:nn(rx))[rV])||np(rx,rV,function(){return this});var rU=rx,rq=rF,rL=function(){return this},rB=String,rW=TypeError,rz=function(t,e,n){try{return y(th(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}},rG=function(t){if("object"==typeof t||C(t))return t;throw new rW("Can't set "+rB(t)+" as a prototype")},rH=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=rz(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return tK(n),rG(r),e?t(n,r):n.__proto__=r,n}}():void 0),rX=function(t,e,n,r){var i=e+" Iterator";return t.prototype=nn(rU,{next:V(+!r,n)}),nk(t,i,!1,!0),rC[i]=rL,t},rY=rM.PROPER,r$=rq,rZ=tI("iterator"),rJ="keys",rQ="values",rK="entries",r0=function(){return this},r1=function(t,e,n,r,i,s,o){rX(n,e,r);var a,u,l,c=function(t){if(t===i&&m)return m;if(!r$&&t&&t in d)return d[t];switch(t){case rJ:case rQ:case rK:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",p=!1,d=t.prototype,f=d[rZ]||d["@@iterator"]||i&&d[i],m=!r$&&f||c(i),v="Array"===e&&d.entries||f;if(v&&(a=rj(v.call(new t)))!==Object.prototype&&a.next&&(nk(a,h,!0,!0),rC[h]=r0),rY&&i===rQ&&f&&f.name!==rQ&&(p=!0,m=function(){return M(f,this)}),i)if(u={values:c(rQ),keys:s?m:c(rJ),entries:c(rK)},o)for(l in u)!r$&&!p&&l in d||np(d,l,u[l]);else t9({target:e,proto:!0,forced:r$||p},u);return o&&d[rZ]!==m&&np(d,rZ,m,{name:i}),rC[e]=m,u},r2=function(t,e){return{value:t,done:e}};t$.f;var r8="Array Iterator",r3=nD(r8);r1(Array,"Array",function(t,e){nP(this,{type:r8,target:z(t),index:0,kind:e})},function(){var t=r3(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,r2(void 0,!0);switch(t.kind){case"keys":return r2(n,!1);case"values":return r2(e[n],!1)}return r2([n,e[n]],!1)},"values"),rC.Arguments=rC.Array;var r4={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},r6=tI("toStringTag");for(var r5 in r4){var r7=u[r5],r9=r7&&r7.prototype;r9&&eb(r9)!==r6&&t6(r9,r6,r5),rC[r5]=rC.Array}var it=t$.f,ie=tI("metadata"),ir=Function.prototype;void 0===ir[ie]&&it(ir,ie,{value:null}),n_("asyncDispose"),n_("dispose"),n_("metadata");var ii=$("Symbol"),is=ii.keyFor,io=y(ii.prototype.valueOf),ia=ii.isRegisteredSymbol||function(t){try{return void 0!==is(io(t))}catch(t){return!1}};t9({target:"Symbol",stat:!0},{isRegisteredSymbol:ia});for(var iu=$("Symbol"),il=iu.isWellKnownSymbol,ic=$("Object","getOwnPropertyNames"),ih=y(iu.prototype.valueOf),ip=ty("wks"),id=0,im=ic(iu),iv=im.length;id<iv;id++)try{var ig=im[id];ta(iu[ig])&&tI(ig)}catch(t){}var iy=function(t){if(il&&il(t))return!0;try{for(var e=ih(t),n=0,r=ic(ip),i=r.length;n<i;n++)if(ip[r[n]]==e)return!0}catch(t){}return!1};t9({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:iy}),n_("matcher"),n_("observable"),t9({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:ia}),t9({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:iy}),n_("metadataKey"),n_("patternMatch"),n_("replaceAll");var i_=s(rA),ib=y("".charAt),iw=y("".charCodeAt),iT=y("".slice),ix=function(t){return function(e,n){var r,i,s=eB(W(e)),o=el(n),a=s.length;return o<0||o>=a?t?"":void 0:(r=iw(s,o))<55296||r>56319||o+1===a||(i=iw(s,o+1))<56320||i>57343?t?ib(s,o):r:t?iT(s,o,o+2):i-56320+(r-55296<<10)+65536}},ik={codeAt:ix(!1),charAt:ix(!0)}.charAt,iS="String Iterator",iA=nD(iS);r1(String,"String",function(t){nP(this,{type:iS,string:eB(t),index:0})},function(){var t,e=iA(this),n=e.string,r=e.index;return r>=n.length?r2(void 0,!0):(t=ik(n,r),e.index+=t.length,r2(t,!1))});var iC=nf.f("iterator"),iO=s(iC);function iE(t){return(iE="function"==typeof i_&&"symbol"==typeof iO?function(t){return typeof t}:function(t){return t&&"function"==typeof i_&&t.constructor===i_&&t!==i_.prototype?"symbol":typeof t})(t)}var iI=s(nf.f("toPrimitive"));function iM(t){var e=function(t,e){if("object"!==iE(t)||null===t)return t;var n=t[iI];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==iE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iE(e)?e:String(e)}function iP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),ei(t,iM(r.key),r)}}function iD(t,e,n){return e&&iP(t.prototype,e),n&&iP(t,n),ei(t,"prototype",{writable:!1}),t}function iN(t,e,n){return(e=iM(e))in t?ei(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var iR=Function,ij=y([].concat),iV=y([].join),iF={},iU=c?iR.bind:function(t){var e=th(this),n=e.prototype,r=ro(arguments,1),i=function(){var n=ij(r,ro(arguments));return this instanceof i?function(t,e,n){if(!tT(iF,e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";iF[e]=iR("C,a","return new C("+iV(r,",")+")")}return iF[e](t,n)}(e,n.length,n):e.apply(t,n)};return H(n)&&(i.prototype=n),i};t9({target:"Function",proto:!0,forced:Function.bind!==iU},{bind:iU});var iq=function(t,e){var n=X[t+"Prototype"],r=n&&n[e];if(r)return r;var i=u[t],s=i&&i.prototype;return s&&s[e]},iL=iq("Function","bind"),iB=Function.prototype,iW=function(t){var e=t.bind;return t===iB||Z(iB,t)&&e===iB.bind?iL:e},iz=s(iW),iG=TypeError,iH=function(t){return function(e,n,r,i){th(n);var s=tb(e),o=q(s),a=eh(s),u=t?a-1:0,l=t?-1:1;if(r<2)for(;;){if(u in o){i=o[u],u+=l;break}if(u+=l,t?u<0:a<=u)throw new iG("Reduce of empty array with no initial value")}for(;t?u>=0:a>u;u+=l)u in o&&(i=n(i,o[u],u,s));return i}},iX={left:iH(!1),right:iH(!0)},iY=function(t,e){var n=[][t];return!!n&&l(function(){n.call(null,e||function(){return 1},1)})},i$="process"===T(u.process),iZ=iX.left;t9({target:"Array",proto:!0,forced:!i$&&tn>79&&tn<83||!iY("reduce")},{reduce:function(t){var e=arguments.length;return iZ(this,t,e,e>1?arguments[1]:void 0)}});var iJ=iq("Array","reduce"),iQ=Array.prototype,iK=s(function(t){var e=t.reduce;return t===iQ||Z(iQ,t)&&e===iQ.reduce?iJ:e}),i0=nj.filter;t9({target:"Array",proto:!0,forced:!eV("filter")},{filter:function(t){return i0(this,t,arguments.length>1?arguments[1]:void 0)}});var i1=iq("Array","filter"),i2=Array.prototype,i8=s(function(t){var e=t.filter;return t===i2||Z(i2,t)&&e===i2.filter?i1:e}),i3=nj.map;t9({target:"Array",proto:!0,forced:!eV("map")},{map:function(t){return i3(this,t,arguments.length>1?arguments[1]:void 0)}});var i4=iq("Array","map"),i6=Array.prototype,i5=s(function(t){var e=t.map;return t===i6||Z(i6,t)&&e===i6.map?i4:e}),i7=function(t,e,n,r,i,s,o,a){for(var u,l,c=i,h=0,p=!!o&&tY(o,a);h<r;)h in n&&(u=p?p(n[h],h,e):n[h],s>0&&es(u)?(l=eh(u),c=i7(t,e,u,l,c,s-1)-1):(ed(c+1),t[c]=u),c++),h++;return c};t9({target:"Array",proto:!0},{flatMap:function(t){var e,n=tb(this),r=eh(n);return th(t),(e=eR(n,0)).length=i7(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var i9=iq("Array","flatMap"),st=Array.prototype,se=s(function(t){var e=t.flatMap;return t===st||Z(st,t)&&e===st.flatMap?i9:e}),sn=function(){function t(e,n,i){var s,o,a;r(this,t),iN(this,"_listeners",{add:iz(s=this._add).call(s,this),remove:iz(o=this._remove).call(o,this),update:iz(a=this._update).call(a,this)}),this._source=e,this._transformers=n,this._target=i}return iD(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var e;return iK(e=this._transformers).call(e,function(t,e){return e(t)},t)}},{key:"_add",value:function(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}},{key:"_update",value:function(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}},{key:"_remove",value:function(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}]),t}(),sr=function(){function t(e){r(this,t),iN(this,"_transformers",[]),this._source=e}return iD(t,[{key:"filter",value:function(t){return this._transformers.push(function(e){return i8(e).call(e,t)}),this}},{key:"map",value:function(t){return this._transformers.push(function(e){return i5(e).call(e,t)}),this}},{key:"flatMap",value:function(t){return this._transformers.push(function(e){return se(e).call(e,t)}),this}},{key:"to",value:function(t){return new sn(this._source,this._transformers,t)}}]),t}(),si=function(t,e,n){var r,i;tK(t);try{if(!(r=tp(t,"return"))){if("throw"===e)throw n;return n}r=M(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return tK(r),n},ss=tI("iterator"),so=Array.prototype,sa=function(t){return void 0!==t&&(rC.Array===t||so[ss]===t)},su=tI("iterator"),sl=function(t){if(!L(t))return tp(t,su)||tp(t,"@@iterator")||rC[eb(t)]},sc=TypeError,sh=function(t,e){var n=arguments.length<2?sl(t):e;if(th(n))return tK(M(n,t));throw new sc(tl(t)+" is not iterable")},sp=function(t,e,n,r){try{return r?e(tK(n)[0],n[1]):e(n)}catch(e){si(t,"throw",e)}},sd=Array,sf=tI("iterator"),sm=!1;try{var sv=0,sg={next:function(){return{done:!!sv++}},return:function(){sm=!0}};sg[sf]=function(){return this},Array.from(sg,function(){throw 2})}catch(t){}var sy=function(t,e){try{if(!e&&!sm)return!1}catch(t){return!1}var n=!1;try{var r={};r[sf]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n};t9({target:"Array",stat:!0,forced:!sy(function(t){Array.from(t)})},{from:function(t){var e=tb(t),n=eM(this),r=arguments.length,i=r>1?arguments[1]:void 0,s=void 0!==i;s&&(i=tY(i,r>2?arguments[2]:void 0));var o,a,u,l,c,h,p=sl(e),d=0;if(!p||this===sd&&sa(p))for(o=eh(e),a=n?new this(o):sd(o);o>d;d++)h=s?i(e[d],d):e[d],ef(a,d,h);else for(c=(l=sh(e,p)).next,a=n?new this:[];!(u=M(c,l)).done;d++)h=s?sp(l,i,[u.value,d],!0):u.value,ef(a,d,h);return a.length=d,a}});var s_=X.Array.from,sb=s(s_),sw=s(sl),sT=s(sl);t9({target:"Array",stat:!0},{isArray:es});var sx=X.Array.isArray,sk=s(sx),sS=TypeError,sA=Object.getOwnPropertyDescriptor,sC=E&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(es(t)&&!sA(t,"length").writable)throw new sS("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e};t9({target:"Array",proto:!0,arity:1,forced:l(function(){return 0x100000001!==[].push.call({length:0x100000000},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=tb(this),n=eh(e),r=arguments.length;ed(n+r);for(var i=0;i<r;i++)e[n]=arguments[i],n++;return sC(e,n),n}});var sO=iq("Array","push"),sE=Array.prototype,sI=function(t){var e=t.push;return t===sE||Z(sE,t)&&e===sE.push?sO:e},sM=s(sI),sP=eV("slice"),sD=tI("species"),sN=Array,sR=Math.max;t9({target:"Array",proto:!0,forced:!sP},{slice:function(t,e){var n,r,i,s=z(this),o=eh(s),a=eH(t,o),u=eH(void 0===e?o:e,o);if(es(s)&&((eM(n=s.constructor)&&(n===sN||es(n.prototype))||H(n)&&null===(n=n[sD]))&&(n=void 0),n===sN||void 0===n))return ro(s,a,u);for(r=new(void 0===n?sN:n)(sR(u-a,0)),i=0;a<u;a++,i++)a in s&&ef(r,i,s[a]);return r.length=i,r}});var sj=iq("Array","slice"),sV=Array.prototype,sF=function(t){var e=t.slice;return t===sV||Z(sV,t)&&e===sV.slice?sj:e},sU=s(sF),sq=s(s_);function sL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sB(t,e){var n;if(t){if("string"==typeof t)return sL(t,e);var r=sU(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?sq(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sL(t,e):void 0}}function sW(t,e){return function(t){if(sk(t))return t}(t)||function(t,e){var n=null==t?null:void 0!==i_&&sw(t)||t["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(sM(a).call(a,r.value),a.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(t,e)||sB(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sz(t){return function(t){if(sk(t))return sL(t)}(t)||function(t){if(void 0!==i_&&null!=sw(t)||null!=t["@@iterator"])return sq(t)}(t)||sB(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var sG=s(rA),sH=iq("Array","concat"),sX=Array.prototype,sY=s(function(t){var e=t.concat;return t===sX||Z(sX,t)&&e===sX.concat?sH:e}),s$=s(sF),sZ=y([].concat),sJ=$("Reflect","ownKeys")||function(t){var e=nr.f(tK(t)),n=nh.f;return n?sZ(e,n(t)):e};t9({target:"Reflect",stat:!0},{ownKeys:sJ});var sQ=s(X.Reflect.ownKeys),sK=s(sx);t9({target:"Object",stat:!0,forced:l(function(){e0(1)})},{keys:function(t){return e0(tb(t))}});var s0=s(X.Object.keys),s1=nj.forEach,s2=iY("forEach")?[].forEach:function(t){return s1(this,t,arguments.length>1?arguments[1]:void 0)};t9({target:"Array",proto:!0,forced:[].forEach!==s2},{forEach:s2});var s8=iq("Array","forEach"),s3=Array.prototype,s4={DOMTokenList:!0,NodeList:!0},s6=function(t){var e=t.forEach;return t===s3||Z(s3,t)&&e===s3.forEach||tT(s4,eb(t))?s8:e},s5=s(s6),s7=y([].reverse),s9=[1,2];t9({target:"Array",proto:!0,forced:String(s9)===String(s9.reverse())},{reverse:function(){return es(this)&&(this.length=this.length),s7(this)}});var ot=iq("Array","reverse"),oe=Array.prototype,on=function(t){var e=t.reverse;return t===oe||Z(oe,t)&&e===oe.reverse?ot:e},or=s(on),oi=TypeError,os=function(t,e){if(!delete t[e])throw new oi("Cannot delete property "+tl(e)+" of "+tl(t))},oo=eV("splice"),oa=Math.max,ou=Math.min;t9({target:"Array",proto:!0,forced:!oo},{splice:function(t,e){var n,r,i,s,o,a,u=tb(this),l=eh(u),c=eH(t,l),h=arguments.length;for(0===h?n=r=0:1===h?(n=0,r=l-c):(n=h-2,r=ou(oa(el(e),0),l-c)),ed(l+n-r),i=eR(u,r),s=0;s<r;s++)(o=c+s)in u&&ef(i,s,u[o]);if(i.length=r,n<r){for(s=c;s<l-r;s++)a=s+n,(o=s+r)in u?u[a]=u[o]:os(u,a);for(s=l;s>l-r+n;s--)os(u,s-1)}else if(n>r)for(s=l-r;s>c;s--)a=s+n-1,(o=s+r-1)in u?u[a]=u[o]:os(u,a);for(s=0;s<n;s++)u[s+c]=arguments[s+2];return sC(u,l-r+n),i}});var ol=iq("Array","splice"),oc=Array.prototype,oh=s(function(t){var e=t.splice;return t===oc||Z(oc,t)&&e===oc.splice?ol:e}),op=Object.assign,od=Object.defineProperty,of=y([].concat),om=!op||l(function(){if(E&&1!==op({b:1},op(od({},"a",{enumerable:!0,get:function(){od(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!==op({},t)[n]||e0(op({},e)).join("")!==r})?function(t,e){for(var n=tb(t),r=arguments.length,i=1,s=nh.f,o=P.f;r>i;)for(var a,u=q(arguments[i++]),l=s?of(e0(u),s(u)):e0(u),c=l.length,h=0;c>h;)a=l[h++],E&&!M(o,u,a)||(n[a]=u[a]);return n}:op;t9({target:"Object",stat:!0,arity:2,forced:Object.assign!==om},{assign:om});var ov=s(X.Object.assign);t9({target:"Object",stat:!0,forced:l(function(){rj(1)}),sham:!rP},{getPrototypeOf:function(t){return rj(tb(t))}});var og=X.Object.getPrototypeOf;t9({target:"Object",stat:!0,sham:!E},{create:nn});var oy=X.Object,o_=function(t,e){return oy.create(t,e)},ob=s(o_);X.JSON||(X.JSON={stringify:JSON.stringify});var ow=s(function(t,e,n){return f(X.JSON.stringify,null,arguments)}),oT="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,ox=TypeError,ok=function(t,e){if(t<e)throw new ox("Not enough arguments");return t},oS=u.Function,oA=/MSIE .\./.test(J)||oT&&((oD=u.Bun.version.split(".")).length<3||"0"===oD[0]&&(oD[1]<3||"3"===oD[1]&&"0"===oD[2])),oC=function(t,e){var n=e?2:1;return oA?function(r,i){var s=ok(arguments.length,1)>n,o=C(r)?r:oS(r),a=s?ro(arguments,n):[],u=s?function(){f(o,this,a)}:o;return e?t(u,i):t(u)}:t},oO=oC(u.setInterval,!0);t9({global:!0,bind:!0,forced:u.setInterval!==oO},{setInterval:oO});var oE=oC(u.setTimeout,!0);t9({global:!0,bind:!0,forced:u.setTimeout!==oE},{setTimeout:oE});var oI=s(X.setTimeout),oM={exports:{}};function oP(t){if(t)return Object.assign(t,oP.prototype),t._callbacks=new Map,t;this._callbacks=new Map}oP.prototype.on=function(t,e){let n=this._callbacks.get(t)??[];return n.push(e),this._callbacks.set(t,n),this},oP.prototype.once=function(t,e){let n=(...r)=>{this.off(t,n),e.apply(this,r)};return n.fn=e,this.on(t,n),this},oP.prototype.off=function(t,e){if(void 0===t&&void 0===e)return this._callbacks.clear(),this;if(void 0===e)return this._callbacks.delete(t),this;let n=this._callbacks.get(t);if(n){for(let[t,r]of n.entries())if(r===e||r.fn===e){n.splice(t,1);break}0===n.length?this._callbacks.delete(t):this._callbacks.set(t,n)}return this},oP.prototype.emit=function(t,...e){let n=this._callbacks.get(t);if(n)for(let t of[...n])t.apply(this,e);return this},oP.prototype.listeners=function(t){return this._callbacks.get(t)??[]},oP.prototype.listenerCount=function(t){if(t)return this.listeners(t).length;let e=0;for(let t of this._callbacks.values())e+=t.length;return e},oP.prototype.hasListeners=function(t){return this.listenerCount(t)>0},oP.prototype.addEventListener=oP.prototype.on,oP.prototype.removeListener=oP.prototype.off,oP.prototype.removeEventListener=oP.prototype.off,oP.prototype.removeAllListeners=oP.prototype.off,oM.exports=oP;var oD,oN,oR=s(oM.exports);function oj(){return(oj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function oV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function oF(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}oN="function"!=typeof Object.assign?function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var oU,oq=["","webkit","Moz","MS","ms","o"],oL="undefined"==typeof document?{style:{}}:document.createElement("div"),oB=Math.round,oW=Math.abs,oz=Date.now;function oG(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),s=0;s<oq.length;){if((r=(n=oq[s])?n+i:e)in t)return r;s++}}oU="undefined"==typeof window?{}:window;var oH=oG(oL.style,"touchAction"),oX=void 0!==oH,oY="compute",o$="auto",oZ="manipulation",oJ="none",oQ="pan-x",oK="pan-y",o0=function(){if(!oX)return!1;var t={},e=oU.CSS&&oU.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){return t[n]=!e||oU.CSS.supports("touch-action",n)}),t}(),o1="ontouchstart"in oU,o2=void 0!==oG(oU,"PointerEvent"),o8=o1&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),o3="touch",o4="mouse",o6=["x","y"],o5=["clientX","clientY"];function o7(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function o9(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function at(t,e){return t.indexOf(e)>-1}var ae=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===oY&&(t=this.compute()),oX&&this.manager.element.style&&o0[t]&&(this.manager.element.style[oH]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return o7(this.manager.recognizers,function(e){o9(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(at(t,oJ))return oJ;var e=at(t,oQ),n=at(t,oK);return e&&n?oJ:e||n?e?oQ:oK:at(t,oZ)?oZ:o$}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=at(r,oJ)&&!o0[oJ],s=at(r,oK)&&!o0[oK],o=at(r,oQ)&&!o0[oQ];if(i){var a=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(a&&u&&l)return}if(!o||!s)return i||s&&6&n||o&&24&n?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function an(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function ar(t){var e=t.length;if(1===e)return{x:oB(t[0].clientX),y:oB(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:oB(n/e),y:oB(r/e)}}function ai(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:oB(t.pointers[n].clientX),clientY:oB(t.pointers[n].clientY)},n++;return{timeStamp:oz(),pointers:e,center:ar(e),deltaX:t.deltaX,deltaY:t.deltaY}}function as(t,e,n){n||(n=o6);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function ao(t,e,n){n||(n=o6);var r=e[n[0]]-t[n[0]];return 180*Math.atan2(e[n[1]]-t[n[1]],r)/Math.PI}function aa(t,e){return t===e?1:oW(t)>=oW(e)?t<0?2:4:e<0?8:16}function au(t,e,n){return{x:e/t||0,y:n/t||0}}function al(t,e,n){var r,i,s,o,a,u,l,c,h,p,d,f,m,v,g,y,b,w=n.pointers.length,T=n.changedPointers.length,x=1&e&&w-T==0,k=12&e&&w-T==0;n.isFirst=!!x,n.isFinal=!!k,x&&(t.session={}),n.eventType=e,r=t.session,s=(i=n.pointers).length,r.firstInput||(r.firstInput=ai(n)),s>1&&!r.firstMultiple?r.firstMultiple=ai(n):1===s&&(r.firstMultiple=!1),o=r.firstInput,u=(a=r.firstMultiple)?a.center:o.center,l=n.center=ar(i),n.timeStamp=oz(),n.deltaTime=n.timeStamp-o.timeStamp,n.angle=ao(u,l),n.distance=as(u,l),c=n.center,h=r.offsetDelta||{},p=r.prevDelta||{},d=r.prevInput||{},1!==n.eventType&&4!==d.eventType||(p=r.prevDelta={x:d.deltaX||0,y:d.deltaY||0},h=r.offsetDelta={x:c.x,y:c.y}),n.deltaX=p.x+(c.x-h.x),n.deltaY=p.y+(c.y-h.y),n.offsetDirection=aa(n.deltaX,n.deltaY),m=au(n.deltaTime,n.deltaX,n.deltaY),n.overallVelocityX=m.x,n.overallVelocityY=m.y,n.overallVelocity=oW(m.x)>oW(m.y)?m.x:m.y,n.scale=a?(f=a.pointers,as(i[0],i[1],o5)/as(f[0],f[1],o5)):1,n.rotation=a?(v=a.pointers,ao(i[1],i[0],o5)+ao(v[1],v[0],o5)):0,n.maxPointers=r.prevInput?n.pointers.length>r.prevInput.maxPointers?n.pointers.length:r.prevInput.maxPointers:n.pointers.length,function(t,e){var n,r,i,s,o=t.lastInterval||e,a=e.timeStamp-o.timeStamp;if(8!==e.eventType&&(a>25||void 0===o.velocity)){var u=e.deltaX-o.deltaX,l=e.deltaY-o.deltaY,c=au(a,u,l);r=c.x,i=c.y,n=oW(c.x)>oW(c.y)?c.x:c.y,s=aa(u,l),t.lastInterval=e}else n=o.velocity,r=o.velocityX,i=o.velocityY,s=o.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=s}(r,n),y=t.element,an(g=(b=n.srcEvent).composedPath?b.composedPath()[0]:b.path?b.path[0]:b.target,y)&&(y=g),n.target=y,t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ac(t){return t.trim().split(/\s+/g)}function ah(t,e,n){o7(ac(e),function(e){t.addEventListener(e,n,!1)})}function ap(t,e,n){o7(ac(e),function(e){t.removeEventListener(e,n,!1)})}function ad(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var af=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){o9(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ah(this.element,this.evEl,this.domHandler),this.evTarget&&ah(this.target,this.evTarget,this.domHandler),this.evWin&&ah(ad(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&ap(this.element,this.evEl,this.domHandler),this.evTarget&&ap(this.target,this.evTarget,this.domHandler),this.evWin&&ap(ad(this.element),this.evWin,this.domHandler)},t}();function am(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return -1}var av={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ag={2:o3,3:"pen",4:o4,5:"kinect"},ay="pointerdown",a_="pointermove pointerup pointercancel";oU.MSPointerEvent&&!oU.PointerEvent&&(ay="MSPointerDown",a_="MSPointerMove MSPointerUp MSPointerCancel");var ab=function(t){function e(){var n,r=e.prototype;return r.evEl=ay,r.evWin=a_,(n=t.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return oV(e,t),e.prototype.handler=function(t){var e=this.store,n=!1,r=av[t.type.toLowerCase().replace("ms","")],i=ag[t.pointerType]||t.pointerType,s=i===o3,o=am(e,t.pointerId,"pointerId");1&r&&(0===t.button||s)?o<0&&(e.push(t),o=e.length-1):12&r&&(n=!0),o<0||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:i,srcEvent:t}),n&&e.splice(o,1))},e}(af);function aw(t){return Array.prototype.slice.call(t,0)}function aT(t,e,n){for(var r=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];0>am(i,o)&&r.push(t[s]),i[s]=o,s++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}var ax={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ak=function(t){function e(){var n;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).targetIds={},n}return oV(e,t),e.prototype.handler=function(t){var e=ax[t.type],n=aS.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:o3,srcEvent:t})},e}(af);function aS(t,e){var n,r,i=aw(t.touches),s=this.targetIds;if(3&e&&1===i.length)return s[i[0].identifier]=!0,[i,i];var o=aw(t.changedTouches),a=[],u=this.target;if(r=i.filter(function(t){return an(t.target,u)}),1===e)for(n=0;n<r.length;)s[r[n].identifier]=!0,n++;for(n=0;n<o.length;)s[o[n].identifier]&&a.push(o[n]),12&e&&delete s[o[n].identifier],n++;return a.length?[aT(r.concat(a),"identifier",!0),a]:void 0}var aA={mousedown:1,mousemove:2,mouseup:4},aC=function(t){function e(){var n,r=e.prototype;return r.evEl="mousedown",r.evWin="mousemove mouseup",(n=t.apply(this,arguments)||this).pressed=!1,n}return oV(e,t),e.prototype.handler=function(t){var e=aA[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:o4,srcEvent:t}))},e}(af);function aO(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},r=this.lastTouches;this.lastTouches.push(n),setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},2500)}}function aE(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,aO.call(this,e)):12&t&&aO.call(this,e)}function aI(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],s=Math.abs(e-i.x),o=Math.abs(n-i.y);if(s<=25&&o<=25)return!0}return!1}var aM=function(){function t(t,e){var n;return(n=af.call(this,t,e)||this).handler=function(t,e,r){var i=r.pointerType===o3,s=r.pointerType===o4;if(!(s&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(i)aE.call(oF(oF(n)),e,r);else if(s&&aI.call(oF(oF(n)),r))return;n.callback(t,e,r)}},n.touch=new ak(n.manager,n.handler),n.mouse=new aC(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return oV(t,af),t.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}();function aP(t,e,n){return!!Array.isArray(t)&&(o7(t,n[e],n),!0)}var aD=1;function aN(t,e){var n=e.manager;return n?n.get(t):t}function aR(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var aj=function(){function t(t){void 0===t&&(t={}),this.options=oj({enable:!0},t),this.id=aD++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return oN(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(aP(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=aN(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return aP(t,"dropRecognizeWith",this)||(t=aN(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(aP(t,"requireFailure",this))return this;var e=this.requireFail;return -1===am(e,t=aN(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(aP(t,"dropRequireFailure",this))return this;t=aN(t,this);var e=am(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+aR(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+aR(n))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=32},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=oN({},t);if(!o9(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),aV=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,oj({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}oV(e,t);var n=e.prototype;return n.getTouchAction=function(){return[oZ]},n.process=function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,s=t.deltaTime<n.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&s&&r){if(4!==t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<n.interval,a=!this.pCenter||as(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout(function(){e.state=8,e.tryEmit()},n.interval),2):8}return 32},n.failTimeout=function(){var t=this;return this._timer=setTimeout(function(){t.state=32},this.options.interval),32},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(aj),aF=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oj({pointers:1},e))||this}oV(e,t);var n=e.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:32},e}(aj);function aU(t){return 16===t?"down":8===t?"up":2===t?"left":4===t?"right":""}var aq=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,oj({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,n.pY=null,n}oV(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(oK),24&t&&e.push(oQ),e},n.directionTest=function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,s=t.deltaX,o=t.deltaY;return i&e.direction||(6&e.direction?(i=0===s?1:s<0?2:4,n=s!==this.pX,r=Math.abs(t.deltaX)):(i=0===o?1:o<0?8:16,n=o!==this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},n.attrTest=function(t){return aF.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=aU(e.direction);n&&(e.additionalEvent=this.options.event+n),t.prototype.emit.call(this,e)},e}(aF),aL=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oj({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}oV(e,t);var n=e.prototype;return n.getTouchAction=function(){return aq.prototype.getTouchAction.call(this)},n.attrTest=function(e){var n,r=this.options.direction;return 30&r?n=e.overallVelocity:6&r?n=e.overallVelocityX:24&r&&(n=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&oW(n)>this.options.velocity&&4&e.eventType},n.emit=function(t){var e=aU(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(aF),aB=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oj({event:"pinch",threshold:0,pointers:2},e))||this}oV(e,t);var n=e.prototype;return n.getTouchAction=function(){return[oJ]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},n.emit=function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}t.prototype.emit.call(this,e)},e}(aF),aW=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oj({event:"rotate",threshold:0,pointers:2},e))||this}oV(e,t);var n=e.prototype;return n.getTouchAction=function(){return[oJ]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(aF),az=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,oj({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,n._input=null,n}oV(e,t);var n=e.prototype;return n.getTouchAction=function(){return[o$]},n.process=function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,s=t.deltaTime>n.time;if(this._input=t,i&&r&&(!(12&t.eventType)||s)){if(1&t.eventType)this.reset(),this._timer=setTimeout(function(){e.state=8,e.tryEmit()},n.time);else if(4&t.eventType)return 8}else this.reset();return 32},n.reset=function(){clearTimeout(this._timer)},n.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=oz(),this.manager.emit(this.options.event,this._input)))},e}(aj),aG={domEvents:!1,touchAction:oY,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},aH=[[aW,{enable:!1}],[aB,{enable:!1},["rotate"]],[aL,{direction:6}],[aq,{direction:6},["swipe"]],[aV],[aV,{event:"doubletap",taps:2},["tap"]],[az]];function aX(t,e){var n,r=t.element;r.style&&(o7(t.options.cssProps,function(i,s){n=oG(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}var aY=function(){function t(t,e){var n=this;this.options=oN({},aG,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(o2?ab:o8?ak:o1?aM:aC))(this,al),this.touchAction=new ae(this,this.options.touchAction),aX(this,!0),o7(this.options.recognizers,function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}var e=t.prototype;return e.set=function(t){return oN(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(e.curRecognizer=null,i=null);for(var s=0;s<r.length;)n=r[s],2===e.stopped||i&&n!==i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(e.curRecognizer=n,i=n),s++}},e.get=function(t){if(t instanceof aj)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(aP(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(aP(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,r=am(n,e);-1!==r&&(n.splice(r,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return o7(ac(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return o7(ac(t),function(t){e?n[t]&&n[t].splice(am(n[t],e),1):delete n[t]}),this},e.emit=function(t,e){this.options.domEvents&&((n=document.createEvent("Event")).initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n));var n,r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},e.destroy=function(){this.element&&aX(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),a$={touchstart:1,touchmove:2,touchend:4,touchcancel:8},aZ=function(t){function e(){var n,r=e.prototype;return r.evTarget="touchstart",r.evWin="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).started=!1,n}return oV(e,t),e.prototype.handler=function(t){var e=a$[t.type];if(1===e&&(this.started=!0),this.started){var n=aJ.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:o3,srcEvent:t})}},e}(af);function aJ(t,e){var n=aw(t.touches),r=aw(t.changedTouches);return 12&e&&(n=aT(n.concat(r),"identifier",!0)),[n,r]}function aQ(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=window.console&&(window.console.warn||window.console.log);return i&&i.call(window.console,r,n),t.apply(this,arguments)}}var aK=aQ(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),a0=aQ(function(t,e){return aK(t,e,!0)},"merge","Use `assign`.");function a1(t,e){return function(){return t.apply(e,arguments)}}var a2=((u0=function(t,e){return void 0===e&&(e={}),new aY(t,oj({recognizers:aH.concat()},e))}).VERSION="2.0.17-rc",u0.DIRECTION_ALL=30,u0.DIRECTION_DOWN=16,u0.DIRECTION_LEFT=2,u0.DIRECTION_RIGHT=4,u0.DIRECTION_UP=8,u0.DIRECTION_HORIZONTAL=6,u0.DIRECTION_VERTICAL=24,u0.DIRECTION_NONE=1,u0.DIRECTION_DOWN=16,u0.INPUT_START=1,u0.INPUT_MOVE=2,u0.INPUT_END=4,u0.INPUT_CANCEL=8,u0.STATE_POSSIBLE=1,u0.STATE_BEGAN=2,u0.STATE_CHANGED=4,u0.STATE_ENDED=8,u0.STATE_RECOGNIZED=8,u0.STATE_CANCELLED=16,u0.STATE_FAILED=32,u0.Manager=aY,u0.Input=af,u0.TouchAction=ae,u0.TouchInput=ak,u0.MouseInput=aC,u0.PointerEventInput=ab,u0.TouchMouseInput=aM,u0.SingleTouchInput=aZ,u0.Recognizer=aj,u0.AttrRecognizer=aF,u0.Tap=aV,u0.Pan=aq,u0.Swipe=aL,u0.Pinch=aB,u0.Rotate=aW,u0.Press=az,u0.on=ah,u0.off=ap,u0.each=o7,u0.merge=a0,u0.extend=aK,u0.bindFn=a1,u0.assign=oN,u0.inherit=function(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&oN(r,n)},u0.bindFn=a1,u0.prefixed=oG,u0.toArray=aw,u0.inArray=am,u0.uniqueArray=aT,u0.splitStr=ac,u0.boolOrFn=o9,u0.hasParent=an,u0.addEventListeners=ah,u0.removeEventListeners=ap,u0.defaults=oN({},aG,{preset:aH}),u0);function a8(t,e){var n=void 0!==sG&&sT(t)||t["@@iterator"];if(!n){if(sK(t)||(n=function(t,e){if(t){if("string"==typeof t)return a3(t,void 0);var n,r=s$(n=Object.prototype.toString.call(t)).call(n,8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return sb(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a3(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function a3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a4=sG("DELETE");function a6(){var t=(function t(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length<2)return n[0];if(n.length>2)return t.apply(void 0,sY(o=[a6(n[0],n[1])]).call(o,sz(s$(n).call(n,2))));var i=n[0],s=n[1];if(i instanceof Date&&s instanceof Date)return i.setTime(s.getTime()),i;var o,a,u=a8(sQ(s));try{for(u.s();!(a=u.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(s,l)&&(s[l]===a4?delete i[l]:null===i[l]||null===s[l]||"object"!=typeof i[l]||"object"!=typeof s[l]||sK(i[l])||sK(s[l])?i[l]=function e(n){return sK(n)?i5(n).call(n,function(t){return e(t)}):"object"==typeof n&&null!==n?n instanceof Date?new Date(n.getTime()):t({},n):n}(s[l]):i[l]=t(i[l],s[l]))}}catch(t){u.e(t)}finally{u.f()}return i}).apply(void 0,arguments);return function t(e){for(var n=0,r=s0(e);n<r.length;n++){var i=r[n];e[i]===a4?delete e[i]:"object"==typeof e[i]&&null!==e[i]&&t(e[i])}}(t),t}var a5="undefined"!=typeof window?window.Hammer||a2:function(){var t;return{on:t=function(){},off:t,destroy:t,emit:t,get:()=>({set:t})}};function a7(t){var e,n=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)});var r=a5(this._dom.overlay);r.on("tap",iz(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(function(){r.destroy()});var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];s5(i).call(i,function(t){r.on(t,function(t){t.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",n._onClick)})),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&n.deactivate()}}oR(a7.prototype),a7.current=null,a7.prototype.destroy=function(){this.deactivate();var t,e,n,r=a8(or(t=oh(e=this._cleanupQueue).call(e,0)).call(t));try{for(r.s();!(n=r.n()).done;)(0,n.value)()}catch(t){r.e(t)}finally{r.f()}},a7.prototype.activate=function(){a7.current&&a7.current.deactivate(),a7.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},a7.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},a7.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var a9=TypeError,ut=function(t){if(eM(t))return t;throw new a9(tl(t)+" is not a constructor")},ue=$("Reflect","construct"),un=Object.prototype,ur=[].push,ui=l(function(){function t(){}return!(ue(function(){},[],t)instanceof t)}),us=!l(function(){ue(function(){})}),uo=ui||us;t9({target:"Reflect",stat:!0,forced:uo,sham:uo},{construct:function(t,e){ut(t),tK(e);var n=arguments.length<3?t:ut(arguments[2]);if(us&&!ui)return ue(t,e,n);if(t===n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return f(ur,r,e),new(f(iU,t,r))}var i=n.prototype,s=nn(H(i)?i:un),o=f(t,s,e);return H(o)?o:s}});var ua=s(X.Reflect.construct),uu=s(X.Object.getOwnPropertySymbols),ul={exports:{}},uc=O.f;t9({target:"Object",stat:!0,forced:!E||l(function(){uc(1)}),sham:!E},{getOwnPropertyDescriptor:function(t,e){return uc(z(t),e)}});var uh=X.Object,up=ul.exports=function(t,e){return uh.getOwnPropertyDescriptor(t,e)};uh.getOwnPropertyDescriptor.sham&&(up.sham=!0);var ud=s(ul.exports);t9({target:"Object",stat:!0,sham:!E},{getOwnPropertyDescriptors:function(t){for(var e,n,r=z(t),i=O.f,s=sJ(r),o={},a=0;s.length>a;)void 0!==(n=i(r,e=s[a++]))&&ef(o,e,n);return o}});var uf=s(X.Object.getOwnPropertyDescriptors),um={exports:{}},uv=eW.f;t9({target:"Object",stat:!0,forced:Object.defineProperties!==uv,sham:!E},{defineProperties:uv});var ug=X.Object,uy=um.exports=function(t,e){return ug.defineProperties(t,e)};ug.defineProperties.sham&&(uy.sham=!0);var u_=s(um.exports),ub=s(er);function uw(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var uT=s(o_);t9({target:"Object",stat:!0},{setPrototypeOf:rH});var ux=X.Object.setPrototypeOf,uk=s(ux),uS=s(iW);function uA(t,e){return(uA=uk?uS(uk).call(uk):function(t,e){return t.__proto__=e,t})(t,e)}function uC(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=uT(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ei(t,"prototype",{writable:!1}),e&&uA(t,e)}function uO(t,e){if(e&&("object"===iE(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return uw(t)}var uE=s(og);function uI(t){return(uI=uk?uS(uE).call(uE):function(t){return t.__proto__||uE(t)})(t)}var uM={exports:{}},uP={exports:{}};function uD(t){return uP.exports=uD="function"==typeof rA&&"symbol"==typeof iC?function(t){return typeof t}:function(t){return t&&"function"==typeof rA&&t.constructor===rA&&t!==rA.prototype?"symbol":typeof t},uP.exports.__esModule=!0,uP.exports.default=uP.exports,uD(t)}uP.exports=uD,uP.exports.__esModule=!0,uP.exports.default=uP.exports;var uN=uP.exports,uR=Error,uj=y("".replace),uV=String(new uR("zxcasd").stack),uF=/\n\s*at [^:]*:[^\n]*/,uU=uF.test(uV),uq=!l(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",V(1,7)),7!==t.stack)}),uL=function(t,e){if(uU&&"string"==typeof t&&!uR.prepareStackTrace)for(;e--;)t=uj(t,uF,"");return t},uB=Error.captureStackTrace,uW=TypeError,uz=function(t,e){this.stopped=t,this.result=e},uG=uz.prototype,uH=function(t,e,n){var r,i,s,o,a,u,l,c=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=tY(e,c),v=function(t){return r&&si(r,"normal",t),new uz(!0,t)},g=function(t){return h?(tK(t),f?m(t[0],t[1],v):m(t[0],t[1])):f?m(t,v):m(t)};if(p)r=t.iterator;else if(d)r=t;else{if(!(i=sl(t)))throw new uW(tl(t)+" is not iterable");if(sa(i)){for(s=0,o=eh(t);o>s;s++)if((a=g(t[s]))&&Z(uG,a))return a;return new uz(!1)}r=sh(t,i)}for(u=p?t.next:r.next;!(l=M(u,r)).done;){try{a=g(l.value)}catch(t){si(r,"throw",t)}if("object"==typeof a&&a&&Z(uG,a))return a}return new uz(!1)},uX=function(t,e){H(e)&&"cause"in e&&t6(t,"cause",e.cause)},uY=function(t,e,n,r){uq&&(uB?uB(t,e):t6(t,"stack",uL(n,r)))},u$=tI("toStringTag"),uZ=Error,uJ=[].push,uQ=function(t,e){var n,r=Z(uK,this);rH?n=rH(new uZ,r?rj(this):uK):t6(n=r?this:nn(uK),u$,"Error"),void 0!==e&&t6(n,"message",function(t,e){return void 0===t?arguments.length<2?"":e:eB(t)}(e)),uY(n,uQ,n.stack,1),arguments.length>2&&uX(n,arguments[2]);var i=[];return uH(t,uJ,{that:i}),t6(n,"errors",i),n};rH?rH(uQ,uZ):function(t,e,n){for(var r=sJ(e),i=t$.f,s=O.f,o=0;o<r.length;o++){var a=r[o];tT(t,a)||n&&tT(n,a)||i(t,a,s(e,a))}}(uQ,uZ,{name:!0});var uK=uQ.prototype=nn(uZ.prototype,{constructor:V(1,uQ),message:V(1,""),name:V(1,"AggregateError")});t9({global:!0,constructor:!0,arity:2},{AggregateError:uQ});var u0,u1,u2,u8,u3,u4=tI("species"),u6=function(t){var e=$(t);E&&e&&!e[u4]&&nd(e,u4,{configurable:!0,get:function(){return this}})},u5=TypeError,u7=function(t,e){if(Z(e,t))return t;throw new u5("Incorrect invocation")},u9=tI("species"),lt=function(t,e){var n,r=tK(t).constructor;return void 0===r||L(n=tK(r)[u9])?e:ut(n)},le=/(?:ipad|iphone|ipod).*applewebkit/i.test(J),ln=u.setImmediate,lr=u.clearImmediate,li=u.process,ls=u.Dispatch,lo=u.Function,la=u.MessageChannel,lu=u.String,ll=0,lc={},lh="onreadystatechange";l(function(){u1=u.location});var lp=function(t){if(tT(lc,t)){var e=lc[t];delete lc[t],e()}},ld=function(t){return function(){lp(t)}},lf=function(t){lp(t.data)},lm=function(t){u.postMessage(lu(t),u1.protocol+"//"+u1.host)};ln&&lr||(ln=function(t){ok(arguments.length,1);var e=C(t)?t:lo(t),n=ro(arguments,1);return lc[++ll]=function(){f(e,void 0,n)},u2(ll),ll},lr=function(t){delete lc[t]},i$?u2=function(t){li.nextTick(ld(t))}:ls&&ls.now?u2=function(t){ls.now(ld(t))}:la&&!le?(u3=(u8=new la).port2,u8.port1.onmessage=lf,u2=tY(u3.postMessage,u3)):u.addEventListener&&C(u.postMessage)&&!u.importScripts&&u1&&"file:"!==u1.protocol&&!l(lm)?(u2=lm,u.addEventListener("message",lf,!1)):u2=lh in tF("script")?function(t){e2.appendChild(tF("script"))[lh]=function(){e2.removeChild(this),lp(t)}}:function(t){setTimeout(ld(t),0)});var lv=ln,lg=function(){this.head=null,this.tail=null};lg.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var ly,l_,lb,lw,lT,lx=/ipad|iphone|ipod/i.test(J)&&"undefined"!=typeof Pebble,lk=/web0s(?!.*chrome)/i.test(J),lS=O.f,lA=lv,lC=u.MutationObserver||u.WebKitMutationObserver,lO=u.document,lE=u.process,lI=u.Promise,lM=lS(u,"queueMicrotask"),lP=lM&&lM.value;if(!lP){var lD=new lg,lN=function(){var t,e;for(i$&&(t=lE.domain)&&t.exit();e=lD.get();)try{e()}catch(t){throw lD.head&&ly(),t}t&&t.enter()};le||i$||lk||!lC||!lO?!lx&&lI&&lI.resolve?((lw=lI.resolve(void 0)).constructor=lI,lT=tY(lw.then,lw),ly=function(){lT(lN)}):i$?ly=function(){lE.nextTick(lN)}:(lA=tY(lA,u),ly=function(){lA(lN)}):(l_=!0,lb=lO.createTextNode(""),new lC(lN).observe(lb,{characterData:!0}),ly=function(){lb.data=l_=!l_}),lP=function(t){lD.head||ly(),lD.add(t)}}var lR=lP,lj=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},lV=u.Promise,lF="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,lU=!lF&&!i$&&"object"==typeof window&&"object"==typeof document,lq=lV&&lV.prototype,lL=tI("species"),lB=!1,lW=C(u.PromiseRejectionEvent),lz={CONSTRUCTOR:tB("Promise",function(){var t=eT(lV),e=t!==String(lV);if(!e&&66===tn||!lq.catch||!lq.finally)return!0;if(!tn||tn<51||!/native code/.test(t)){var n=new lV(function(t){t(1)}),r=function(t){t(function(){},function(){})};if((n.constructor={})[lL]=r,!(lB=n.then(function(){})instanceof r))return!0}return!e&&(lU||lF)&&!lW}),REJECTION_EVENT:lW,SUBCLASSING:lB},lG={},lH=TypeError,lX=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw new lH("Bad Promise constructor");e=t,n=r}),this.resolve=th(e),this.reject=th(n)};lG.f=function(t){return new lX(t)};var lY,l$,lZ=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}},lJ="Promise",lQ=lz.CONSTRUCTOR,lK=lz.REJECTION_EVENT,l0=nD(lJ),l1=lV&&lV.prototype,l2=lV,l8=l1,l3=u.TypeError,l4=u.document,l6=u.process,l5=lG.f,l7=l5,l9=!!(l4&&l4.createEvent&&u.dispatchEvent),ct="unhandledrejection",ce=function(t){var e;return!(!H(t)||!C(e=t.then))&&e},cn=function(t,e){var n,r,i,s=e.value,o=1===e.state,a=o?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(o||(2===e.rejection&&ca(e),e.rejection=1),!0===a?n=s:(c&&c.enter(),n=a(s),c&&(c.exit(),i=!0)),n===t.promise?l(new l3("Promise-chain cycle")):(r=ce(n))?M(r,n,u,l):u(n)):l(s)}catch(t){c&&!i&&c.exit(),l(t)}},cr=function(t,e){t.notified||(t.notified=!0,lR(function(){for(var n,r=t.reactions;n=r.get();)cn(n,t);t.notified=!1,e&&!t.rejection&&cs(t)}))},ci=function(t,e,n){var r,i;l9?((r=l4.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!lK&&(i=u["on"+t])?i(r):t===ct&&lZ("Unhandled promise rejection",n)},cs=function(t){M(lv,u,function(){var e,n=t.facade,r=t.value;if(co(t)&&(e=lj(function(){i$?l6.emit("unhandledRejection",r,n):ci(ct,n,r)}),t.rejection=i$||co(t)?2:1,e.error))throw e.value})},co=function(t){return 1!==t.rejection&&!t.parent},ca=function(t){M(lv,u,function(){var e=t.facade;i$?l6.emit("rejectionHandled",e):ci("rejectionhandled",e,t.value)})},cu=function(t,e,n){return function(r){t(e,r,n)}},cl=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,cr(t,!0))},cc=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new l3("Promise can't be resolved itself");var r=ce(e);r?lR(function(){var n={done:!1};try{M(r,e,cu(cc,n,t),cu(cl,n,t))}catch(e){cl(n,e,t)}}):(t.value=e,t.state=1,cr(t,!1))}catch(e){cl({done:!1},e,t)}}};lQ&&(l8=(l2=function(t){u7(this,l8),th(t),M(lY,this);var e=l0(this);try{t(cu(cc,e),cu(cl,e))}catch(t){cl(e,t)}}).prototype,(lY=function(t){nP(this,{type:lJ,done:!1,notified:!1,parent:!1,reactions:new lg,rejection:!1,state:0,value:void 0})}).prototype=np(l8,"then",function(t,e){var n=l0(this),r=l5(lt(this,l2));return n.parent=!0,r.ok=!C(t)||t,r.fail=C(e)&&e,r.domain=i$?l6.domain:void 0,0===n.state?n.reactions.add(r):lR(function(){cn(r,n)}),r.promise}),l$=function(){var t=new lY,e=l0(t);this.promise=t,this.resolve=cu(cc,e),this.reject=cu(cl,e)},lG.f=l5=function(t){return t===l2||void 0===t?new l$(t):l7(t)}),t9({global:!0,constructor:!0,wrap:!0,forced:lQ},{Promise:l2}),nk(l2,lJ,!1,!0),u6(lJ);var ch=lz.CONSTRUCTOR||!sy(function(t){lV.all(t).then(void 0,function(){})});t9({target:"Promise",stat:!0,forced:ch},{all:function(t){var e=this,n=lG.f(e),r=n.resolve,i=n.reject,s=lj(function(){var n=th(e.resolve),s=[],o=0,a=1;uH(t,function(t){var u=o++,l=!1;a++,M(n,e,t).then(function(t){l||(l=!0,s[u]=t,--a||r(s))},i)}),--a||r(s)});return s.error&&i(s.value),n.promise}});var cp=lz.CONSTRUCTOR;lV&&lV.prototype,t9({target:"Promise",proto:!0,forced:cp,real:!0},{catch:function(t){return this.then(void 0,t)}}),t9({target:"Promise",stat:!0,forced:ch},{race:function(t){var e=this,n=lG.f(e),r=n.reject,i=lj(function(){var i=th(e.resolve);uH(t,function(t){M(i,e,t).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}}),t9({target:"Promise",stat:!0,forced:lz.CONSTRUCTOR},{reject:function(t){var e=lG.f(this);return M(e.reject,void 0,t),e.promise}});var cd=function(t,e){if(tK(t),H(e)&&e.constructor===t)return e;var n=lG.f(t);return(0,n.resolve)(e),n.promise},cf=lz.CONSTRUCTOR,cm=$("Promise"),cv=!cf;t9({target:"Promise",stat:!0,forced:!0},{resolve:function(t){return cd(cv&&this===cm?lV:this,t)}}),t9({target:"Promise",stat:!0,forced:ch},{allSettled:function(t){var e=this,n=lG.f(e),r=n.resolve,i=n.reject,s=lj(function(){var n=th(e.resolve),i=[],s=0,o=1;uH(t,function(t){var a=s++,u=!1;o++,M(n,e,t).then(function(t){u||(u=!0,i[a]={status:"fulfilled",value:t},--o||r(i))},function(t){u||(u=!0,i[a]={status:"rejected",reason:t},--o||r(i))})}),--o||r(i)});return s.error&&i(s.value),n.promise}});var cg="No one promise resolved";t9({target:"Promise",stat:!0,forced:ch},{any:function(t){var e=this,n=$("AggregateError"),r=lG.f(e),i=r.resolve,s=r.reject,o=lj(function(){var r=th(e.resolve),o=[],a=0,u=1,l=!1;uH(t,function(t){var c=a++,h=!1;u++,M(r,e,t).then(function(t){h||l||(l=!0,i(t))},function(t){h||l||(h=!0,o[c]=t,--u||s(new n(o,cg)))})}),--u||s(new n(o,cg))});return o.error&&s(o.value),r.promise}});var cy=lV&&lV.prototype;t9({target:"Promise",proto:!0,real:!0,forced:!!lV&&l(function(){cy.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=lt(this,$("Promise")),n=C(t);return this.then(n?function(n){return cd(e,t()).then(function(){return n})}:t,n?function(n){return cd(e,t()).then(function(){throw n})}:t)}});var c_=X.Promise;t9({target:"Promise",stat:!0},{withResolvers:function(){var t=lG.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}}),t9({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=lG.f(this),n=lj(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var cb=uN.default;function cw(){uM.exports=cw=function(){return e},uM.exports.__esModule=!0,uM.exports.default=uM.exports;var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=er||function(t,e,n){t[e]=n.value},s="function"==typeof rA?rA:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(t,e,n){return er(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(e,n,r,s){var o,a,u,l,c=o_((n&&n.prototype instanceof v?n:v).prototype);return i(c,"_invoke",{value:(o=e,a=r,u=new C(s||[]),l=p,function(e,n){if(l===d)throw Error("Generator is already running");if(l===f){if("throw"===e)throw n;return{value:t,done:!0}}for(u.method=e,u.arg=n;;){var r=u.delegate;if(r){var i=function e(n,r){var i=r.method,s=n.iterator[i];if(s===t)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),m;var o=h(s,n.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var a=o.arg;return a?a.done?(r[n.resultName]=a.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,m)}(r,u);if(i){if(i===m)continue;return i}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(l===p)throw l=f,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);l=d;var s=h(o,a,u);if("normal"===s.type){if(l=u.done?f:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:u.done}}"throw"===s.type&&(l=f,u.method="throw",u.arg=s.arg)}})}),c}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",d="executing",f="completed",m={};function v(){}function g(){}function y(){}var b={};l(b,o,function(){return this});var w=og&&og(og(O([])));w&&w!==n&&r.call(w,o)&&(b=w);var T=y.prototype=v.prototype=o_(b);function x(t){var e;s6(e=["next","throw","return"]).call(e,function(e){l(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){var n;i(this,"_invoke",{value:function(i,s){function o(){return new e(function(n,o){!function n(i,s,o,a){var u=h(t[i],t,s);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==cb(c)&&r.call(c,"__await")?e.resolve(c.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):e.resolve(c).then(function(t){l.value=t,o(l)},function(t){return n("throw",t,o,a)})}a(u.arg)}(i,s,n,o)})}return n=n?n.then(o,o):o()}})}function S(t){var e,n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),sI(e=this.tryEntries).call(e,n)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],s6(t).call(t,S,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw TypeError(cb(e)+" is not iterable")}return g.prototype=y,i(T,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return ux?ux(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=o_(T),t},e.awrap=function(t){return{__await:t}},x(k.prototype),l(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=c_);var o=new k(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(T),l(T,u,"Generator"),l(T,o,function(){return this}),l(T,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),n=[];for(var r in e)sI(n).call(n,r);return on(n).call(n),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,C.prototype={constructor:C,reset:function(e){var n;if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,s6(n=this.tryEntries).call(n,A),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+sF(i).call(i,1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}uM.exports=cw,uM.exports.__esModule=!0,uM.exports.default=uM.exports;var cT=(0,uM.exports)();try{regeneratorRuntime=cT}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=cT:Function("r","regeneratorRuntime = r")(cT)}var cx=s(cT),ck={exports:{}},cS=l(function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}),cA=Object.isExtensible,cC=l(function(){cA(1)})||cS?function(t){return!!H(t)&&(!cS||"ArrayBuffer"!==T(t))&&(!cA||cA(t))}:cA,cO=!l(function(){return Object.isExtensible(Object.preventExtensions({}))}),cE=t$.f,cI=!1,cM=tA("meta"),cP=0,cD=function(t){cE(t,cM,{value:{objectID:"O"+cP++,weakData:{}}})},cN=ck.exports={enable:function(){cN.enable=function(){},cI=!0;var t=nr.f,e=y([].splice),n={};n[cM]=1,t(n).length&&(nr.f=function(n){for(var r=t(n),i=0,s=r.length;i<s;i++)if(r[i]===cM){e(r,i,1);break}return r},t9({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ns.f}))},fastKey:function(t,e){if(!H(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!tT(t,cM)){if(!cC(t))return"F";if(!e)return"E";cD(t)}return t[cM].objectID},getWeakData:function(t,e){if(!tT(t,cM)){if(!cC(t))return!0;if(!e)return!1;cD(t)}return t[cM].weakData},onFreeze:function(t){return cO&&cI&&cC(t)&&!tT(t,cM)&&cD(t),t}};e$[cM]=!0;var cR=ck.exports,cj=t$.f,cV=nj.forEach,cF=function(t,e,n){var r,i=-1!==t.indexOf("Map"),s=-1!==t.indexOf("Weak"),o=i?"set":"add",a=u[t],c=a&&a.prototype,h={};if(E&&C(a)&&(s||c.forEach&&!l(function(){(new a).entries().next()}))){var p=(r=e(function(e,n){nP(u7(e,p),{type:t,collection:new a}),L(n)||uH(n,e[o],{that:e,AS_ENTRIES:i})})).prototype,d=nD(t);cV(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(t){var e="add"===t||"set"===t;t in c&&(!s||"clear"!==t)&&t6(p,t,function(n,r){var i=d(this).collection;if(!e&&s&&!H(n))return"get"===t&&void 0;var o=i[t](0===n?0:n,r);return e?this:o})}),s||cj(p,"size",{configurable:!0,get:function(){return d(this).collection.size}})}else r=n.getConstructor(e,t,i,o),cR.enable();return nk(r,t,!1,!0),h[t]=r,t9({global:!0,forced:!0},h),s||n.setStrong(r,t,i),r},cU=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:np(t,r,e[r],n);return t},cq=cR.fastKey,cL=nP,cB=nD,cW={getConstructor:function(t,e,n,r){var i=t(function(t,i){u7(t,s),cL(t,{type:e,index:nn(null),first:void 0,last:void 0,size:0}),E||(t.size=0),L(i)||uH(i,t[r],{that:t,AS_ENTRIES:n})}),s=i.prototype,o=cB(e),a=function(t,e,n){var r,i,s=o(t),a=u(t,e);return a?a.value=n:(s.last=a={index:i=cq(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=a),r&&(r.next=a),E?s.size++:t.size++,"F"!==i&&(s.index[i]=a)),t},u=function(t,e){var n,r=o(t),i=cq(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key===e)return n};return cU(s,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,E?t.size=0:this.size=0},delete:function(t){var e=o(this),n=u(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first===n&&(e.first=r),e.last===n&&(e.last=i),E?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),r=tY(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),cU(s,n?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),E&&nd(s,"size",{configurable:!0,get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=cB(e),s=cB(r);r1(t,e,function(t,e){cL(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=s(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?r2("keys"===e?n.key:"values"===e?n.value:[n.key,n.value],!1):(t.target=void 0,r2(void 0,!0))},n?"entries":"values",!n,!0),u6(e)}};cF("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},cW);var cz=s(X.Map),cG=nj.some;t9({target:"Array",proto:!0,forced:!iY("some")},{some:function(t){return cG(this,t,arguments.length>1?arguments[1]:void 0)}});var cH=iq("Array","some"),cX=Array.prototype,cY=s(function(t){var e=t.some;return t===cX||Z(cX,t)&&e===cX.some?cH:e}),c$=iq("Array","keys"),cZ=Array.prototype,cJ={DOMTokenList:!0,NodeList:!0},cQ=s(function(t){var e=t.keys;return t===cZ||Z(cZ,t)&&e===cZ.keys||tT(cJ,eb(t))?c$:e}),cK=Math.floor,c0=function(t,e){var n=t.length,r=cK(n/2);return n<8?c1(t,e):c2(t,c0(nu(t,0,r),e),c0(nu(t,r),e),e)},c1=function(t,e){for(var n,r,i=t.length,s=1;s<i;){for(r=s,n=t[s];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==s++&&(t[r]=n)}return t},c2=function(t,e,n,r){for(var i=e.length,s=n.length,o=0,a=0;o<i||a<s;)t[o+a]=o<i&&a<s?0>=r(e[o],n[a])?e[o++]:n[a++]:o<i?e[o++]:n[a++];return t},c8=J.match(/firefox\/(\d+)/i),c3=!!c8&&+c8[1],c4=/MSIE|Trident/.test(J),c6=J.match(/AppleWebKit\/(\d+)\./),c5=!!c6&&+c6[1],c7=[],c9=y(c7.sort),ht=y(c7.push),he=l(function(){c7.sort(void 0)}),hn=l(function(){c7.sort(null)}),hr=iY("sort"),hi=!l(function(){if(tn)return tn<70;if(!(c3&&c3>3)){if(c4)return!0;if(c5)return c5<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)c7.push({k:e+r,v:n})}for(c7.sort(function(t,e){return e.v-t.v}),r=0;r<c7.length;r++)e=c7[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}});t9({target:"Array",proto:!0,forced:he||!hn||!hr||!hi},{sort:function(t){void 0!==t&&th(t);var e=tb(this);if(hi)return void 0===t?c9(e):c9(e,t);var n,r,i=[],s=eh(e);for(r=0;r<s;r++)r in e&&ht(i,e[r]);for(c0(i,function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:eB(e)>eB(n)?1:-1}),n=eh(i),r=0;r<n;)e[r]=i[r++];for(;r<s;)os(e,r++);return e}});var hs=iq("Array","sort"),ho=Array.prototype,ha=s(function(t){var e=t.sort;return t===ho||Z(ho,t)&&e===ho.sort?hs:e}),hu=iq("Array","values"),hl=Array.prototype,hc={DOMTokenList:!0,NodeList:!0},hh=s(function(t){var e=t.values;return t===hl||Z(hl,t)&&e===hl.values||tT(hc,eb(t))?hu:e}),hp=s(iC),hd=iq("Array","entries"),hf=Array.prototype,hm={DOMTokenList:!0,NodeList:!0},hv=s(function(t){var e=t.entries;return t===hf||Z(hf,t)&&e===hf.entries||tT(hm,eb(t))?hd:e});let hg=new Uint8Array(16),hy=[];for(let t=0;t<256;++t)hy.push((t+256).toString(16).slice(1));var h_={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function hb(t){return"string"==typeof t||"number"==typeof t}var hw=function(){function t(e){r(this,t),iN(this,"_queue",[]),iN(this,"_timeout",null),iN(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}return iD(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,n=0;n<e.length;n++){var r=e[n];r.original?t[r.name]=r.original:delete t[r.name]}this._extended=null}}},{key:"replace",value:function(t,e){var n=this,r=t[e];if(!r)throw Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.queue({args:e,fn:r,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=oI(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,e;s5(t=oh(e=this._queue).call(e,0)).call(t,function(t){t.fn.apply(t.context||t.fn,t.args||[])})}}],[{key:"extend",value:function(e,n){var r=new t(n);if(void 0!==e.flush)throw Error("Target object already has a property flush");e.flush=function(){r.flush()};var i=[{name:"flush",original:void 0}];if(n&&n.replace)for(var s=0;s<n.replace.length;s++){var o=n.replace[s];i.push({name:o,original:e[o]}),r.replace(e,o)}return r._extended={object:e,methods:i},r}}]),t}(),hT=function(){function t(){r(this,t),iN(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),iN(this,"subscribe",t.prototype.on),iN(this,"unsubscribe",t.prototype.off)}return iD(t,[{key:"_trigger",value:function(t,e,n){var r,i;if("*"===t)throw Error("Cannot trigger event *");s5(r=sY(i=[]).call(i,sz(this._subscribers[t]),sz(this._subscribers["*"]))).call(r,function(r){r(t,e,null!=n?n:null)})}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var n;this._subscribers[t]=i8(n=this._subscribers[t]).call(n,function(t){return t!==e})}}]),t}();cF("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},cW);var hx=s(X.Set),hk=s(sh);function hS(t,e){var n=void 0!==sG&&sT(t)||t["@@iterator"];if(!n){if(sK(t)||(n=function(t,e){if(t){if("string"==typeof t)return hA(t,void 0);var n,r=s$(n=Object.prototype.toString.call(t)).call(n,8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return sb(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hA(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function hA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var hC=function(t){function e(t){r(this,e),this._pairs=t}return iD(e,[{key:t,value:cx.mark(function t(){var e,n,r,i,s;return cx.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=hS(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=(r=sW(n.value,2))[0],s=r[1],t.next=7,[i,s];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"entries",value:cx.mark(function t(){var e,n,r,i,s;return cx.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=hS(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=(r=sW(n.value,2))[0],s=r[1],t.next=7,[i,s];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"keys",value:cx.mark(function t(){var e,n,r;return cx.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=hS(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return r=sW(n.value,1)[0],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"values",value:cx.mark(function t(){var e,n,r;return cx.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=hS(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return r=sW(n.value,2)[1],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return i5(t=sz(this._pairs)).call(t,function(t){return t[0]})}},{key:"toItemArray",value:function(){var t;return i5(t=sz(this._pairs)).call(t,function(t){return t[1]})}},{key:"toEntryArray",value:function(){return sz(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=ob(null),n=hS(this._pairs);try{for(n.s();!(t=n.n()).done;){var r=sW(t.value,2),i=r[0],s=r[1];e[i]=s}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"toMap",value:function(){return new cz(this._pairs)}},{key:"toIdSet",value:function(){return new hx(this.toIdArray())}},{key:"toItemSet",value:function(){return new hx(this.toItemArray())}},{key:"cache",value:function(){return new e(sz(this._pairs))}},{key:"distinct",value:function(t){var e,n=new hx,r=hS(this._pairs);try{for(r.s();!(e=r.n()).done;){var i=sW(e.value,2),s=i[0],o=i[1];n.add(t(o,s))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e({[hp]:()=>cx.mark(function e(){var r,i,s,o,a;return cx.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=hS(n),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=10;break}if(o=(s=sW(i.value,2))[0],!t(a=s[1],o)){e.next=8;break}return e.next=8,[o,a];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[1,12,15,18]])})()})}},{key:"forEach",value:function(t){var e,n=hS(this._pairs);try{for(n.s();!(e=n.n()).done;){var r=sW(e.value,2),i=r[0];t(r[1],i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e({[hp]:()=>cx.mark(function e(){var r,i,s,o,a;return cx.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=hS(n),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=9;break}return o=(s=sW(i.value,2))[0],a=s[1],e.next=7,[o,t(a,o)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])})()})}},{key:"max",value:function(t){var e=hk(this._pairs),n=e.next();if(n.done)return null;for(var r=n.value[1],i=t(n.value[1],n.value[0]);!(n=e.next()).done;){var s=sW(n.value,2),o=s[0],a=s[1],u=t(a,o);u>i&&(i=u,r=a)}return r}},{key:"min",value:function(t){var e=hk(this._pairs),n=e.next();if(n.done)return null;for(var r=n.value[1],i=t(n.value[1],n.value[0]);!(n=e.next()).done;){var s=sW(n.value,2),o=s[0],a=s[1],u=t(a,o);u<i&&(i=u,r=a)}return r}},{key:"reduce",value:function(t,e){var n,r=hS(this._pairs);try{for(r.s();!(n=r.n()).done;){var i=sW(n.value,2),s=i[0];e=t(e,i[1],s)}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"sort",value:function(t){var n=this;return new e({[hp]:function(){var e;return hk(ha(e=sz(n._pairs)).call(e,function(e,n){var r=sW(e,2),i=r[0],s=r[1],o=sW(n,2),a=o[0];return t(s,o[1],i,a)}))}})}}]),e}(hp);function hO(t,e){var n=s0(t);if(uu){var r=uu(t);e&&(r=i8(r).call(r,function(e){return ud(t,e).enumerable})),n.push.apply(n,r)}return n}function hE(t){for(var e=1;e<arguments.length;e++){var n,r,i=null!=arguments[e]?arguments[e]:{};e%2?s5(n=hO(Object(i),!0)).call(n,function(e){iN(t,e,i[e])}):uf?u_(t,uf(i)):s5(r=hO(Object(i))).call(r,function(e){ub(t,e,ud(i,e))})}return t}function hI(t,e){var n=void 0!==sG&&sT(t)||t["@@iterator"];if(!n){if(sK(t)||(n=function(t,e){if(t){if("string"==typeof t)return hM(t,void 0);var n,r=s$(n=Object.prototype.toString.call(t)).call(n,8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return sb(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hM(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function hM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var hP=function(t){uC(s,t);var n,i=(n=function(){if("undefined"==typeof Reflect||!ua||ua.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ua(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=uI(s);return t=n?ua(e,arguments,uI(this).constructor):e.apply(this,arguments),uO(this,t)});function s(t,e){var n;return r(this,s),iN(uw(n=i.call(this)),"_queue",null),t&&!sK(t)&&(e=t,t=[]),n._options=e||{},n._data=new cz,n.length=0,n._idProp=n._options.fieldId||"id",t&&t.length&&n.add(t),n.setOptions(e),n}return iD(s,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=hw.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"==typeof t.queue&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var n,r=this,i=[];if(sK(t)){var s=i5(t).call(t,function(t){return t[r._idProp]});if(cY(s).call(s,function(t){return r._data.has(t)}))throw Error("A duplicate id was found in the parameter array.");for(var o=0,a=t.length;o<a;o++)n=this._addItem(t[o]),i.push(n)}else{if(!t||"object"!=typeof t)throw Error("Unknown dataType");n=this._addItem(t),i.push(n)}return i.length&&this._trigger("add",{items:i},e),i}},{key:"update",value:function(t,e){var n=this,r=[],i=[],s=[],o=[],a=this._idProp,u=function(t){var e=t[a];if(null!=e&&n._data.has(e)){var u=ov({},n._data.get(e)),l=n._updateItem(t);i.push(l),o.push(t),s.push(u)}else{var c=n._addItem(t);r.push(c)}};if(sK(t))for(var l=0,c=t.length;l<c;l++)t[l]&&"object"==typeof t[l]?u(t[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!t||"object"!=typeof t)throw Error("Unknown dataType");u(t)}return r.length&&this._trigger("add",{items:r},e),i.length&&this._trigger("update",{items:i,oldData:s,data:o},e),sY(r).call(r,i)}},{key:"updateOnly",value:function(t,e){var n,r=this;sK(t)||(t=[t]);var i=i5(n=i5(t).call(t,function(t){var e=r._data.get(t[r._idProp]);if(null==e)throw Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}})).call(n,function(t){var e=t.oldData,n=t.update,i=e[r._idProp],s=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return a6.apply(void 0,sY(e=[{},t]).call(e,r))}(e,n);return r._data.set(i,s),{id:i,oldData:e,updatedData:s}});if(i.length){var s={items:i5(i).call(i,function(t){return t.id}),oldData:i5(i).call(i,function(t){return t.oldData}),data:i5(i).call(i,function(t){return t.updatedData})};return this._trigger("update",s,e),s.items}return[]}},{key:"get",value:function(t,e){var n=void 0,r=void 0,i=void 0;hb(t)?(n=t,i=e):sK(t)?(r=t,i=e):i=t;var s,o=i&&"Object"===i.returnType?"Object":"Array",a=i&&i8(i),u=[],l=void 0,c=void 0,h=void 0;if(null!=n)(l=this._data.get(n))&&a&&!a(l)&&(l=void 0);else if(null!=r)for(var p=0,d=r.length;p<d;p++)null==(l=this._data.get(r[p]))||a&&!a(l)||u.push(l);else for(var f,m=0,v=(c=sz(cQ(f=this._data).call(f))).length;m<v;m++)h=c[m],null==(l=this._data.get(h))||a&&!a(l)||u.push(l);if(i&&i.order&&null==n&&this._sort(u,i.order),i&&i.fields){var g=i.fields;if(null!=n&&null!=l)l=this._filterFields(l,g);else for(var y=0,b=u.length;y<b;y++)u[y]=this._filterFields(u[y],g)}if("Object"==o){for(var w={},T=0,x=u.length;T<x;T++){var k=u[T];w[k[this._idProp]]=k}return w}return null!=n?null!=(s=l)?s:null:u}},{key:"getIds",value:function(t){var e=this._data,n=t&&i8(t),r=t&&t.order,i=sz(cQ(e).call(e)),s=[];if(n)if(r){for(var o=[],a=0,u=i.length;a<u;a++){var l=i[a],c=this._data.get(l);null!=c&&n(c)&&o.push(c)}this._sort(o,r);for(var h=0,p=o.length;h<p;h++)s.push(o[h][this._idProp])}else for(var d=0,f=i.length;d<f;d++){var m=i[d],v=this._data.get(m);null!=v&&n(v)&&s.push(v[this._idProp])}else if(r){for(var g=[],y=0,b=i.length;y<b;y++){var w=i[y];g.push(e.get(w))}this._sort(g,r);for(var T=0,x=g.length;T<x;T++)s.push(g[T][this._idProp])}else for(var k=0,S=i.length;k<S;k++){var A=i[k],C=e.get(A);null!=C&&s.push(C[this._idProp])}return s}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var n=e&&i8(e),r=this._data,i=sz(cQ(r).call(r));if(e&&e.order)for(var s=this.get(e),o=0,a=s.length;o<a;o++){var u=s[o];t(u,u[this._idProp])}else for(var l=0,c=i.length;l<c;l++){var h=i[l],p=this._data.get(h);null==p||n&&!n(p)||t(p,h)}}},{key:"map",value:function(t,e){for(var n=e&&i8(e),r=[],i=this._data,s=sz(cQ(i).call(i)),o=0,a=s.length;o<a;o++){var u=s[o],l=this._data.get(u);null==l||n&&!n(l)||r.push(t(l,u))}return e&&e.order&&this._sort(r,e.order),r}},{key:"_filterFields",value:function(t,e){var n;return t?iK(n=sK(e)?e:s0(e)).call(n,function(e,n){return e[n]=t[n],e},{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e)ha(t).call(t,function(t,n){var r=t[e],i=n[e];return r>i?1:r<i?-1:0});else{if("function"!=typeof e)throw TypeError("Order must be a function or a string");ha(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var n=[],r=[],i=sK(t)?t:[t],s=0,o=i.length;s<o;s++){var a=this._remove(i[s]);if(a){var u=a[this._idProp];null!=u&&(n.push(u),r.push(a))}}return n.length&&this._trigger("remove",{items:n,oldData:r},e),n}},{key:"_remove",value:function(t){var e;if(hb(t)?e=t:t&&"object"==typeof t&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var n=this._data.get(e)||null;return this._data.delete(e),--this.length,n}return null}},{key:"clear",value:function(t){for(var e,n=sz(cQ(e=this._data).call(e)),r=[],i=0,s=n.length;i<s;i++)r.push(this._data.get(n[i]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:r},t),n}},{key:"max",value:function(t){var e,n,r=null,i=null,s=hI(hh(e=this._data).call(e));try{for(s.s();!(n=s.n()).done;){var o=n.value,a=o[t];"number"==typeof a&&(null==i||a>i)&&(r=o,i=a)}}catch(t){s.e(t)}finally{s.f()}return r||null}},{key:"min",value:function(t){var e,n,r=null,i=null,s=hI(hh(e=this._data).call(e));try{for(s.s();!(n=s.n()).done;){var o=n.value,a=o[t];"number"==typeof a&&(null==i||a<i)&&(r=o,i=a)}}catch(t){s.e(t)}finally{s.f()}return r||null}},{key:"distinct",value:function(t){for(var e=this._data,n=sz(cQ(e).call(e)),r=[],i=0,s=0,o=n.length;s<o;s++){for(var a=n[s],u=e.get(a)[t],l=!1,c=0;c<i;c++)if(r[c]==u){l=!0;break}l||void 0===u||(r[i]=u,i++)}return r}},{key:"_addItem",value:function(t){var n,r=(null==t[n=this._idProp]&&(t[n]=function(t,n,r){if(h_.randomUUID&&!t)return h_.randomUUID();let i=(t=t||{}).random||(t.rng||function(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(hg)})();i[6]=15&i[6]|64,void(i[8]=63&i[8]|128);return function(t,e=0){return hy[t[e+0]]+hy[t[e+1]]+hy[t[e+2]]+hy[t[e+3]]+"-"+hy[t[e+4]]+hy[t[e+5]]+"-"+hy[t[e+6]]+hy[t[e+7]]+"-"+hy[t[e+8]]+hy[t[e+9]]+"-"+hy[t[e+10]]+hy[t[e+11]]+hy[t[e+12]]+hy[t[e+13]]+hy[t[e+14]]+hy[t[e+15]]}(i)}()),t),i=r[this._idProp];if(this._data.has(i))throw Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,r),++this.length,i}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw Error("Cannot update item: item has no id (item: "+ow(t)+")");var n=this._data.get(e);if(!n)throw Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,hE(hE({},n),t)),e}},{key:"stream",value:function(t){if(t){var e,n=this._data;return new hC({[hp]:()=>cx.mark(function e(){var r,i,s,o;return cx.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=hI(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=11;break}if(s=i.value,null==(o=n.get(s))){e.next=9;break}return e.next=9,[s,o];case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[1,13,16,19]])})()})}return new hC({[hp]:iz(e=hv(this._data)).call(e,this._data)})}}]),s}(hT);function hD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var hN=function(t){uC(i,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!ua||ua.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ua(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=uI(i);return t=e?ua(n,arguments,uI(this).constructor):n.apply(this,arguments),uO(this,t)});function i(t,e){var s,o;return r(this,i),iN(uw(o=n.call(this)),"length",0),iN(uw(o),"_ids",new hx),o._options=e||{},o._listener=iz(s=o._onEvent).call(s,uw(o)),o.setData(t),o}return iD(i,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:i8(this._options)}),n=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:n})}if(null!=t){this._data=t;for(var r=this._data.getIds({filter:i8(this._options)}),i=0,s=r.length;i<s;i++){var o=r[i];this._ids.add(o)}this.length=r.length,this._trigger("add",{items:r})}else this._data=new hP;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:i8(this._options)}),e=sz(this._ids),n={},r=[],i=[],s=[],o=0,a=t.length;o<a;o++){var u=t[o];n[u]=!0,this._ids.has(u)||(r.push(u),this._ids.add(u))}for(var l=0,c=e.length;l<c;l++){var h=e[l],p=this._data.get(h);null==p?console.error("If you see this, report it please."):n[h]||(i.push(h),s.push(p),this._ids.delete(h))}this.length+=r.length-i.length,r.length&&this._trigger("add",{items:r}),i.length&&this._trigger("remove",{items:i,oldData:s})}},{key:"get",value:function(t,e){if(null==this._data)return null;var n,r=null;hb(t)||sK(t)?(r=t,n=e):n=t;var i=ov({},this._options,n),s=i8(this._options),o=n&&i8(n);return s&&o&&(i.filter=function(t){return s(t)&&o(t)}),null==r?this._data.get(i):this._data.get(r,i)}},{key:"getIds",value:function(t){if(this._data.length){var e,n=i8(this._options),r=null!=t?i8(t):null;return e=r?n?function(t){return n(t)&&r(t)}:r:n,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var n,r,i=i8(this._options),s=e&&i8(e);r=s?i?function(t){return i(t)&&s(t)}:s:i,s5(n=this._data).call(n,t,{filter:r,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var n,r,i=i8(this._options),s=e&&i8(e);return r=s?i?function(t){return i(t)&&s(t)}:s:i,i5(n=this._data).call(n,t,{filter:r,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||{[hp]:iz(e=cQ(this._ids)).call(e,this._ids)})}},{key:"dispose",value:function(){null!=(t=this._data)&&t.off&&this._data.off("*",this._listener);var t,e,n="This data view has already been disposed of.",r={get:function(){throw Error(n)},set:function(){throw Error(n)},configurable:!1},s=function(t,e){var n=void 0!==sG&&sT(t)||t["@@iterator"];if(!n){if(sK(t)||(n=function(t,e){if(t){if("string"==typeof t)return hD(t,void 0);var n,r=s$(n=Object.prototype.toString.call(t)).call(n,8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return sb(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hD(t,void 0)}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(sQ(i.prototype));try{for(s.s();!(e=s.n()).done;){var o=e.value;ub(this,o,r)}}catch(t){s.e(t)}finally{s.f()}}},{key:"_onEvent",value:function(t,e,n){if(e&&e.items&&this._data){var r=e.items,i=[],s=[],o=[],a=[],u=[],l=[];switch(t){case"add":for(var c=0,h=r.length;c<h;c++){var p=r[c];this.get(p)&&(this._ids.add(p),i.push(p))}break;case"update":for(var d=0,f=r.length;d<f;d++){var m=r[d];this.get(m)?this._ids.has(m)?(s.push(m),u.push(e.data[d]),a.push(e.oldData[d])):(this._ids.add(m),i.push(m)):this._ids.has(m)&&(this._ids.delete(m),o.push(m),l.push(e.oldData[d]))}break;case"remove":for(var v=0,g=r.length;v<g;v++){var y=r[v];this._ids.has(y)&&(this._ids.delete(y),o.push(y),l.push(e.oldData[v]))}}this.length+=i.length-o.length,i.length&&this._trigger("add",{items:i},n),s.length&&this._trigger("update",{items:s,oldData:a,data:u},n),o.length&&this._trigger("remove",{items:o,oldData:l},n)}}}]),i}(hT);function hR(t,e){return"object"==typeof e&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof s5(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof i5(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}t.DELETE=a4,t.DataSet=hP,t.DataStream=hC,t.DataView=hN,t.Queue=hw,t.createNewDataPipeFrom=function(t){return new sr(t)},t.isDataSetLike=hR,t.isDataViewLike=function(t,e){return"object"==typeof e&&null!==e&&t===e.idProp&&"function"==typeof s5(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof i5(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&hR(t,e.getDataSet())}})(e)},25277:t=>{"use strict";t.exports=function(t,e){return new Promise(function(n,r){var i=new XMLHttpRequest;e&&(i.responseType=e),i.open("GET",t),i.onload=function(){200===i.status?n(i.response):r(Error(i.statusText))},i.onerror=function(){r(Error("Network Error"))},i.send()})}},27717:(t,e,n)=>{"use strict";var r=n(44300);function i(t){return function(e){return"string"==typeof e&&t.test(e)}}function s(t,e){return"string"==typeof t?t+e:"function"==typeof t?t(e):e}function o(t,e,n,r){var i,s,o=e instanceof ArrayBuffer?a:u(e)?l:(i=e)&&"function"==typeof i.then?c:h(e)?p:(s=e)&&"object"==typeof s?d:f(e)?m:v(e)?g:y(e)?b:null;return o?o(t,e,n||{}):r?Promise.resolve(r):Promise.reject("Source not valid ("+e+")")}function a(t,e,n){return new Promise(function(n,r){t.decodeAudioData(e,function(t){n(t)},function(){r("Can't decode audio data ("+e.slice(0,30)+"...)")})})}o.fetch=n(25277);var u=i(/\.(mp3|wav|ogg)(\?.*)?$/i);function l(t,e,n){var r=s(n.from,e);return o(t,o.fetch(r,"arraybuffer"),n)}function c(t,e,n){return e.then(function(e){return o(t,e,n)})}var h=Array.isArray;function p(t,e,n){return Promise.all(e.map(function(e){return o(t,e,n,e)}))}function d(t,e,n){var r={};return Promise.all(Object.keys(e).map(function(i){if(n.only&&-1===n.only.indexOf(i))return null;var s=e[i];return o(t,s,n,s).then(function(t){r[i]=t})})).then(function(){return r})}var f=i(/\.json(\?.*)?$/i);function m(t,e,n){var r=s(n.from,e);return o(t,o.fetch(r,"text").then(JSON.parse),n)}var v=i(/^data:audio/);function g(t,e,n){var i=e.indexOf(",");return o(t,r.decode(e.slice(i+1)).buffer,n)}var y=i(/\.js(\?.*)?$/i);function b(t,e,n){var r=s(n.from,e);return o(t,o.fetch(r,"text").then(w),n)}function w(t){var e=t.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");e=t.indexOf("=",e)+2;var n=t.lastIndexOf(",");return JSON.parse(t.slice(e,n)+"}")}t.exports&&(t.exports=o),"undefined"!=typeof window&&(window.loadAudio=o)},31365:(t,e,n)=>{var r=n(12883).default,i=n(78212);t.exports=function(t){var e=i(t,"string");return"symbol"==r(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},32605:(t,e,n)=>{"use strict";var r=n(29563);e.A=void 0;var i=r(n(59628)),s=n(37876);e.A=(0,i.default)((0,s.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline")},36897:function(t,e,n){(function(t,e,n,r){"use strict";var i=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},s=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},o=function(t,e){return{startTime:e,type:"setValue",value:t}},a=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},u=function(t,e,n){var r=n.startTime,i=n.target;return i+(e-i)*Math.exp((r-t)/n.timeConstant)},l=function(t){return"exponentialRampToValue"===t.type},c=function(t){return"linearRampToValue"===t.type},h=function(t){return l(t)||c(t)},p=function(t){return"setValue"===t.type},d=function(t){return"setValueCurve"===t.type},f=function(t,e,n,r){var i=t[e];return void 0===i?r:h(i)||p(i)?i.value:d(i)?i.values[i.values.length-1]:u(n,f(t,e-1,i.startTime,r),i)},m=function(t,e,n,r,i){return void 0===n?[r.insertTime,i]:h(n)?[n.endTime,n.value]:p(n)?[n.startTime,n.value]:d(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(t,e-1,n.startTime,i)]},v=function(t){return"cancelAndHold"===t.type},g=function(t){return"cancelScheduledValues"===t.type},y=function(t){return v(t)||g(t)?t.cancelTime:l(t)||c(t)?t.endTime:t.startTime},b=function(t,e,n,r){var i=r.endTime,s=r.value;return n===s?s:0<n&&0<s||n<0&&s<0?n*Math.pow(s/n,(t-e)/(i-e)):0},w=function(t,e,n,r){return n+(t-e)/(r.endTime-e)*(r.value-n)},T=function(t,e){var n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},x=function(t,e){var n=e.duration,r=e.startTime,i=e.values,s=(t-r)/n*(i.length-1);return T(i,s)},k=function(t){return"setTarget"===t.type};t.AutomationEventList=r(function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=y(t);if(v(t)||g(t)){var n=this._automationEvents.findIndex(function(n){return g(t)&&d(n)?n.startTime+n.duration>=e:y(n)>=e}),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),v(t)){var u=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&h(r)){if(void 0!==u&&k(u))throw Error("The internal list is malformed.");var p=void 0===u?r.insertTime:d(u)?u.startTime+u.duration:y(u),f=void 0===u?this._defaultValue:d(u)?u.values[u.values.length-1]:u.value,m=l(r)?b(e,p,f,r):w(e,p,f,r),T=l(r)?i(m,e,this._currenTime):s(m,e,this._currenTime);this._automationEvents.push(T)}if(void 0!==u&&k(u)&&this._automationEvents.push(o(this.getValue(e),e)),void 0!==u&&d(u)&&u.startTime+u.duration>e){var x=e-u.startTime,S=(u.values.length-1)/u.duration,A=Math.max(2,1+Math.ceil(x*S)),C=x/(A-1)*S,O=u.values.slice(0,A);if(C<1)for(var E=1;E<A;E+=1){var I=C*E%1;O[E]=u.values[E-1]*(1-I)+u.values[E]*I}this._automationEvents[this._automationEvents.length-1]=a(O,u.startTime,x)}}}else{var M=this._automationEvents.findIndex(function(t){return y(t)>e}),P=-1===M?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[M-1];if(void 0!==P&&d(P)&&y(P)+P.duration>e)return!1;var D=l(t)?i(t.value,t.endTime,this._currenTime):c(t)?s(t.value,e,this._currenTime):t;if(-1===M)this._automationEvents.push(D);else{if(d(t)&&e+t.duration>y(this._automationEvents[M]))return!1;this._automationEvents.splice(M,0,D)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return y(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),r=n[0];k(r)&&n.unshift(o(f(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(e){return y(e)>t}),r=this._automationEvents[n],i=(-1===n?this._automationEvents.length:n)-1,s=this._automationEvents[i];if(void 0!==s&&k(s)&&(void 0===r||!h(r)||r.insertTime>t))return u(t,f(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(void 0!==s&&p(s)&&(void 0===r||!h(r)))return s.value;if(void 0!==s&&d(s)&&(void 0===r||!h(r)||s.startTime+s.duration>t))return t<s.startTime+s.duration?x(t,s):s.values[s.values.length-1];if(void 0!==s&&h(s)&&(void 0===r||!h(r)))return s.value;if(void 0!==r&&l(r)){var o=e(m(this._automationEvents,i,s,r,this._defaultValue),2);return b(t,o[0],o[1],r)}if(void 0!==r&&c(r)){var a=e(m(this._automationEvents,i,s,r,this._defaultValue),2);return w(t,a[0],a[1],r)}return this._defaultValue}}]),t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=o,t.createSetValueCurveAutomationEvent=a})(e,n(37990),n(4338),n(18758))},37309:(t,e,n)=>{e.parseMidi=n(77442),e.writeMidi=n(22642)},37990:(t,e,n)=>{var r=n(99838),i=n(96777),s=n(85403),o=n(72773);t.exports=function(t,e){return r(t)||i(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},38312:t=>{t.exports=function(t){return t.on=function(e,n){if(1==arguments.length&&"function"==typeof e)return t.on("event",e);var r,i,s="on"+e,o=t[s];return t[s]=o?(r=o,i=n,function(t,e,n,s){r(t,e,n,s),i(t,e,n,s)}):n,t},t}},40236:(t,e,n)=>{"use strict";var r=n(29563);e.A=void 0;var i=r(n(59628)),s=n(37876);e.A=(0,i.default)((0,s.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")},42993:(t,e,n)=>{"use strict";n.d(e,{A:()=>S});var r=n(40670),i=n(44501),s=n(14232),o=n(69241),a=n(12535),u=n(45879),l=n(4697),c=n(14379),h=n(48553),p=n(90809),d=n(14248),f=n(19668),m=n(53894),v=n(37876);let g=["component","direction","spacing","divider","children","className","useFlexGap"],y=(0,d.A)(),b=(0,c.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function w(t){return(0,h.A)({props:t,name:"MuiStack",defaultTheme:y})}let T=({ownerState:t,theme:e})=>{let n=(0,i.A)({display:"flex",flexDirection:"column"},(0,f.NI)({theme:e},(0,f.kW)({values:t.direction,breakpoints:e.breakpoints.values}),t=>({flexDirection:t})));if(t.spacing){let r=(0,m.LX)(e),i=Object.keys(e.breakpoints.values).reduce((e,n)=>(("object"==typeof t.spacing&&null!=t.spacing[n]||"object"==typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e),{}),s=(0,f.kW)({values:t.direction,base:i}),o=(0,f.kW)({values:t.spacing,base:i});"object"==typeof s&&Object.keys(s).forEach((t,e,n)=>{if(!s[t]){let r=e>0?s[n[e-1]]:"column";s[t]=r}}),n=(0,a.A)(n,(0,f.NI)({theme:e},o,(e,n)=>t.useFlexGap?{gap:(0,m._W)(r,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n?s[n]:t.direction]}`]:(0,m._W)(r,e)}}))}return(0,f.iZ)(e.breakpoints,n)};var x=n(35268),k=n(77573);let S=function(t={}){let{createStyledComponent:e=b,useThemeProps:n=w,componentName:a="MuiStack"}=t,c=e(T);return s.forwardRef(function(t,e){let h=n(t),d=(0,p.A)(h),{component:f="div",direction:m="column",spacing:y=0,divider:b,children:w,className:T,useFlexGap:x=!1}=d,k=(0,r.A)(d,g),S=(0,l.A)({root:["root"]},t=>(0,u.Ay)(a,t),{});return(0,v.jsx)(c,(0,i.A)({as:f,ownerState:{direction:m,spacing:y,useFlexGap:x},ref:e,className:(0,o.A)(S.root,T)},k,{children:b?function(t,e){let n=s.Children.toArray(t).filter(Boolean);return n.reduce((t,r,i)=>(t.push(r),i<n.length-1&&t.push(s.cloneElement(e,{key:`separator-${i}`})),t),[])}(w,b):w}))})}({createStyledComponent:(0,x.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>(0,k.b)({props:t,name:"MuiStack"})})},44300:t=>{"use strict";t.exports={decode:function(t,e){for(var n,r,i,s=t.replace(/[^A-Za-z0-9\+\/]/g,""),o=s.length,a=e?Math.ceil((3*o+1>>2)/e)*e:3*o+1>>2,u=new Uint8Array(a),l=0,c=0,h=0;h<o;h++)if(i=3&h,l|=((n=s.charCodeAt(h))>64&&n<91?n-65:n>96&&n<123?n-71:n>47&&n<58?n+4:43===n?62:63*(47===n))<<18-6*i,3===i||o-h==1){for(r=0;r<3&&c<a;r++,c++)u[c]=l>>>(16>>>r&24)&255;l=0}return u}}},45105:(t,e,n)=>{t.exports=n(36758)},48934:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Instrument=void 0;var r=n(60477),i=new WeakMap;e.Instrument=function(){function t(t,e){if(this.number=0,i.set(this,e),this.number=0,t){var n=t.find(function(t){return"programChange"===t.type});n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?r.DrumKitByPatchID[this.number]:r.instrumentByPatchID[this.number]},set:function(t){var e=r.instrumentByPatchID.indexOf(t);-1!==e&&(this.number=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":r.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){return 9===i.get(this).channel},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},t.prototype.fromJSON=function(t){this.number=t.number},t}()},52236:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PitchBend=void 0;var n=new WeakMap;e.PitchBend=function(){function t(t,e){n.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"time",{get:function(){return n.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=n.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}()},53132:(t,e,n)=>{"use strict";var r=n(29563);e.A=void 0;var i=r(n(59628)),s=n(37876);e.A=(0,i.default)((0,s.jsx)("path",{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5m3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3z"}),"CleaningServices")},53919:(t,e,n)=>{"use strict";var r=n(27717),i=n(6403);function s(t){return/\.js(\?.*)?$/i.test(t)}function o(t,e,n){return"https://gleitz.github.io/midi-js-soundfonts/"+(e="FluidR3_GM"===e?e:"MusyngKite")+"/"+t+"-"+(n="ogg"===n?n:"mp3")+".js"}var a=n(91042);a.instrument=function t(e,n,a){if(1==arguments.length)return function(n,r){return t(e,n,r)};var u=a||{},l=u.isSoundfontURL||s,c=u.nameToUrl||o,h=l(n)?n:c(n,u.soundfont,u.format);return r(e,h,{only:u.only||u.notes}).then(function(t){var r=i(e,t,u).connect(u.destination?u.destination:e.destination);return r.url=h,r.name=n,r})},a.nameToUrl=o,t.exports&&(t.exports=a),"undefined"!=typeof window&&(window.Soundfont=a)},57208:(t,e,n)=>{"use strict";function r(t){var e=[];return function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?t(i,n):n.push(i)}}(t,e),e}n.r(e),n.d(e,{flatten:()=>r})},59733:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e,n){if(n||2==arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.encode=void 0;var i=n(37309),s=n(89446),o=n(57208);e.encode=function(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:r([r(r(r(r([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map(function(t){var e;return e=s.keySignatureKeys.indexOf(t.key),{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:+("major"!==t.scale),type:"keySignature"}}),!0),t.header.meta.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,text:t.text,type:t.type}}),!0),t.header.tempos.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}),!0),t.header.timeSignatures.map(function(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}),!0)],t.tracks.map(function(t){var e;return r(r(r([{absoluteTime:0,deltaTime:0,meta:!0,text:t.name,type:"trackName"},{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}],(0,o.flatten)(t.notes.map(function(e){var n;return n=t.channel,[{absoluteTime:e.ticks,channel:n,deltaTime:0,noteNumber:e.midi,type:"noteOn",velocity:Math.floor(127*e.velocity)},{absoluteTime:e.ticks+e.durationTicks,channel:n,deltaTime:0,noteNumber:e.midi,type:"noteOff",velocity:Math.floor(127*e.noteOffVelocity)}]})),!0),function(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach(function(n){var r;e.push((r=t.channel,{absoluteTime:n.ticks,channel:r,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(127*n.value)}))});return e}(t),!0),(e=[],t.pitchBends.forEach(function(n){var r;e.push((r=t.channel,{absoluteTime:n.ticks,channel:r,deltaTime:0,type:"pitchBend",value:n.value}))}),e),!0)}),!0)};return e.tracks=e.tracks.map(function(t){t=t.sort(function(t,e){return t.absoluteTime-e.absoluteTime});var e=0;return t.forEach(function(t){t.deltaTime=t.absoluteTime-e,e=t.absoluteTime,delete t.absoluteTime}),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t}),new Uint8Array((0,i.writeMidi)(e))}},60048:t=>{t.exports=(function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){if(s)return s(o,!0);var u=Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){return i(e[o][1][t]||t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i})({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return new function(t){if(this._event=t,this._data=t.data,this.receivedTime=t.receivedTime,this._data&&this._data.length<2)return void console.warn("Illegal MIDI message of length",this._data.length);switch(this._messageCode=240&t.data[0],this.channel=15&t.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 144:this.messageType="noteon",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 160:this.messageType="keypressure",this.key=127&t.data[1],this.pressure=127&t.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&t.data[1],this.controllerValue=127&t.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=t.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&t.data[1];break;case 224:this.messageType="pitchbendchange";var e=127&t.data[2],n=127&t.data[1];this.pitchBend=(e<<8)+n}}(t)},e.exports=n.default},{}]},{},[1])(1)},60477:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrumKitByPatchID=e.InstrumentFamilyByID=e.instrumentByPatchID=void 0,e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],e.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},72740:(t,e,n)=>{var r=n(60048);t.exports=function(t){return t.listenToMidi=function(e,n){var i={},s=n||{},o=s.gain||function(t){return t/127};return e.onmidimessage=function(e){var n=e.messageType?e:r(e);if("noteon"===n.messageType&&0===n.velocity&&(n.messageType="noteoff"),!s.channel||n.channel===s.channel)switch(n.messageType){case"noteon":i[n.key]=t.play(n.key,0,{gain:o(n.velocity)});break;case"noteoff":i[n.key]&&(i[n.key].stop(),delete i[n.key])}},t},t}},72773:t=>{t.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},73078:(t,e,n)=>{"use strict";var r=n(29563);e.A=void 0;var i=r(n(59628)),s=n(37876);e.A=(0,i.default)((0,s.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp")},74888:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlChange=e.controlChangeIds=e.controlChangeNames=void 0,e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce(function(t,n){return t[e.controlChangeNames[n]]=n,t},{});var n=new WeakMap,r=new WeakMap,i=function(){function t(t,e){n.set(this,e),r.set(this,t.controllerType),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"number",{get:function(){return r.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return n.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=n.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},t}();e.ControlChange=i},77442:t=>{function e(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}e.prototype.eof=function(){return this.pos>=this.bufferLen},e.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},e.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},e.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},e.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-0x1000000:t},e.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},e.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},e.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)},e.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(!(128&e))return t+e;t+=127&e,t<<=7}return t},e.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32(),n=this.readBytes(e);return{id:t,length:e,data:n}},t.exports=function(t){var n,r,i,s=new e(t),o=s.readChunk();if("MThd"!=o.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+o.id+"'";for(var a=(r={format:(n=new e(o.data)).readUInt16(),numTracks:n.readUInt16()},32768&(i=n.readUInt16())?(r.framesPerSecond=256-(i>>8),r.ticksPerFrame=255&i):r.ticksPerBeat=i,r),u=[],l=0;!s.eof()&&l<a.numTracks;l++){var c=s.readChunk();if("MTrk"!=c.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+c.id+"'";var h=function(t){for(var n,r=new e(t),i=[];!r.eof();){var s=function(){var t={};t.deltaTime=r.readVarInt();var e=r.readUInt8();if((240&e)==240)if(255===e){t.meta=!0;var i=r.readUInt8(),s=r.readVarInt();switch(i){case 0:if(t.type="sequenceNumber",2!==s)throw"Expected length for sequenceNumber event is 2, got "+s;return t.number=r.readUInt16(),t;case 1:return t.type="text",t.text=r.readString(s),t;case 2:return t.type="copyrightNotice",t.text=r.readString(s),t;case 3:return t.type="trackName",t.text=r.readString(s),t;case 4:return t.type="instrumentName",t.text=r.readString(s),t;case 5:return t.type="lyrics",t.text=r.readString(s),t;case 6:return t.type="marker",t.text=r.readString(s),t;case 7:return t.type="cuePoint",t.text=r.readString(s),t;case 32:if(t.type="channelPrefix",1!=s)throw"Expected length for channelPrefix event is 1, got "+s;return t.channel=r.readUInt8(),t;case 33:if(t.type="portPrefix",1!=s)throw"Expected length for portPrefix event is 1, got "+s;return t.port=r.readUInt8(),t;case 47:if(t.type="endOfTrack",0!=s)throw"Expected length for endOfTrack event is 0, got "+s;return t;case 81:if(t.type="setTempo",3!=s)throw"Expected length for setTempo event is 3, got "+s;return t.microsecondsPerBeat=r.readUInt24(),t;case 84:if(t.type="smpteOffset",5!=s)throw"Expected length for smpteOffset event is 5, got "+s;var o=r.readUInt8();return t.frameRate=({0:24,32:25,64:29,96:30})[96&o],t.hour=31&o,t.min=r.readUInt8(),t.sec=r.readUInt8(),t.frame=r.readUInt8(),t.subFrame=r.readUInt8(),t;case 88:if(t.type="timeSignature",2!=s&&4!=s)throw"Expected length for timeSignature event is 4 or 2, got "+s;return t.numerator=r.readUInt8(),t.denominator=1<<r.readUInt8(),4===s?(t.metronome=r.readUInt8(),t.thirtyseconds=r.readUInt8()):(t.metronome=36,t.thirtyseconds=8),t;case 89:if(t.type="keySignature",2!=s)throw"Expected length for keySignature event is 2, got "+s;return t.key=r.readInt8(),t.scale=r.readUInt8(),t;case 127:return t.type="sequencerSpecific",t.data=r.readBytes(s),t;default:return t.type="unknownMeta",t.data=r.readBytes(s),t.metatypeByte=i,t}}else if(240==e){t.type="sysEx";var s=r.readVarInt();return t.data=r.readBytes(s),t}else if(247==e){t.type="endSysEx";var s=r.readVarInt();return t.data=r.readBytes(s),t}else throw"Unrecognised MIDI event type byte: "+e;if((128&e)==0){if(null===n)throw"Running status byte encountered before status byte";a=e,e=n,t.running=!0}else a=r.readUInt8(),n=e;var a,u=e>>4;switch(t.channel=15&e,u){case 8:return t.type="noteOff",t.noteNumber=a,t.velocity=r.readUInt8(),t;case 9:var l=r.readUInt8();return t.type=0===l?"noteOff":"noteOn",t.noteNumber=a,t.velocity=l,0===l&&(t.byte9=!0),t;case 10:return t.type="noteAftertouch",t.noteNumber=a,t.amount=r.readUInt8(),t;case 11:return t.type="controller",t.controllerType=a,t.value=r.readUInt8(),t;case 12:return t.type="programChange",t.programNumber=a,t;case 13:return t.type="channelAftertouch",t.amount=a,t;case 14:return t.type="pitchBend",t.value=a+(r.readUInt8()<<7)-8192,t;default:throw"Unrecognised MIDI event type: "+u}}();i.push(s)}return i}(c.data);u.push(h)}return{header:a,tracks:u}}},78212:(t,e,n)=>{var r=n(12883).default;t.exports=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},78753:(t,e,n)=>{"use strict";n.d(e,{A:()=>C});var r=n(40670),i=n(44501),s=n(14232),o=n(69241),a=n(4697),u=n(97613),l=n(35268),c=n(29176),h=n(77573),p=n(82532),d=n(29373),f=n(46154),m=n(59714),v=n(16045),g=n(47951);let y=(0,g.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);var b=n(50243),w=n(45879);function T(t){return(0,w.Ay)("MuiMenuItem",t)}let x=(0,g.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var k=n(37876);let S=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],A=(0,l.Ay)(d.A,{shouldForwardProp:t=>(0,c.A)(t)||"classes"===t,name:"MuiMenuItem",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})(t=>{let{theme:e,ownerState:n}=t;return(0,i.A)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(x.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,u.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(x.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,u.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(x.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,u.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,u.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},["&.".concat(x.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(x.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity},["& + .".concat(v.A.root)]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},["& + .".concat(v.A.inset)]:{marginLeft:52},["& .".concat(b.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(b.A.inset)]:{paddingLeft:36},["& .".concat(y.root)]:{minWidth:36}},!n.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,i.A)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{["& .".concat(y.root," svg")]:{fontSize:"1.25rem"}}))}),C=s.forwardRef(function(t,e){let n,u=(0,h.b)({props:t,name:"MuiMenuItem"}),{autoFocus:l=!1,component:c="li",dense:d=!1,divider:v=!1,disableGutters:g=!1,focusVisibleClassName:y,role:b="menuitem",tabIndex:w,className:x}=u,C=(0,r.A)(u,S),O=s.useContext(p.A),E=s.useMemo(()=>({dense:d||O.dense||!1,disableGutters:g}),[O.dense,d,g]),I=s.useRef(null);(0,f.A)(()=>{l&&I.current&&I.current.focus()},[l]);let M=(0,i.A)({},u,{dense:E.dense,divider:v,disableGutters:g}),P=(t=>{let{disabled:e,dense:n,divider:r,disableGutters:s,selected:o,classes:u}=t,l=(0,a.A)({root:["root",n&&"dense",e&&"disabled",!s&&"gutters",r&&"divider",o&&"selected"]},T,u);return(0,i.A)({},u,l)})(u),D=(0,m.A)(I,e);return u.disabled||(n=void 0!==w?w:-1),(0,k.jsx)(p.A.Provider,{value:E,children:(0,k.jsx)(A,(0,i.A)({ref:D,role:b,tabIndex:n,component:c,focusVisibleClassName:(0,o.A)(P.focusVisible,y),className:(0,o.A)(P.root,x)},C,{ownerState:M,classes:P}))})})},79603:t=>{t.exports=function(t){var i,s,o,a=t.createGain(),u=(s=(i=t).createBufferSource(),(o=i.createBuffer(1,2,i.sampleRate)).getChannelData(0).set(n),s.buffer=o,s.loop=!0,a._voltage=s),l=r(u),c=r(u),h=r(u);return a._startAmount=r(c),a._endAmount=r(h),a._multiplier=r(l),a._multiplier.connect(a),a._startAmount.connect(a),a._endAmount.connect(a),a.value=l.gain,a.startValue=c.gain,a.endValue=h.gain,a.startValue.value=0,a.endValue.value=0,Object.defineProperties(a,e),a};var e={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){var e=this._multiplier.gain,n=this._startAmount.gain,r=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;var s=this.sustain;e.cancelScheduledValues(t),n.cancelScheduledValues(t),r.cancelScheduledValues(t),r.setValueAtTime(0,t),this.attack?(e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+this.attack),n.setValueAtTime(1,t),n.linearRampToValueAtTime(0,t+this.attack)):(e.setValueAtTime(1,t),n.setValueAtTime(0,t)),this.decay&&e.setTargetAtTime(s,this._decayFrom,i(this.decay))}},stop:{value:function(t,e){e&&(t-=this.release);var n=t+this.release;if(this.release){var r=this._multiplier.gain,s=this._startAmount.gain,o=this._endAmount.gain;r.cancelScheduledValues(t),s.cancelScheduledValues(t),o.cancelScheduledValues(t);var a=i(this.release);if(this.attack&&t<this._decayFrom){var u,l,c,h,p,d=(u=0,l=1,c=this._startedAt,h=this._decayFrom,(p=0+(t-c)/(h-c)*(1-u))<=u&&(p=u),p>=l&&(p=l),p);r.linearRampToValueAtTime(d,t),s.linearRampToValueAtTime(1-d,t),s.setTargetAtTime(0,t,a)}o.setTargetAtTime(1,t,a),r.setTargetAtTime(0,t,a)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},n=new Float32Array([1,1]);function r(t){var e=t.context.createGain();return t.connect(e),e}function i(t){return Math.log(t+1)/Math.log(100)}},79706:(t,e,n)=>{"use strict";var r=n(3717);function i(){}function s(){}s.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,s,o){if(o!==r){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},82586:(t,e,n)=>{"use strict";var r=n(3675),i=function(t){return null!==t&&t!==[]&&t>=0&&t<129?+t:r.midi(t)};t.exports=function(t){if(t.buffers){var e,n,r=t.opts.map,s="function"==typeof r?r:i,o=function(t){return t?s(t)||t:null};e=t.buffers,n=o,t.buffers=Object.keys(e).reduce(function(t,r){return t[n(r)]=e[r],t},{});var a=t.start;t.start=function(t,e,n){var r=o(t),i=r%1;return i&&(r=Math.floor(r),n=Object.assign(n||{},{cents:Math.floor(100*i)})),a(r,e,n)}}return t}},83914:t=>{"use strict";var e=Array.isArray,n={};t.exports=function(t){return t.schedule=function(r,i){var s,o,a,u,l=t.context.currentTime,c=r<l?l:r;return t.emit("schedule",c,i),i.map(function(r){var i;return r?(e(r)?(s=r[0],o=r[1]):(s=r.time,o=r),(i=o)&&"object"==typeof i?(a=o.name||o.key||o.note||o.midi||null,u=o):(a=o,u=n),t.start(a,c+(s||0),u)):null})},t}},85403:(t,e,n)=>{var r=n(7162);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=({}).toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},89446:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.keySignatureKeys=void 0;var r=n(6422),i=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var s=function(){function t(t){var n=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",i.set(this,480),t){i.set(this,t.header.ticksPerBeat),t.tracks.forEach(function(t){t.forEach(function(t){t.meta&&("timeSignature"===t.type?n.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):"setTempo"===t.type?n.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):"keySignature"===t.type&&n.keySignatures.push({key:e.keySignatureKeys[t.key+7],scale:0===t.scale?"major":"minor",ticks:t.absoluteTime}))})});var r=0;t.tracks[0].forEach(function(t){r+=t.deltaTime,t.meta&&("trackName"===t.type?n.name=t.text:("text"===t.type||"cuePoint"===t.type||"marker"===t.type||"lyrics"===t.type)&&n.meta.push({text:t.text,ticks:r,type:t.type}))}),this.update()}}return t.prototype.update=function(){var t=this,e=0,n=0;this.tempos.sort(function(t,e){return t.ticks-e.ticks}),this.tempos.forEach(function(r,i){var s=i>0?t.tempos[i-1].bpm:t.tempos[0].bpm,o=r.ticks/t.ppq-n;r.time=60/s*o+e,e=r.time,n+=o}),this.timeSignatures.sort(function(t,e){return t.ticks-e.ticks}),this.timeSignatures.forEach(function(e,n){var r=n>0?t.timeSignatures[n-1]:t.timeSignatures[0],i=(e.ticks-r.ticks)/t.ppq/r.timeSignature[0]/(r.timeSignature[1]/4);r.measures=r.measures||0,e.measures=i+r.measures})},t.prototype.ticksToSeconds=function(t){var e=(0,r.search)(this.tempos,t);if(-1===e)return .5*(t/this.ppq);var n=this.tempos[e],i=n.time,s=(t-n.ticks)/this.ppq;return i+60/n.bpm*s},t.prototype.ticksToMeasures=function(t){var e=(0,r.search)(this.timeSignatures,t);if(-1===e)return t/this.ppq/4;var n=this.timeSignatures[e],i=(t-n.ticks)/this.ppq;return n.measures+i/(n.timeSignature[0]/n.timeSignature[1])/4},Object.defineProperty(t.prototype,"ppq",{get:function(){return i.get(this)},enumerable:!1,configurable:!0}),t.prototype.secondsToTicks=function(t){var e=(0,r.search)(this.tempos,t,"time");if(-1===e)return Math.round(t/.5*this.ppq);var n=this.tempos[e],i=(t-n.time)/(60/n.bpm);return Math.round(n.ticks+i*this.ppq)},t.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(t){return{bpm:t.bpm,ticks:t.ticks}}),timeSignatures:this.timeSignatures}},t.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map(function(t){return Object.assign({},t)}),this.timeSignatures=t.timeSignatures.map(function(t){return Object.assign({},t)}),this.keySignatures=t.keySignatures.map(function(t){return Object.assign({},t)}),this.meta=t.meta.map(function(t){return Object.assign({},t)}),i.set(this,t.ppq),this.update()},t.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},t}();e.Header=s},90570:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Header=e.Track=e.Midi=void 0;var s=n(37309),o=n(89446),a=n(2818),u=n(59733);e.Midi=function(){function t(t){var e=this,n=null;if(t){var r=t instanceof ArrayBuffer?new Uint8Array(t):t;(n=(0,s.parseMidi)(r)).tracks.forEach(function(t){var e=0;t.forEach(function(t){e+=t.deltaTime,t.absoluteTime=e})}),n.tracks=function(t){for(var e=[],n=0;n<t.length;n++)for(var r=e.length,i=new Map,s=Array(16).fill(0),o=0,a=t[n];o<a.length;o++){var u=a[o],l=r,c=u.channel;if(void 0!==c){"programChange"===u.type&&(s[c]=u.programNumber);var h=s[c],p="".concat(h," ").concat(c);i.has(p)?l=i.get(p):(l=r+i.size,i.set(p,l))}e[l]||e.push([]),e[l].push(u)}return e}(n.tracks)}this.header=new o.Header(n),this.tracks=[],t&&(this.tracks=n.tracks.map(function(t){return new a.Track(t,e.header)}),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return t.fromUrl=function(e){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:if(!(n=r.sent()).ok)return[3,3];return[4,n.arrayBuffer()];case 2:return[2,new t(r.sent())];case 3:throw Error("Could not load '".concat(e,"'"))}})})},Object.defineProperty(t.prototype,"name",{get:function(){return this.header.name},set:function(t){this.header.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.tracks.map(function(t){return t.duration});return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var t=this.tracks.map(function(t){return t.durationTicks});return Math.max.apply(Math,t)},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(){var t=new a.Track(void 0,this.header);return this.tracks.push(t),t},t.prototype.toArray=function(){return(0,u.encode)(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(t){return t.toJSON()})}},t.prototype.fromJSON=function(t){var e=this;this.header=new o.Header,this.header.fromJSON(t.header),this.tracks=t.tracks.map(function(t){var n=new a.Track(void 0,e.header);return n.fromJSON(t),n})},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}();var l=n(2818);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return l.Track}});var c=n(89446);Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return c.Header}})},91042:(t,e,n)=>{"use strict";var r=n(22591);function i(t,e){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof i))return new i(t);this.nameToUrl=e||i.nameToUrl,this.ctx=t,this.instruments={},this.promises=[]}i.prototype.onready=function(t){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(t)},i.prototype.instrument=function(t,e){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var n,s,o=this.ctx;if((t=t||"default")in this.instruments)return this.instruments[t];var a={name:t,play:(n=o,s=(s=e)||{},function(t,e,i,o){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var a=t>0&&t<129?+t:r.midi(t),u=a?r.midiToFreq(a,440):null;if(u){i=i||.2;var l=(o=o||{}).destination||s.destination||n.destination,c=o.vcoType||s.vcoType||"sine",h=o.gain||s.gain||.4,p=n.createOscillator();p.type=c,p.frequency.value=u;var d=n.createGain();return d.gain.value=h,p.connect(d),d.connect(l),p.start(e),i>0&&p.stop(e+i),p}})};if(this.instruments[t]=a,"default"!==t){var u=i.instrument(o,t,e).then(function(t){return a.play=t.play,a});this.promises.push(u),a.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),u.then(t)}}else a.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),t()};return a},i.loadBuffers=function(t,e,n){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),i.instrument(t,e,n).then(function(t){return t.buffers})},i.noteToMidi=r.midi,t.exports=i},95062:(t,e,n)=>{t.exports=n(79706)()},96777:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,s,o,a=[],u=!0,l=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports},99838:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}}]);